(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3d652b6e","chunk-2d22c130"],{"02bc":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"search"},[a("Card",[a("Row",{staticClass:"operation"},[a("span",[e._v("组件英文名：")]),a("Tooltip",{attrs:{content:"生成的请求api文件中将使用该组件名拼接，建议驼峰法命名",placement:"right",transfer:"","max-width":"250"}},[a("Input",{staticStyle:{width:"150px","margin-right":"10px"},attrs:{clearable:""},model:{value:e.vueName,callback:function(t){e.vueName=t},expression:"vueName"}})],1),a("span",[e._v("表单显示：")]),a("Select",{staticStyle:{width:"150px","margin-right":"10px"},model:{value:e.rowNum,callback:function(t){e.rowNum=t},expression:"rowNum"}},[a("Option",{attrs:{value:"1"}},[e._v("一行一列")]),a("Option",{attrs:{value:"2"}},[e._v("一行两列")]),a("Option",{attrs:{value:"3"}},[e._v("一行三列")]),a("Option",{attrs:{value:"4"}},[e._v("一行四列")])],1),a("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:e.add}},[e._v("添加字段")]),a("Button",{attrs:{type:"warning",icon:"ios-construct"},on:{click:function(t){e.entityModal=!0}}},[e._v("读取字段")]),a("Button",{attrs:{loading:e.loading,type:"success",icon:"md-send"},on:{click:e.generate}},[e._v("生成代码")]),a("Button",{attrs:{icon:"md-trash"},on:{click:e.clear}},[e._v("清空全部")])],1),a("Row",[a("Alert",{attrs:{"show-icon":""}},[e._v(" 将生成的代码复制粘贴至Snail前端新建的空白组件中，再做少许修改并自行调通接口即可 "),a("span",{staticClass:"preview",on:{click:e.preview}},[e._v("增删改表格预览")])])],1),a("Row",[a("Table",{ref:"table",attrs:{border:"",columns:e.columns,data:e.data},scopedSlots:e._u([{key:"field",fn:function(t){var r=t.row;return[a("Input",{on:{"on-blur":function(t){return e.changeField(r,t)}},model:{value:r.field,callback:function(t){e.$set(r,"field",t)},expression:"row.field"}})]}},{key:"name",fn:function(t){var r=t.row;return[a("Input",{on:{"on-blur":function(t){return e.changeName(r,t)}},model:{value:r.name,callback:function(t){e.$set(r,"name",t)},expression:"row.name"}})]}},{key:"tableShow",fn:function(t){var r=t.row;return[a("i-switch",{on:{"on-change":function(t){return e.changeTableShow(r,t)}},model:{value:r.tableShow,callback:function(t){e.$set(r,"tableShow",t)},expression:"row.tableShow"}},[a("span",{attrs:{slot:"open"},slot:"open"},[e._v("开")]),a("span",{attrs:{slot:"close"},slot:"close"},[e._v("关")])])]}},{key:"editable",fn:function(t){var r=t.row;return[a("i-switch",{on:{"on-change":function(t){return e.changeEditable(r,t)}},model:{value:r.editable,callback:function(t){e.$set(r,"editable",t)},expression:"row.editable"}},[a("span",{attrs:{slot:"open"},slot:"open"},[e._v("开")]),a("span",{attrs:{slot:"close"},slot:"close"},[e._v("关")])])]}},{key:"type",fn:function(t){var r=t.row;return[a("Select",{attrs:{disabled:!r.editable,transfer:""},on:{"on-change":function(t){return e.changeType(r,t)}},model:{value:r.type,callback:function(t){e.$set(r,"type",t)},expression:"row.type"}},[a("Option",{attrs:{value:"text"}},[e._v("文本输入框")]),a("Option",{attrs:{value:"textarea"}},[e._v("多行文本输入框")]),a("Option",{attrs:{value:"select"}},[e._v("选择下拉框")]),a("Option",{attrs:{value:"number"}},[e._v("数字输入框")]),a("Option",{attrs:{value:"dict"}},[e._v("数据字典选择组件")]),a("Option",{attrs:{value:"customList"}},[e._v("自定义列表选择组件")]),a("Option",{attrs:{value:"date"}},[e._v("日期选择器")]),a("Option",{attrs:{value:"datetime"}},[e._v("日期时间选择器")]),a("Option",{attrs:{value:"daterange"}},[e._v("日期范围选择器")]),a("Option",{attrs:{value:"upload"}},[e._v("图片上传输入组件")]),a("Option",{attrs:{value:"uploadThumb"}},[e._v("图片上传缩略图组件")]),a("Option",{attrs:{value:"switch"}},[e._v("Switch开关")]),a("Option",{attrs:{value:"radio"}},[e._v("Radio单选框")]),a("Option",{attrs:{value:"time"}},[e._v("时间选择器")]),a("Option",{attrs:{value:"area"}},[e._v("省市县级联")]),a("Option",{attrs:{value:"slider"}},[e._v("Slider滑块")]),a("Option",{attrs:{value:"quill"}},[e._v("富文本组件Quill")]),a("Option",{attrs:{value:"password"}},[e._v("密码强度提示输入框")])],1)]}},{key:"validate",fn:function(t){var r=t.row;return[a("i-switch",{attrs:{disabled:!r.editable},on:{"on-change":function(t){return e.changeValidate(r,t)}},model:{value:r.validate,callback:function(t){e.$set(r,"validate",t)},expression:"row.validate"}},[a("span",{attrs:{slot:"open"},slot:"open"},[e._v("是")]),a("span",{attrs:{slot:"close"},slot:"close"},[e._v("否")])])]}},{key:"searchable",fn:function(t){var r=t.row;return[a("i-switch",{on:{"on-change":function(t){return e.changeSearchable(r,t)}},model:{value:r.searchable,callback:function(t){e.$set(r,"searchable",t)},expression:"row.searchable"}},[a("span",{attrs:{slot:"open"},slot:"open"},[e._v("开")]),a("span",{attrs:{slot:"close"},slot:"close"},[e._v("关")])])]}},{key:"searchType",fn:function(t){var r=t.row;return[a("Select",{attrs:{disabled:!r.searchable,transfer:""},on:{"on-change":function(t){return e.changeSearchType(r,t)}},model:{value:r.searchType,callback:function(t){e.$set(r,"searchType",t)},expression:"row.searchType"}},[a("Option",{attrs:{value:"text"}},[e._v("文本输入框")]),a("Option",{attrs:{value:"select"}},[e._v("选择下拉框")]),a("Option",{attrs:{value:"dict"}},[e._v("数据字典选择组件")]),a("Option",{attrs:{value:"customList"}},[e._v("自定义列表选择组件")]),a("Option",{attrs:{value:"daterange",disabled:e.daterangeSearch}},[e._v("日期范围选择器")]),a("Option",{attrs:{value:"date"}},[e._v("日期选择器")]),a("Option",{attrs:{value:"area"}},[e._v("省市县级联")])],1)]}},{key:"sortable",fn:function(t){var r=t.row;return[a("i-switch",{on:{"on-change":function(t){return e.changeSortable(r,t)}},model:{value:r.sortable,callback:function(t){e.$set(r,"sortable",t)},expression:"row.sortable"}},[a("span",{attrs:{slot:"open"},slot:"open"},[e._v("开")]),a("span",{attrs:{slot:"close"},slot:"close"},[e._v("关")])])]}},{key:"action",fn:function(t){var r=t.row;return[a("a",{on:{click:function(t){return e.edit(r)}}},[e._v("编辑")]),a("Divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(t){return e.remove(r)}}},[e._v("删除")])]}}])})],1)],1),a("Modal",{attrs:{title:e.modalTitle,"mask-closable":!1,width:750},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[a("Form",{ref:"form",attrs:{model:e.form,"label-width":100,rules:e.formValidate,inline:""}},[a("FormItem",{attrs:{label:"字段英文名",prop:"field"}},[a("Tooltip",{attrs:{placement:"right",content:"与后端实体字段匹配"}},[a("Input",{staticStyle:{width:"245px"},model:{value:e.form.field,callback:function(t){e.$set(e.form,"field",t)},expression:"form.field"}})],1)],1),a("FormItem",{attrs:{label:"字段中文名",prop:"name"}},[a("Input",{staticStyle:{width:"245px"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("FormItem",{staticStyle:{width:"345px"},attrs:{label:"表格中显示",prop:"tableShow"}},[a("i-switch",{model:{value:e.form.tableShow,callback:function(t){e.$set(e.form,"tableShow",t)},expression:"form.tableShow"}},[a("span",{attrs:{slot:"open"},slot:"open"},[e._v("开")]),a("span",{attrs:{slot:"close"},slot:"close"},[e._v("关")])])],1),a("FormItem",{staticStyle:{width:"345px"},attrs:{label:"可添加编辑",prop:"editable"}},[a("i-switch",{model:{value:e.form.editable,callback:function(t){e.$set(e.form,"editable",t)},expression:"form.editable"}},[a("span",{attrs:{slot:"open"},slot:"open"},[e._v("开")]),a("span",{attrs:{slot:"close"},slot:"close"},[e._v("关")])])],1),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:e.form.editable,expression:"form.editable"}],attrs:{label:"字段表单类型",prop:"type"}},[a("Select",{staticStyle:{width:"245px"},attrs:{filterable:""},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("Option",{attrs:{value:"text"}},[e._v("文本输入框")]),a("Option",{attrs:{value:"textarea"}},[e._v("多行文本输入框")]),a("Option",{attrs:{value:"select"}},[e._v("选择下拉框")]),a("Option",{attrs:{value:"number"}},[e._v("数字输入框")]),a("Option",{attrs:{value:"dict"}},[e._v("数据字典选择组件")]),a("Option",{attrs:{value:"customList"}},[e._v("自定义列表选择组件")]),a("Option",{attrs:{value:"date"}},[e._v("日期选择器")]),a("Option",{attrs:{value:"datetime"}},[e._v("日期时间选择器")]),a("Option",{attrs:{value:"daterange"}},[e._v("日期范围选择器")]),a("Option",{attrs:{value:"upload"}},[e._v("图片上传输入组件")]),a("Option",{attrs:{value:"uploadThumb"}},[e._v("图片上传缩略图组件")]),a("Option",{attrs:{value:"switch"}},[e._v("Switch开关")]),a("Option",{attrs:{value:"radio"}},[e._v("Radio单选框")]),a("Option",{attrs:{value:"time"}},[e._v("时间选择器")]),a("Option",{attrs:{value:"area"}},[e._v("省市县级联")]),a("Option",{attrs:{value:"slider"}},[e._v("Slider滑块")]),a("Option",{attrs:{value:"quill"}},[e._v("富文本组件Quill")]),a("Option",{attrs:{value:"password"}},[e._v("密码强度提示输入框")])],1)],1),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:"dict"==e.form.type,expression:"form.type == 'dict'"}],attrs:{label:"字典类型",prop:"dictType"}},[a("customList",{staticStyle:{width:"245px"},attrs:{filterable:"",url:"/dict/getAll",valueBind:"type",description:"type"},model:{value:e.form.dictType,callback:function(t){e.$set(e.form,"dictType",t)},expression:"form.dictType"}})],1),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:"customList"==e.form.type,expression:"form.type == 'customList'"}],attrs:{label:"自定义URL",prop:"customUrl"}},[a("Input",{staticStyle:{width:"245px"},attrs:{placeholder:"输入自定义选择组件url属性"},model:{value:e.form.customUrl,callback:function(t){e.$set(e.form,"customUrl",t)},expression:"form.customUrl"}})],1),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:"area"==e.form.type,expression:"form.type == 'area'"}],attrs:{label:"显示级别",prop:"level"}},[a("Select",{staticStyle:{width:"245px"},model:{value:e.form.level,callback:function(t){e.$set(e.form,"level",t)},expression:"form.level"}},[a("Option",{attrs:{value:"0"}},[e._v("仅显示省")]),a("Option",{attrs:{value:"1"}},[e._v("显示省和县")]),a("Option",{attrs:{value:"2"}},[e._v("显示省市县")])],1)],1),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:e.form.editable,expression:"form.editable"}],staticStyle:{width:"345px"},attrs:{label:"是否必填",prop:"validate"}},[a("i-switch",{model:{value:e.form.validate,callback:function(t){e.$set(e.form,"validate",t)},expression:"form.validate"}},[a("span",{attrs:{slot:"open"},slot:"open"},[e._v("是")]),a("span",{attrs:{slot:"close"},slot:"close"},[e._v("否")])])],1),a("FormItem",{staticStyle:{width:"345px"},attrs:{label:"可搜索",prop:"searchable"}},[a("i-switch",{model:{value:e.form.searchable,callback:function(t){e.$set(e.form,"searchable",t)},expression:"form.searchable"}},[a("span",{attrs:{slot:"open"},slot:"open"},[e._v("开")]),a("span",{attrs:{slot:"close"},slot:"close"},[e._v("关")])])],1),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:e.form.searchable,expression:"form.searchable"}],attrs:{label:"搜索框类型",prop:"searchType"}},[a("Select",{staticStyle:{width:"245px"},model:{value:e.form.searchType,callback:function(t){e.$set(e.form,"searchType",t)},expression:"form.searchType"}},[a("Option",{attrs:{value:"text"}},[e._v("文本输入框")]),a("Option",{attrs:{value:"select"}},[e._v("选择下拉框")]),a("Option",{attrs:{value:"dict"}},[e._v("数据字典选择组件")]),a("Option",{attrs:{value:"customList"}},[e._v("自定义列表选择组件")]),a("Option",{attrs:{value:"daterange"}},[e._v("日期范围选择器")]),a("Option",{attrs:{value:"date"}},[e._v("日期选择器")]),a("Option",{attrs:{value:"area"}},[e._v("省市县级联")])],1)],1),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:"dict"==e.form.searchType,expression:"form.searchType == 'dict'"}],attrs:{label:"字典类型",prop:"searchDictType"}},[a("customList",{staticStyle:{width:"245px"},attrs:{filterable:"",url:"/dict/getAll",valueBind:"type",description:"type"},model:{value:e.form.searchDictType,callback:function(t){e.$set(e.form,"searchDictType",t)},expression:"form.searchDictType"}})],1),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:"customList"==e.form.searchType,expression:"form.searchType == 'customList'"}],attrs:{label:"自定义URL",prop:"searchCustomUrl"}},[a("Input",{staticStyle:{width:"245px"},attrs:{placeholder:"输入自定义选择组件url属性"},model:{value:e.form.searchCustomUrl,callback:function(t){e.$set(e.form,"searchCustomUrl",t)},expression:"form.searchCustomUrl"}})],1),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:"area"==e.form.searchType,expression:"form.searchType == 'area'"}],attrs:{label:"显示级别",prop:"searchLevel"}},[a("Select",{staticStyle:{width:"245px"},model:{value:e.form.searchLevel,callback:function(t){e.$set(e.form,"searchLevel",t)},expression:"form.searchLevel"}},[a("Option",{attrs:{value:"0"}},[e._v("仅显示省")]),a("Option",{attrs:{value:"1"}},[e._v("显示省和县")]),a("Option",{attrs:{value:"2"}},[e._v("显示省市县")])],1)],1),a("FormItem",{staticStyle:{width:"345px"},attrs:{label:"可排序",prop:"sortable"}},[a("i-switch",{model:{value:e.form.sortable,callback:function(t){e.$set(e.form,"sortable",t)},expression:"form.sortable"}},[a("span",{attrs:{slot:"open"},slot:"open"},[e._v("开")]),a("span",{attrs:{slot:"close"},slot:"close"},[e._v("关")])])],1),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:e.form.sortable,expression:"form.sortable"}],staticStyle:{width:"345px"},attrs:{label:"默认排序",prop:"defaultSort"}},[a("i-switch",{model:{value:e.form.defaultSort,callback:function(t){e.$set(e.form,"defaultSort",t)},expression:"form.defaultSort"}},[a("span",{attrs:{slot:"open"},slot:"open"},[e._v("开")]),a("span",{attrs:{slot:"close"},slot:"close"},[e._v("关")])])],1),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:e.form.defaultSort&&e.form.sortable,expression:"form.defaultSort && form.sortable"}],attrs:{label:"默认排序方式",prop:"defaultSortType"}},[a("Select",{staticStyle:{width:"245px"},model:{value:e.form.defaultSortType,callback:function(t){e.$set(e.form,"defaultSortType",t)},expression:"form.defaultSortType"}},[a("Option",{attrs:{value:"desc"}},[e._v("倒序(大到小)")]),a("Option",{attrs:{value:"asc"}},[e._v("正序(小到大)")])],1)],1),a("FormItem",{staticStyle:{width:"345px"},attrs:{label:"排序值",prop:"sortOrder"}},[a("InputNumber",{model:{value:e.form.sortOrder,callback:function(t){e.$set(e.form,"sortOrder",t)},expression:"form.sortOrder"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text"},on:{click:function(t){e.modalVisible=!1}}},[e._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("提交")])],1)],1),a("Modal",{attrs:{title:"生成代码",width:1e3,fullscreen:e.full,styles:e.full?{}:e.modalStyle},model:{value:e.codeModal,callback:function(t){e.codeModal=t},expression:"codeModal"}},[a("RadioGroup",{staticStyle:{"margin-bottom":"15px"},on:{"on-change":e.changeRadio},model:{value:e.resultType,callback:function(t){e.resultType=t},expression:"resultType"}},[a("Radio",{attrs:{label:"drawerApi",border:""}},[e._v("抽屉组件(含API)")]),a("Radio",{attrs:{label:"drawer",border:""}},[e._v("抽屉组件(模拟请求)")]),a("Radio",{attrs:{label:"singleApi",border:""}},[e._v("弹框(含API)")]),a("Radio",{attrs:{label:"single",border:""}},[e._v("弹框(模拟请求)")]),a("Radio",{attrs:{label:"componentApi",border:""}},[e._v("动态组件(含API)")]),a("Radio",{attrs:{label:"component",border:""}},[e._v("动态组件(模拟请求)")])],1),a("Tabs",{attrs:{type:"card"},on:{"on-click":e.changeCode},model:{value:e.tabName,callback:function(t){e.tabName=t},expression:"tabName"}},[a("TabPane",{attrs:{name:"index.vue",label:"index.vue"}}),"drawerApi"==e.resultType||"drawer"==e.resultType?a("TabPane",{attrs:{name:"addEdit.vue",label:"addEdit.vue"}}):e._e(),"componentApi"==e.resultType||"component"==e.resultType?a("TabPane",{attrs:{name:"add.vue",label:"add.vue"}}):e._e(),"componentApi"==e.resultType||"component"==e.resultType?a("TabPane",{attrs:{name:"edit.vue",label:"edit.vue"}}):e._e(),"drawerApi"==e.resultType||"componentApi"==e.resultType||"singleApi"==e.resultType?a("TabPane",{attrs:{name:"api.js",label:"api.js"}}):e._e()],1),e.full?e._e():a("Input",{staticStyle:{"max-height":"60vh",overflow:"auto"},attrs:{type:"textarea",autosize:""},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),e.full?a("Input",{attrs:{rows:32,type:"textarea"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}):e._e(),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{icon:"md-expand"},on:{click:function(t){e.full=!e.full}}},[e._v("全屏开/关")]),a("Button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.code,expression:"code",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}],attrs:{type:"primary",icon:"md-copy"}},[e._v("复制代码")])],1)],1),a("Modal",{attrs:{title:"自动读取字段",width:700,fullscreen:e.fullEntity},model:{value:e.entityModal,callback:function(t){e.entityModal=t},expression:"entityModal"}},[a("Alert",{attrs:{"show-icon":""}},[e._v("输入实体类的引用路径，将自动读取其字段生成所需JSON配置数据，免去手动配置添加字段")]),a("Form",{ref:"entityForm",attrs:{model:e.entityForm,"label-width":130,rules:e.entityFormValidate}},[a("FormItem",{attrs:{label:"实体类引用路径",prop:"path"}},[a("Row",{attrs:{type:"flex",justify:"space-between"}},[a("Input",{staticStyle:{width:"410px"},attrs:{placeholder:"例如：cn.snail.snail.modules.base.entity.User",clearable:""},model:{value:e.entityForm.path,callback:function(t){e.$set(e.entityForm,"path",t)},expression:"entityForm.path"}}),a("Button",{attrs:{type:"warning",icon:"md-play"},on:{click:e.generateEntityData}},[e._v("读取字段")])],1)],1)],1),e.fullEntity?e._e():a("Input",{staticStyle:{"max-height":"50vh",overflow:"auto"},attrs:{type:"textarea",autosize:"",placeholder:"生成结果"},model:{value:e.entityData,callback:function(t){e.entityData=t},expression:"entityData"}}),e.fullEntity?a("Input",{attrs:{rows:32,type:"textarea"},model:{value:e.entityData,callback:function(t){e.entityData=t},expression:"entityData"}}):e._e(),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{icon:"md-expand"},on:{click:function(t){e.fullEntity=!e.fullEntity}}},[e._v("全屏开/关")]),a("Button",{attrs:{type:"primary",icon:"md-checkmark-circle-outline"},on:{click:e.submitEntityData}},[e._v("确认更新字段值")])],1)],1)],1)},l=[],s=a("365c"),o=a("f24b"),i={name:"table-generator",components:{customList:o["default"]},data:function(){return{resultType:"drawerApi",tabName:"index.vue",modalStyle:{top:"30px"},entityModal:!1,fullEntity:!1,entityData:"",entityForm:{path:""},loading:!1,code:"",vueName:"",rowNum:"1",full:!1,codeModal:!1,modalVisible:!1,modalType:0,modalTitle:"",form:{sortOrder:0,field:"",name:"",dictType:"",customUrl:"",searchDictType:"",searchCustomUrl:"",level:"2",tableShow:!0,editable:!0,type:"text",searchType:"text",searchLevel:"2",validate:!0,searchable:!1,sortable:!1,defaultSort:!1,defaultSortType:"desc"},formValidate:{field:[{required:!0,message:"不能为空",trigger:"change"}],name:[{required:!0,message:"不能为空",trigger:"change"}]},entityFormValidate:{path:[{required:!0,message:"不能为空",trigger:"change"}]},columns:[{title:"排序",key:"sortOrder",sortType:"asc",sortable:!0,align:"center",minWidth:90},{title:"字段英文名",slot:"field",minWidth:150},{title:"字段中文名",slot:"name",minWidth:150},{title:"表格中显示",slot:"tableShow",align:"center",minWidth:110},{title:"可添加编辑",slot:"editable",align:"center",minWidth:110},{title:"表单类型",slot:"type",minWidth:200},{title:"是否必填",slot:"validate",align:"center",minWidth:100},{title:"可搜索",slot:"searchable",align:"center",minWidth:100},{title:"搜索框类型",slot:"searchType",minWidth:200},{title:"可排序",slot:"sortable",align:"center",minWidth:80},{title:"操作",slot:"action",align:"center",fixed:"right",width:120}],data:[],daterangeSearch:!1,result:{}}},methods:{init:function(){var e=this.getStore("tableData"),t=this.getStore("tableVueName"),a=this.getStore("tableRowNum"),r=this.getStore("tableDaterangeSearch");e&&"undefined"!=e&&(this.data=JSON.parse(e)),t&&"undefined"!=t&&(this.vueName=t),a&&"undefined"!=a&&(this.rowNum=a),r&&"undefined"!=r&&(this.daterangeSearch="true"==r)},generateEntityData:function(){var e=this;this.$refs.entityForm.validate((function(t){t&&Object(s["Pb"])(e.entityForm.path).then((function(t){t.success&&(e.entityData=t.result)}))}))},submitEntityData:function(){if(this.entityData)try{var e=JSON.parse(this.entityData);this.data=e.data,this.entityModal=!1}catch(t){this.$Message.error("请确保JSON数据格式正确")}else this.$Message.warning("请先输入实体类引用路径生成JSON数据")},preview:function(){this.$router.push({name:"search-table"})},changeField:function(e,t){for(var a in e)null==e[a]&&(e[a]="");var r=JSON.stringify(e),l=JSON.parse(r);l.field=t.target.value,this.data.splice(e._index,1,l),this.save()},changeName:function(e,t){for(var a in e)null==e[a]&&(e[a]="");var r=JSON.stringify(e),l=JSON.parse(r);l.name=t.target.value,this.data.splice(e._index,1,l),this.save()},changeTableShow:function(e,t){for(var a in e)null==e[a]&&(e[a]="");var r=JSON.stringify(e),l=JSON.parse(r);l.tableShow=t,this.data.splice(e._index,1,l),this.save()},changeType:function(e,t){for(var a in e)null==e[a]&&(e[a]="");var r=JSON.stringify(e),l=JSON.parse(r);l.type=t,this.data.splice(e._index,1,l),this.save()},changeEditable:function(e,t){for(var a in e)null==e[a]&&(e[a]="");var r=JSON.stringify(e),l=JSON.parse(r);l.editable=t,this.data.splice(e._index,1,l),this.save()},changeValidate:function(e,t){for(var a in e)null==e[a]&&(e[a]="");var r=JSON.stringify(e),l=JSON.parse(r);l.validate=t,this.data.splice(e._index,1,l),this.save()},changeSearchable:function(e,t){for(var a in e)null==e[a]&&(e[a]="");var r=JSON.stringify(e),l=JSON.parse(r);l.searchable=t,this.data.splice(e._index,1,l),this.save()},changeSearchType:function(e,t){for(var a in e)null==e[a]&&(e[a]="");var r=JSON.stringify(e),l=JSON.parse(r);l.searchType=t,this.data.splice(e._index,1,l),this.daterangeSearch&&"daterange"!=t?this.daterangeSearch=!1:"daterange"==t&&(this.daterangeSearch=!0),this.save()},changeSortable:function(e,t){for(var a in e)null==e[a]&&(e[a]="");var r=JSON.stringify(e),l=JSON.parse(r);l.sortable=t,this.data.splice(e._index,1,l),this.save()},handleSubmit:function(){var e=this;this.$refs.form.validate((function(t){if(t){var a=e.form;for(var r in a)null==a[r]&&(a[r]="");var l=JSON.stringify(a),s=JSON.parse(l);if(e.daterangeSearch&&"daterange"==s.searchType)return void e.$Message.warning("已设定了日期范围搜索的字段，日期范围搜索暂仅支持设定1个");0==e.modalType?(e.data.push(s),e.data=e.data):e.data.splice(a._index,1,s),"daterange"==s.searchType&&(e.daterangeSearch=!0),e.save(),e.modalVisible=!1}}))},add:function(){this.modalType=0,this.modalTitle="添加字段",this.$refs.form.resetFields(),this.form.sortOrder=this.data.length+1,this.modalVisible=!0},edit:function(e){for(var t in this.modalType=1,this.modalTitle="编辑字段",e)null==e[t]&&(e[t]="");var a=JSON.stringify(e),r=JSON.parse(a);this.form=r,this.modalVisible=!0},remove:function(e){this.data.splice(e._index,1),this.save(),this.$Message.success("操作成功")},clear:function(){var e=this;this.$Modal.confirm({title:"确认清空",content:"您确认要清空所有数据 ?",onOk:function(){e.data=[],e.vueName="",e.rowNum="1",e.daterangeSearch=!1,e.save(),e.$Message.success("操作成功")}})},generate:function(){var e=this;if(this.vueName){var t=0;this.data.forEach((function(e){e.defaultSort&&t++})),t>1?this.$Message.warning("默认排序字段仅能设置一个，请勿设置多个"):(this.loading=!0,Object(s["wb"])(this.vueName,this.rowNum,this.data).then((function(t){e.loading=!1,t.success&&(e.result=t.result,e.changeCode(),e.codeModal=!0,e.save())})))}else this.$Message.warning("请输入组件名")},changeRadio:function(){this.tabName="index.vue",this.changeCode()},changeCode:function(){"drawerApi"==this.resultType&&("index.vue"==this.tabName&&(this.code=this.result.drawerApi),"addEdit.vue"==this.tabName&&(this.code=this.result.addEditApi),"api.js"==this.tabName&&(this.code=this.result.api)),"drawer"==this.resultType&&("index.vue"==this.tabName&&(this.code=this.result.drawer),"addEdit.vue"==this.tabName&&(this.code=this.result.addEdit)),"componentApi"==this.resultType&&("index.vue"==this.tabName&&(this.code=this.result.componentApi),"add.vue"==this.tabName&&(this.code=this.result.addApi),"edit.vue"==this.tabName&&(this.code=this.result.editApi),"api.js"==this.tabName&&(this.code=this.result.api)),"component"==this.resultType&&("index.vue"==this.tabName&&(this.code=this.result.component),"add.vue"==this.tabName&&(this.code=this.result.add),"edit.vue"==this.tabName&&(this.code=this.result.edit)),"singleApi"==this.resultType&&("index.vue"==this.tabName&&(this.code=this.result.singleApi),"api.js"==this.tabName&&(this.code=this.result.api)),"single"==this.resultType&&(this.code=this.result.single)},onCopy:function(){this.$Message.success("复制成功")},onError:function(){this.$Message.warning("复制失败，请手动复制")},save:function(){this.setStore("tableData",JSON.stringify(this.data)),this.setStore("tableVueName",this.vueName),this.setStore("tableRowNum",this.rowNum),this.setStore("tableDaterangeSearch",this.daterangeSearch)}},created:function(){this.init()}},n=i,c=(a("7c7e"),a("2877")),u=Object(c["a"])(n,r,l,!1,null,null,null);t["default"]=u.exports},"7c7e":function(e,t,a){"use strict";a("f4c0")},f24b:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.description?e._e():a("Select",{attrs:{loading:e.loading,placeholder:e.placeholder,multiple:e.multiple,disabled:e.disabled,filterable:e.filterable,transfer:e.transfer,clearable:e.clearable,placement:e.placement,"not-found-text":e.notFoundText,"label-in-value":e.labelInValue,"transfer-class-name":e.transferClassName,prefix:e.prefix,"max-tag-count":e.maxTagCount,"max-tag-placeholder":e.maxTagPlaceholder},on:{"on-change":e.handleChange,"on-query-change":e.handleQueryChange,"on-clear":e.handleClear,"on-open-change":e.handleOpenChange,"on-select":e.handleSelect},model:{value:e.currentValue,callback:function(t){e.currentValue=t},expression:"currentValue"}},e._l(e.dictData,(function(t,r){return a("Option",{key:r,attrs:{value:t.value}},[e._v(e._s(t.title))])})),1),e.description?a("Select",{attrs:{loading:e.loading,placeholder:e.placeholder,multiple:e.multiple,disabled:e.disabled,filterable:e.filterable,transfer:e.transfer,clearable:e.clearable,placement:e.placement,"not-found-text":e.notFoundText,"label-in-value":e.labelInValue,"transfer-class-name":e.transferClassName,prefix:e.prefix,"max-tag-count":e.maxTagCount,"max-tag-placeholder":e.maxTagPlaceholder},on:{"on-change":e.handleChange,"on-query-change":e.handleQueryChange,"on-clear":e.handleClear,"on-open-change":e.handleOpenChange,"on-select":e.handleSelect},model:{value:e.currentValue,callback:function(t){e.currentValue=t},expression:"currentValue"}},e._l(e.dictData,(function(t,r){return a("Option",{key:r,attrs:{value:t.value,label:t.title}},[a("span",{staticStyle:{"margin-right":"10px"}},[e._v(e._s(t.title))]),a("span",{staticStyle:{color:"#ccc"}},[e._v(e._s(t.description))])])})),1):e._e()],1)},l=[],s=a("cebe"),o=a.n(s),i={name:"customList",props:{value:"",url:String,preUrl:{type:String,default:"/snail"},method:{type:String,default:"get"},auth:{type:Boolean,default:!0},valueBind:{type:String,default:"id"},title:{type:String,default:"title"},description:{type:String,default:"description"},placeholder:{type:String,default:"请选择"},placement:{type:String,default:"bottom-start"},multiple:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},filterable:{type:Boolean,default:!1},transfer:{type:Boolean,default:!1},notFoundText:{type:String,default:"无匹配数据"},labelInValue:{type:Boolean,default:!1},transferClassName:String,prefix:String,maxTagCount:Number,maxTagPlaceholder:Function,clearable:{type:Boolean,default:!0}},data:function(){return{currentValue:null,dictData:[],loading:!1}},methods:{getData:function(e){var t=this;this.loading=!0;var a="";this.auth&&(a=window.localStorage.getItem("accessToken"));var r=this.preUrl+this.url;o()({method:this.method,url:r,headers:{accessToken:a}}).then((function(e){t.loading=!1,e.success&&(t.valueBind&&e.result.forEach((function(e){e.value=e[t.valueBind]})),t.title&&e.result.forEach((function(e){e.title=e[t.title]})),t.description&&e.result.forEach((function(e){e.description=e[t.description]})),t.dictData=e.result)}))},handleChange:function(e){this.$emit("input",e),this.$emit("on-change",e)},handleQueryChange:function(e){this.$emit("on-query-change",e)},handleClear:function(){this.$emit("on-clear","")},handleOpenChange:function(e){this.$emit("on-open-change",e)},handleSelect:function(e){this.$emit("on-select",e)},setCurrentValue:function(e){e!==this.currentValue&&(this.currentValue=e,this.$emit("on-change",this.currentValue))}},watch:{value:function(e){this.setCurrentValue(e)},url:function(e){this.getData(e)}},mounted:function(){this.getData(this.url)}},n=i,c=a("2877"),u=Object(c["a"])(n,r,l,!1,null,null,null);t["default"]=u.exports},f4c0:function(e,t,a){}}]);