(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3d8ea2dd"],{"02d5":function(t,e,n){},6420:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search"},[n("Card",[n("Row",{staticClass:"operation"},[n("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:t.add}},[t._v("添加子类别")]),n("Button",{attrs:{icon:"md-add"},on:{click:t.addRoot}},[t._v("添加一级类别")]),n("Button",{attrs:{icon:"md-trash"},on:{click:t.delAll}},[t._v("批量删除")]),n("Button",{attrs:{icon:"md-refresh"},on:{click:t.getParentList}},[t._v("刷新")]),n("i-switch",{staticStyle:{"margin-left":"5px"},attrs:{size:"large"},model:{value:t.strict,callback:function(e){t.strict=e},expression:"strict"}},[n("span",{attrs:{slot:"open"},slot:"open"},[t._v("级联")]),n("span",{attrs:{slot:"close"},slot:"close"},[t._v("单选")])])],1),n("Row",{attrs:{type:"flex",justify:"start",gutter:16}},[n("Col",{attrs:{sm:8,md:8,lg:8,xl:6}},[n("Alert",{attrs:{"show-icon":""}},[t._v(" 当前选择编辑： "),n("span",{staticClass:"select-title"},[t._v(t._s(t.editTitle))]),t.form.id?n("a",{staticClass:"select-clear",on:{click:t.cancelEdit}},[t._v("取消选择")]):t._e()]),n("Input",{attrs:{suffix:"ios-search",placeholder:"输入节点名搜索",clearable:""},on:{"on-change":t.search},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}}),n("div",{staticClass:"tree-bar"},[n("Tree",{ref:"tree",attrs:{data:t.data,"load-data":t.loadData,render:t.renderContent,"show-checkbox":"","check-strictly":!t.strict},on:{"on-check-change":t.changeSelect,"on-select-change":t.selectTree}}),t.loading?n("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)],1),n("Col",{attrs:{sm:16,md:16,lg:16,xl:9}},[n("Form",{ref:"form",attrs:{model:t.form,"label-width":85,rules:t.formValidate}},[n("FormItem",{attrs:{label:"上级节点",prop:"parentTitle"}},[n("div",{staticStyle:{display:"flex"}},[n("Input",{staticStyle:{"margin-right":"10px"},attrs:{readonly:""},model:{value:t.form.parentTitle,callback:function(e){t.$set(t.form,"parentTitle",e)},expression:"form.parentTitle"}}),n("Poptip",{attrs:{transfer:"",trigger:"click",placement:"right-start",title:"选择上级节点",width:"250"}},[n("Button",{attrs:{icon:"md-list"}},[t._v("选择分类")]),n("div",{staticStyle:{position:"relative","min-height":"5vh"},attrs:{slot:"content"},slot:"content"},[n("Tree",{attrs:{data:t.dataEdit,"load-data":t.loadData},on:{"on-select-change":t.selectTreeEdit}}),t.loadingEdit?n("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)],1)],1)]),n("FormItem",{attrs:{label:"节点类型",prop:"type"}},[n("Select",{attrs:{placeholder:"请选择",clearable:""},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[n("Option",{attrs:{value:"0"}},[t._v("分组")]),n("Option",{attrs:{value:"1"}},[t._v("类别")])],1)],1),n("FormItem",{attrs:{label:"类别名称",prop:"title"}},[n("Input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),n("FormItem",{attrs:{label:"排序值",prop:"sortOrder"}},[n("Tooltip",{attrs:{trigger:"hover",placement:"right",content:"值越小越靠前，支持小数"}},[n("InputNumber",{attrs:{max:1e3,min:0},model:{value:t.form.sortOrder,callback:function(e){t.$set(t.form,"sortOrder",e)},expression:"form.sortOrder"}})],1)],1),n("FormItem",{attrs:{label:"是否启用",prop:"status"}},[n("i-switch",{attrs:{size:"large","true-value":0,"false-value":-1},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[n("span",{attrs:{slot:"open"},slot:"open"},[t._v("启用")]),n("span",{attrs:{slot:"close"},slot:"close"},[t._v("禁用")])])],1),n("FormItem",{staticClass:"br"},[n("Button",{attrs:{loading:t.submitLoading,type:"primary",icon:"ios-create-outline"},on:{click:t.submitEdit}},[t._v("修改并保存")]),n("Button",{on:{click:t.handleReset}},[t._v("重置")])],1)],1)],1)],1)],1),n("Modal",{attrs:{title:t.modalTitle,"mask-closable":!1,width:500},model:{value:t.modalVisible,callback:function(e){t.modalVisible=e},expression:"modalVisible"}},[n("Form",{ref:"formAdd",attrs:{model:t.formAdd,"label-width":85,rules:t.formValidate}},[t.showParent?n("div",[n("FormItem",{attrs:{label:"上级节点："}},[t._v(t._s(t.form.title))])],1):t._e(),n("FormItem",{attrs:{label:"节点类型",prop:"type"}},[n("Select",{attrs:{placeholder:"请选择",clearable:""},model:{value:t.formAdd.type,callback:function(e){t.$set(t.formAdd,"type",e)},expression:"formAdd.type"}},[n("Option",{attrs:{value:"0"}},[t._v("分组")]),n("Option",{attrs:{value:"1"}},[t._v("类别")])],1)],1),n("FormItem",{attrs:{label:"类别名称",prop:"title"}},[n("Input",{model:{value:t.formAdd.title,callback:function(e){t.$set(t.formAdd,"title",e)},expression:"formAdd.title"}})],1),n("FormItem",{attrs:{label:"排序值",prop:"sortOrder"}},[n("Tooltip",{attrs:{trigger:"hover",placement:"right",content:"值越小越靠前，支持小数"}},[n("InputNumber",{attrs:{max:1e3,min:0},model:{value:t.formAdd.sortOrder,callback:function(e){t.$set(t.formAdd,"sortOrder",e)},expression:"formAdd.sortOrder"}})],1)],1),n("FormItem",{attrs:{label:"是否启用",prop:"status"}},[n("i-switch",{attrs:{size:"large","true-value":0,"false-value":-1},model:{value:t.formAdd.status,callback:function(e){t.$set(t.formAdd,"status",e)},expression:"formAdd.status"}},[n("span",{attrs:{slot:"open"},slot:"open"},[t._v("启用")]),n("span",{attrs:{slot:"close"},slot:"close"},[t._v("禁用")])])],1)],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"text"},on:{click:t.cancelAdd}},[t._v("取消")]),n("Button",{attrs:{type:"primary",loading:t.submitLoading},on:{click:t.submitAdd}},[t._v("提交")])],1)],1)],1)},i=[],o=n("81c1"),s={name:"category-manage",data:function(){return{strict:!0,loading:!0,loadingEdit:!0,modalVisible:!1,selectList:[],showParent:!1,modalTitle:"",editTitle:"",searchKey:"",form:{id:"",title:"",parentId:"",parentTitle:"",type:null,sortOrder:0,status:0,url:""},formAdd:{type:null},formValidate:{title:[{required:!0,message:"名称不能为空",trigger:"change"}],type:[{required:!0,message:"类型不能为空",trigger:"change"}],sortOrder:[{required:!0,type:"number",message:"排序值不能为空",trigger:"change"}]},submitLoading:!1,data:[],dataEdit:[]}},methods:{init:function(){this.getParentList(),this.getParentListEdit()},renderContent:function(t,e){e.root,e.node;var n=e.data,r="";return"0"==n.type?r="md-folder-open":"1"==n.type&&(r="ios-bookmark-outline"),t("span",[t("span",[t("Icon",{props:{type:r,size:"16"},style:{"margin-right":"8px","margin-bottom":"3px"}}),t("span",n.title)])])},getParentList:function(){var t=this;this.loading=!0,Object(o["N"])().then((function(e){t.loading=!1,e.success&&(e.result.forEach((function(t){t.isParent&&(t.loading=!1,t.children=[])})),t.data=e.result)}))},getParentListEdit:function(){var t=this;this.loadingEdit=!0,Object(o["N"])().then((function(e){if(t.loadingEdit=!1,e.success){e.result.forEach((function(t){t.isParent&&(t.loading=!1,t.children=[])}));var n={id:"0",title:"一级节点"};e.result.unshift(n),t.dataEdit=e.result}}))},loadData:function(t,e){Object(o["O"])(t.id).then((function(t){t.success&&(t.result.forEach((function(t){t.isParent&&(t.loading=!1,t.children=[])})),e(t.result))}))},search:function(){var t=this;this.searchKey?(this.loading=!0,Object(o["R"])({title:this.searchKey}).then((function(e){t.loading=!1,e.success&&(e.result.forEach((function(t){t.isParent&&(t.loading=!1,t.children=[])})),t.data=e.result)}))):this.getParentList()},selectTree:function(t){if(t.length>0){for(var e in t[0])null==t[0][e]&&(t[0][e]="");var n=JSON.stringify(t[0]),r=JSON.parse(n);r.type+="",this.form=r,this.editTitle=r.title}else this.cancelEdit()},cancelEdit:function(){var t=this.$refs.tree.getSelectedNodes()[0];t&&(t.selected=!1),this.$refs.form.resetFields(),this.form.id="",delete this.form.id,this.editTitle=""},selectTreeEdit:function(t){if(t){for(var e in t[0])null==t[0][e]&&(t[0][e]="");var n=JSON.stringify(t[0]),r=JSON.parse(n);this.form.parentId=r.id,this.form.parentTitle=r.title}},cancelAdd:function(){this.modalVisible=!1},handleReset:function(){this.$refs.form.resetFields(),this.form.status=0},submitEdit:function(){var t=this;this.$refs.form.validate((function(e){if(e){if(!t.form.id)return void t.$Message.warning("请先点击选择要修改的节点");t.submitLoading=!0,Object(o["u"])(t.form).then((function(e){t.submitLoading=!1,e.success&&(t.$Message.success("编辑成功"),t.init(),t.modalVisible=!1)}))}}))},submitAdd:function(){var t=this;this.$refs.formAdd.validate((function(e){e&&(t.submitLoading=!0,Object(o["a"])(t.formAdd).then((function(e){t.submitLoading=!1,e.success&&(t.$Message.success("添加成功"),t.init(),t.modalVisible=!1)})))}))},add:function(){""!=this.form.id&&null!=this.form.id?(this.modalTitle="添加子类别",this.showParent=!0,this.formAdd={parentId:this.form.id,sortOrder:0,status:0,type:null},this.modalVisible=!0):this.$Message.warning("请先点击选择一个节点")},addRoot:function(){this.modalTitle="添加一级类别",this.showParent=!1,this.formAdd={parentId:0,sortOrder:0,status:0,type:null},this.modalVisible=!0},changeSelect:function(t){this.selectList=t},delAll:function(){var t=this;this.selectList.length<=0?this.$Message.warning("您还未勾选要删除的数据"):this.$Modal.confirm({title:"确认删除",content:"您确认要删除所选的 "+this.selectList.length+" 条数据及其下级所有数据?",loading:!0,onOk:function(){var e="";t.selectList.forEach((function(t){e+=t.id+","})),e=e.substring(0,e.length-1),Object(o["l"])({ids:e}).then((function(e){t.$Modal.remove(),e.success&&(t.$Message.success("删除成功"),t.selectList=[],t.cancelEdit(),t.init())}))}})}},mounted:function(){this.init()}},c=s,a=(n("c33d"),n("2877")),u=Object(a["a"])(c,r,i,!1,null,null,null);e["default"]=u.exports},"81c1":function(t,e,n){"use strict";n.d(e,"x",(function(){return i})),n.d(e,"r",(function(){return o})),n.d(e,"y",(function(){return s})),n.d(e,"D",(function(){return c})),n.d(e,"F",(function(){return a})),n.d(e,"c",(function(){return u})),n.d(e,"s",(function(){return l})),n.d(e,"o",(function(){return d})),n.d(e,"J",(function(){return f})),n.d(e,"U",(function(){return m})),n.d(e,"X",(function(){return b})),n.d(e,"i",(function(){return p})),n.d(e,"K",(function(){return h})),n.d(e,"v",(function(){return g})),n.d(e,"w",(function(){return v})),n.d(e,"p",(function(){return O})),n.d(e,"L",(function(){return y})),n.d(e,"B",(function(){return j})),n.d(e,"I",(function(){return k})),n.d(e,"C",(function(){return P})),n.d(e,"G",(function(){return T})),n.d(e,"H",(function(){return I})),n.d(e,"V",(function(){return x})),n.d(e,"q",(function(){return _})),n.d(e,"j",(function(){return A})),n.d(e,"T",(function(){return B})),n.d(e,"t",(function(){return w})),n.d(e,"M",(function(){return E})),n.d(e,"k",(function(){return L})),n.d(e,"P",(function(){return $})),n.d(e,"Q",(function(){return C})),n.d(e,"z",(function(){return F})),n.d(e,"e",(function(){return S})),n.d(e,"f",(function(){return M})),n.d(e,"g",(function(){return N})),n.d(e,"n",(function(){return V})),n.d(e,"N",(function(){return R})),n.d(e,"O",(function(){return K})),n.d(e,"a",(function(){return z})),n.d(e,"u",(function(){return J})),n.d(e,"l",(function(){return q})),n.d(e,"R",(function(){return D})),n.d(e,"A",(function(){return H})),n.d(e,"d",(function(){return U})),n.d(e,"S",(function(){return G})),n.d(e,"h",(function(){return Q})),n.d(e,"m",(function(){return W})),n.d(e,"E",(function(){return X})),n.d(e,"b",(function(){return Y})),n.d(e,"W",(function(){return Z}));var r=n("7f80"),i="/snail/actModel/export/",o="/snail/actModel/deployByFile",s="/snail/actProcess/export",c="/snail/actProcess/getHighlightImg/",a=function(t){return Object(r["b"])("/actModel/getByCondition",t)},u=function(t){return Object(r["e"])("/actModel/add",t)},l=function(t,e){return Object(r["b"])("/actModel/deploy/".concat(t),e)},d=function(t){return Object(r["e"])("/actModel/delByIds",t)},f=function(t){return Object(r["b"])("/actProcess/getByCondition",t)},m=function(t){return Object(r["e"])("/actProcess/updateInfo",t)},b=function(t){return Object(r["e"])("/actProcess/updateStatus",t)},p=function(t,e){return Object(r["b"])("/actProcess/convertToModel/".concat(t),e)},h=function(t,e){return Object(r["b"])("/actProcess/getProcessNode/".concat(t),e)},g=function(t){return Object(r["e"])("/actProcess/editNodeUser",t)},v=function(t){return Object(r["e"])("/actProcess/editStartUser",t)},O=function(t){return Object(r["e"])("/actProcess/delByIds",t)},y=function(t){return Object(r["b"])("/actProcess/getRunningProcess",t)},j=function(t){return Object(r["b"])("/actProcess/getFinishedProcess",t)},k=function(t,e){return Object(r["b"])("/actProcess/getByKey/".concat(t),e)},P=function(t,e){return Object(r["b"])("/actProcess/getFirstNode/".concat(t),e)},T=function(t,e,n){return Object(r["b"])("/actProcess/getNextNode/".concat(t,"/").concat(e),n)},I=function(t,e){return Object(r["b"])("/actProcess/getNode/".concat(t),e)},x=function(t){return Object(r["e"])("/actProcess/updateInsStatus",t)},_=function(t){return Object(r["e"])("/actProcess/delInsByIds",t)},A=function(t){return Object(r["e"])("/actProcess/delHistoricInsByIds",t)},B=function(t){return Object(r["b"])("/actTask/todoList",t)},w=function(t){return Object(r["b"])("/actTask/doneList",t)},E=function(t,e){return Object(r["b"])("/actTask/historicFlow/".concat(t),e)},L=function(t){return Object(r["e"])("/actTask/delegate",t)},$=function(t){return Object(r["e"])("/actTask/pass",t)},C=function(t){return Object(r["e"])("/actTask/passAll",t)},F=function(t,e){return Object(r["b"])("/actTask/getBackList/".concat(t),e)},S=function(t){return Object(r["e"])("/actTask/back",t)},M=function(t){return Object(r["e"])("/actTask/backAll",t)},N=function(t){return Object(r["e"])("/actTask/backToTask",t)},V=function(t){return Object(r["e"])("/actTask/deleteHistoric",t)},R=function(t){return Object(r["b"])("/actCategory/getByParentId/0",t)},K=function(t,e){return Object(r["b"])("/actCategory/getByParentId/".concat(t),e)},z=function(t){return Object(r["e"])("/actCategory/add",t)},J=function(t){return Object(r["e"])("/actCategory/edit",t)},q=function(t){return Object(r["e"])("/actCategory/delByIds",t)},D=function(t){return Object(r["b"])("/actCategory/search",t)},H=function(t){return Object(r["b"])("/actBusiness/getByCondition",t)},U=function(t){return Object(r["e"])("/actBusiness/apply",t)},G=function(t){return Object(r["e"])("/actBusiness/start",t)},Q=function(t){return Object(r["e"])("/actBusiness/cancel",t)},W=function(t){return Object(r["e"])("/actBusiness/delByIds",t)},X=function(t,e){return Object(r["b"])("/leave/get/".concat(t),e)},Y=function(t){return Object(r["e"])("/leave/add",t)},Z=function(t){return Object(r["f"])("/leave/update",t)}},c33d:function(t,e,n){"use strict";n("02d5")}}]);