(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05be88f8","chunk-b74fa51c","chunk-c8ae4838","chunk-2d0de505"],{"09b5":function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticStyle:{display:"flex"}},[s("Input",{staticStyle:{"margin-right":"10px"},attrs:{readonly:"",placeholder:e.placeholder,clearable:e.clearable},on:{"on-clear":e.clearSelect},model:{value:e.departmentTitle,callback:function(t){e.departmentTitle=t},expression:"departmentTitle"}}),s("Poptip",{attrs:{transfer:"",trigger:"click",placement:"right",title:"选择部门",width:"250"}},[s("Button",{attrs:{icon:"md-list"}},[e._v("选择部门")]),s("div",{attrs:{slot:"content"},slot:"content"},[s("Input",{attrs:{suffix:"ios-search",placeholder:"输入部门名搜索",clearable:""},on:{"on-change":e.searchDep},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}}),s("div",{staticClass:"dep-tree-bar"},[s("Tree",{attrs:{data:e.dataDep,"load-data":e.loadData,multiple:e.multiple},on:{"on-select-change":e.selectTree}}),e.depLoading?s("Spin",{attrs:{size:"large",fix:""}}):e._e()],1)],1)],1)],1)])},r=[],a=s("365c"),i={name:"departmentTreeChoose",props:{multiple:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},placeholder:{type:String,default:"点击选择部门"}},data:function(){return{depLoading:!1,departmentTitle:"",searchKey:"",dataDep:[],selectDep:[],departmentId:[]}},methods:{initDepartmentData:function(){var e=this;Object(a["tc"])().then((function(t){t.success&&(t.result.forEach((function(e){e.isParent&&(e.loading=!1,e.children=[]),-1==e.status&&(e.title="[已禁用] "+e.title,e.disabled=!0)})),e.dataDep=t.result)}))},loadData:function(e,t){Object(a["vc"])(e.id).then((function(e){e.success&&(e.result.forEach((function(e){e.isParent&&(e.loading=!1,e.children=[]),-1==e.status&&(e.title="[已禁用] "+e.title,e.disabled=!0)})),t(e.result))}))},searchDep:function(){var e=this;this.searchKey?(this.depLoading=!0,Object(a["Ic"])({title:this.searchKey}).then((function(t){e.depLoading=!1,t.success&&(t.result.forEach((function(e){-1==e.status&&(e.title="[已禁用] "+e.title,e.disabled=!0)})),e.dataDep=t.result)}))):this.initDepartmentData()},selectTree:function(e){var t=[],s="";e.forEach((function(e){t.push(e.id),s=""==s?e.title:s+"、"+e.title})),this.departmentId=t,this.departmentTitle=s,this.multiple?this.$emit("on-change",this.departmentId):this.$emit("on-change",this.departmentId[0])},clearSelect:function(){this.departmentId=[],this.departmentTitle="",this.initDepartmentData(),this.multiple?this.$emit("on-change",[]):this.$emit("on-change",""),this.$emit("on-clear")},setData:function(e,t){this.departmentTitle=t,this.multiple?this.departmentId=e:(this.departmentId=[],this.departmentId.push(e)),this.$emit("on-change",this.departmentId)}},mounted:function(){this.initDepartmentData()}},c=i,o=(s("6c1f"),s("2877")),l=Object(o["a"])(c,n,r,!1,null,null,null);t["default"]=l.exports},1087:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"user-choose"},[s("Button",{attrs:{icon:e.icon},on:{click:function(t){e.userModalVisible=!0}}},[e._v(e._s(e.text))]),s("span",{staticClass:"clear",on:{click:e.clearSelectData}},[e._v("清空已选")]),s("Collapse",{staticClass:"collapse",attrs:{simple:""}},[s("Panel",{attrs:{name:"1"}},[e._v(" 已选择 "),s("span",{staticClass:"select-count"},[e._v(e._s(e.selectUsers.length))]),e._v(" 人 "),s("p",{attrs:{slot:"content"},slot:"content"},e._l(e.selectUsers,(function(t,n){return s("Tag",{key:n,attrs:{name:t.id,color:"default",closable:""},on:{"on-close":e.handleCancelUser}},[s("Tooltip",{attrs:{placement:"top",content:t.username}},[e._v(e._s(t.nickname))])],1)})),1)])],1),s("Drawer",{attrs:{title:"选择用户",closable:"",width:"800",draggable:""},model:{value:e.userModalVisible,callback:function(t){e.userModalVisible=t},expression:"userModalVisible"}},[s("Form",{ref:"searchUserForm",attrs:{model:e.searchUserForm,inline:"","label-width":55}},[s("FormItem",{attrs:{label:"用户名",prop:"nickname"}},[s("Input",{staticStyle:{width:"200px"},attrs:{type:"text",clearable:"",placeholder:"请输入用户名"},model:{value:e.searchUserForm.nickname,callback:function(t){e.$set(e.searchUserForm,"nickname",t)},expression:"searchUserForm.nickname"}})],1),s("FormItem",{attrs:{label:"部门",prop:"department"}},[s("department-choose",{ref:"dep",staticStyle:{width:"200px"},on:{"on-change":e.handleSelectDep}})],1),s("FormItem",{staticClass:"br",staticStyle:{"margin-left":"-35px"}},[s("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:e.handleSearchUser}},[e._v("搜索")]),s("Button",{on:{click:e.handleResetUser}},[e._v("重置")])],1)],1),s("Alert",{attrs:{"show-icon":""}},[e._v(" 已选择 "),s("span",{staticClass:"select-count"},[e._v(e._s(e.selectUsers.length))]),e._v(" 项 "),s("a",{staticStyle:{"margin-left":"10px"},on:{click:e.clearSelectData}},[e._v("清空已选")])]),s("Table",{staticStyle:{margin:"2vh 0"},attrs:{loading:e.userLoading,border:"",columns:e.userColumns,data:e.userData}}),s("Row",{attrs:{type:"flex",justify:"end"}},[s("Page",{attrs:{current:e.searchUserForm.pageNumber,total:e.totalUser,"page-size":e.searchUserForm.pageSize,"page-size-opts":[10,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":"",transfer:""},on:{"on-change":e.changeUserPage,"on-page-size-change":e.changeUserPageSize}})],1)],1)],1)},r=[],a=s("365c"),i=s("84b5"),c={name:"userChoose",components:{departmentChoose:i["default"]},props:{text:{type:String,default:"选择用户"},icon:{type:String,default:"md-person-add"}},data:function(){var e=this;return{userLoading:!0,userModalVisible:!1,selectUsers:[],searchUserForm:{id:"",nickname:"",type:"",status:"",pageNumber:1,pageSize:10,sort:"createTime",order:"desc"},userColumns:[{type:"index",width:60,align:"center"},{title:"用户名",key:"nickname",minWidth:130,sortable:!0},{title:"登录账号",key:"username",minWidth:130,sortable:!0},{title:"头像",key:"avatar",width:80,align:"center",render:function(e,t){return e("Avatar",{props:{src:t.row.avatar}})}},{title:"所属部门",key:"departmentTitle",width:120},{title:"手机",key:"mobile",width:125,sortable:!0},{title:"邮箱",key:"email",width:180,sortable:!0},{title:"性别",key:"sex",width:70,align:"center"},{title:"创建时间",key:"createTime",sortable:!0,sortType:"desc",width:170},{title:"操作",key:"action",width:130,align:"center",fixed:"right",render:function(t,s){return t("div",[t("Button",{props:{type:"info",size:"small"},on:{click:function(){e.chooseUser(s.row)}}},"添加该用户")])}}],userData:[],totalUser:0}},methods:{handleSelectDep:function(e){this.searchUserForm.departmentId=e},changeUserPage:function(e){this.searchUserForm.pageNumber=e,this.getUserDataList()},changeUserPageSize:function(e){this.searchUserForm.pageSize=e,this.getUserDataList()},getUserDataList:function(){var e=this;this.userLoading=!0,Object(a["oc"])(this.searchUserForm).then((function(t){e.userLoading=!1,t.success&&(e.userData=t.result.content,e.totalUser=t.result.totalElements)}))},handleSearchUser:function(){this.searchUserForm.pageNumber=1,this.searchUserForm.pageSize=10,this.getUserDataList()},handleResetUser:function(){this.$refs.searchUserForm.resetFields(),this.searchUserForm.pageNumber=1,this.searchUserForm.pageSize=10,this.$refs.dep.clearSelect(),this.searchUserForm.departmentId="",this.getUserDataList()},setData:function(e){this.selectUsers=e,this.$emit("on-change",this.selectUsers)},chooseUser:function(e){var t=this,s=!0;if(this.selectUsers.forEach((function(n){e.id==n.id&&(t.$Message.warning("已经添加过啦，请勿重复选择"),s=!1)})),s){var n={id:e.id,username:e.username,nickname:e.nickname};this.selectUsers.push(n),this.$emit("on-change",this.selectUsers),this.$Message.success("添加用户 ".concat(e.nickname," 成功"))}},clearSelectData:function(){this.selectUsers=[],this.$emit("on-change",this.selectUsers)},handleCancelUser:function(e,t){this.selectUsers=this.selectUsers.filter((function(e){return e.id!=t})),this.$emit("on-change",this.selectUsers),this.$Message.success("删除所选用户成功")}},mounted:function(){this.getUserDataList()}},o=c,l=(s("5d34"),s("2877")),u=Object(l["a"])(o,n,r,!1,null,null,null);t["default"]=u.exports},5535:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"search"},[s("Card",{staticStyle:{"min-height":"600px"}},[s("div",{attrs:{slot:"title"},slot:"title"},[s("div",{staticClass:"edit-head"},[s("a",{staticClass:"back-title",on:{click:e.close}},[s("Icon",{attrs:{type:"ios-arrow-back"}}),e._v("返回 ")],1),s("div",{staticClass:"head-name"},[e._v(e._s(e.processName)+" 流程配置")]),s("span"),s("a",{staticClass:"window-close",on:{click:e.close}},[s("Icon",{staticClass:"ivu-icon-ios-close",attrs:{type:"ios-close",size:"31"}})],1)])]),s("div",{staticStyle:{display:"flex","justify-content":"center",margin:"10px 0 30px 0"}},[s("Steps",{staticStyle:{width:"400px"},attrs:{current:e.current}},[s("Step",{attrs:{title:"基本配置"}}),s("Step",{attrs:{title:"节点审批人配置"}})],1)],1),s("Row",{directives:[{name:"show",rawName:"v-show",value:0==e.current,expression:"current==0"}],attrs:{type:"flex",justify:"center"}},[s("Col",{attrs:{xs:24,md:24,lg:16,xl:9}},[s("Form",{ref:"basicForm",attrs:{model:e.basicForm,"label-position":"left","label-width":110,rules:e.formValidate}},[s("FormItem",{attrs:{label:"关联表单路由",prop:"routeName"}},[s("Select",{attrs:{placeholder:"请选择关联业务表单前端路由名",clearable:""},on:{"on-change":e.handelSubmitEdit},model:{value:e.basicForm.routeName,callback:function(t){e.$set(e.basicForm,"routeName",t)},expression:"basicForm.routeName"}},e._l(e.dictForm,(function(t,n){return s("Option",{key:n,attrs:{value:t.value,label:t.title}},[s("span",{staticStyle:{"margin-right":"10px"}},[e._v(e._s(t.title))]),s("span",{staticStyle:{color:"#ccc"}},[e._v(e._s(t.value))])])})),1)],1),s("FormItem",{attrs:{label:"关联业务表",prop:"businessTable"}},[s("Select",{attrs:{placeholder:"请选择关联数据库业务表",clearable:""},on:{"on-change":e.handelSubmitEdit},model:{value:e.basicForm.businessTable,callback:function(t){e.$set(e.basicForm,"businessTable",t)},expression:"basicForm.businessTable"}},e._l(e.dictTable,(function(t,n){return s("Option",{key:n,attrs:{value:t.value,label:t.title}},[s("span",{staticStyle:{"margin-right":"10px"}},[e._v(e._s(t.title))]),s("span",{staticStyle:{color:"#ccc"}},[e._v(e._s(t.value))])])})),1)],1),s("FormItem",{attrs:{label:"流程分类"}},[s("div",{staticStyle:{display:"flex"}},[s("Input",{staticStyle:{"margin-right":"10px"},attrs:{readonly:"",clearable:""},on:{"on-clear":e.clearSelectCat},model:{value:e.categoryTitle,callback:function(t){e.categoryTitle=t},expression:"categoryTitle"}}),s("Poptip",{attrs:{trigger:"click",placement:"right",title:"选择类别",width:"250"}},[s("Button",{attrs:{icon:"md-list"}},[e._v("选择分类")]),s("div",{attrs:{slot:"content"},slot:"content"},[s("Input",{attrs:{suffix:"ios-search",placeholder:"输入分类名搜索",clearable:""},on:{"on-change":e.searchCat},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}}),s("div",{staticClass:"tree-list"},[s("Tree",{attrs:{data:e.dataCat,"load-data":e.loadDataTree,render:e.renderCatContent}}),e.catLoading?s("Spin",{attrs:{size:"large",fix:""}}):e._e()],1)],1)],1)],1)]),s("FormItem",{attrs:{label:"备注描述",prop:"description"}},[s("Input",{attrs:{type:"textarea",rows:4},on:{"on-blur":e.handelSubmitEdit},model:{value:e.basicForm.description,callback:function(t){e.$set(e.basicForm,"description",t)},expression:"basicForm.description"}})],1),s("FormItem",{staticClass:"br"},[s("Button",{attrs:{type:"warning"},on:{click:function(t){e.current=1}}},[e._v(" 下一步 "),s("Icon",{attrs:{type:"ios-arrow-forward"}})],1),s("Button",{on:{click:e.close}},[e._v("关闭")])],1)],1)],1)],1),1==e.current?s("Row",{attrs:{type:"flex",justify:"start"}},[s("Col",{attrs:{md:8,lg:8,xl:6}},[s("Alert",{attrs:{"show-icon":""}},[e._v(" 当前选择编辑： "),s("span",{staticClass:"select-title"},[e._v(e._s(e.editTitle))]),e.form.id?s("a",{staticClass:"select-clear",on:{click:e.cancelEdit}},[e._v("取消选择")]):e._e()]),s("div",{staticClass:"tree-bar"},[s("Tree",{ref:"tree",attrs:{data:e.data,render:e.renderContent},on:{"on-select-change":e.selectTree}}),e.loading?s("Spin",{attrs:{size:"large",fix:""}}):e._e()],1)],1),s("Col",{staticStyle:{"margin-left":"10px"},attrs:{md:15,lg:13,xl:10}},[s("Alert",{staticStyle:{"margin-left":"1vw"},attrs:{type:"warning","show-icon":""}},[e._v("温馨提示：若流程运行至未分配审批人员的审批节点时，流程将自动中断取消")]),s("Form",{ref:"form",staticStyle:{position:"relative"},attrs:{model:e.form,"label-width":90}},[s("FormItem",{attrs:{label:"节点名称",prop:"title"}},[e._v(" "+e._s(e.form.title)+" "),s("Tooltip",{staticStyle:{display:"inline-block !important"},attrs:{content:"配置可看到该流程的所属用户，默认所有人可发起",placement:"right",transfer:"","max-width":"280"}},[s("Icon",{directives:[{name:"show",rawName:"v-show",value:0==e.form.type,expression:"form.type==0"}],staticStyle:{"margin-left":"5px",cursor:"pointer"},attrs:{type:"md-help-circle",size:"20",color:"#c5c5c5"}})],1)],1),s("FormItem",{attrs:{label:"节点类型",prop:"type"}},[s("Select",{staticStyle:{width:"300px"},attrs:{disabled:""},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.dictNodeType,(function(t,n){return s("Option",{key:n,attrs:{value:t.value}},[e._v(e._s(t.title))])})),1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:0==e.form.type,expression:"form.type==0"}]},[s("FormItem",{attrs:{label:"可发起人员"}},[s("Checkbox",{model:{value:e.allUser,callback:function(t){e.allUser=t},expression:"allUser"}},[s("Icon",{staticStyle:{margin:"0 2px 0 0"},attrs:{type:"md-contacts"}}),s("span",[e._v("所有人")])],1),s("Checkbox",{attrs:{disabled:e.allUser},on:{"on-change":e.clickRole},model:{value:e.chooseRole,callback:function(t){e.chooseRole=t},expression:"chooseRole"}},[s("Icon",{staticStyle:{margin:"0 2px 0 0"},attrs:{type:"md-people",size:"14"}}),s("span",[e._v("指定角色")])],1),s("Checkbox",{attrs:{disabled:e.allUser},on:{"on-change":e.clickDepartment},model:{value:e.chooseDepartment,callback:function(t){e.chooseDepartment=t},expression:"chooseDepartment"}},[s("Icon",{staticStyle:{margin:"0 2px 0 0"},attrs:{type:"ios-people"}}),s("span",[e._v("指定部门")])],1),s("Checkbox",{attrs:{disabled:e.allUser},on:{"on-change":e.clickUser},model:{value:e.chooseUser,callback:function(t){e.chooseUser=t},expression:"chooseUser"}},[s("Icon",{staticStyle:{margin:"0 2px 0 0"},attrs:{type:"md-person"}}),s("span",[e._v("指定人员")])],1)],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:1==e.form.type,expression:"form.type==1"}]},[s("FormItem",{attrs:{label:"可审批人员"}},[s("Checkbox",{attrs:{disabled:e.form.customUser},on:{"on-change":e.clickRole},model:{value:e.chooseRole,callback:function(t){e.chooseRole=t},expression:"chooseRole"}},[s("Icon",{staticStyle:{margin:"0 2px 0 0"},attrs:{type:"md-people",size:"14"}}),s("span",[e._v("指定角色")])],1),s("Checkbox",{attrs:{disabled:e.form.customUser},on:{"on-change":e.clickDepartment},model:{value:e.chooseDepartment,callback:function(t){e.chooseDepartment=t},expression:"chooseDepartment"}},[s("Icon",{staticStyle:{margin:"0 2px 0 0"},attrs:{type:"ios-people"}}),s("span",[e._v("指定部门负责人")])],1),s("Checkbox",{attrs:{disabled:e.form.customUser},on:{"on-change":e.clickUser},model:{value:e.chooseUser,callback:function(t){e.chooseUser=t},expression:"chooseUser"}},[s("Icon",{staticStyle:{margin:"0 2px 0 0"},attrs:{type:"md-person"}}),s("span",[e._v("指定人员")])],1),s("Checkbox",{model:{value:e.form.customUser,callback:function(t){e.$set(e.form,"customUser",t)},expression:"form.customUser"}},[s("Icon",{staticStyle:{margin:"0 2px 0 0"},attrs:{type:"md-contacts"}}),s("span",[e._v("审批人自选")]),s("Tooltip",{staticStyle:{display:"inline-block !important"},attrs:{content:"审批人任意自选用户，请勿在网关后设置",placement:"right",transfer:"","max-width":"280"}},[s("Icon",{staticStyle:{"margin-left":"10px",cursor:"pointer"},attrs:{type:"md-help-circle",size:"20",color:"#c5c5c5"}})],1)],1),s("Checkbox",{attrs:{disabled:e.form.customUser},model:{value:e.form.chooseDepHeader,callback:function(t){e.$set(e.form,"chooseDepHeader",t)},expression:"form.chooseDepHeader"}},[s("Icon",{staticStyle:{margin:"0 2px 0 0"},attrs:{type:"md-person"}}),s("span",[e._v("连续多级部门负责人")]),s("Tooltip",{staticStyle:{display:"inline-block !important"},attrs:{content:"自动获取发起人或上一审批人的部门负责人",placement:"right",transfer:"","max-width":"280"}},[s("Icon",{staticStyle:{"margin-left":"10px",cursor:"pointer"},attrs:{type:"md-help-circle",size:"20",color:"#c5c5c5"}})],1)],1)],1)],1),s("FormItem",{directives:[{name:"show",rawName:"v-show",value:e.chooseRole&&(0==e.form.type&&!e.allUser||1==e.form.type&&!e.form.customUser),expression:"chooseRole&&((form.type==0&&!allUser)||(form.type==1&&!form.customUser))"}],attrs:{label:"选择角色"}},[s("Select",{attrs:{multiple:""},model:{value:e.form.roles,callback:function(t){e.$set(e.form,"roles",t)},expression:"form.roles"}},e._l(e.roleList,(function(t){return s("Option",{key:t.id,attrs:{value:t.id,label:t.name}},[s("span",{staticStyle:{"margin-right":"10px"}},[e._v(e._s(t.name))]),s("span",{staticStyle:{color:"#ccc"}},[e._v(e._s(t.description))])])})),1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.chooseDepartment&&(0==e.form.type&&!e.allUser||1==e.form.type&&!e.form.customUser),expression:"chooseDepartment&&((form.type==0&&!allUser)||(form.type==1&&!form.customUser))"}]},[s("FormItem",{attrs:{label:"选择部门"}},[s("department-tree-choose",{ref:"depTree",attrs:{multiple:"",width:"250px"},on:{"on-change":e.handleSelectDepTree}})],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.chooseUser&&(0==e.form.type&&!e.allUser||1==e.form.type&&!e.form.customUser),expression:"chooseUser&&((form.type==0&&!allUser)||(form.type==1&&!form.customUser))"}]},[s("FormItem",{attrs:{label:"选择用户"}},[s("user-choose",{ref:"user",on:{"on-change":e.handleSelectUser}})],1)],1),s("FormItem",{staticClass:"br"},[s("Button",{attrs:{type:"primary",loading:e.submitLoading,icon:"ios-create-outline",disabled:0!=e.form.type&&1!=e.form.type},on:{click:e.handelSubmit}},[e._v("保存并提交")]),s("Button",{attrs:{type:"warning",icon:"ios-arrow-back"},on:{click:function(t){e.current=0}}},[e._v("上一步")]),s("Button",{on:{click:e.close}},[e._v("关闭")])],1),e.nodeLoading?s("Spin",{attrs:{size:"large",fix:""}}):e._e()],1)],1)],1):e._e()],1)],1)},r=[],a=s("81c1"),i=s("365c"),c=s("1087"),o=s("09b5"),l={name:"process_node_edit",components:{userChoose:c["default"],departmentTreeChoose:o["default"]},props:{nodeEditData:Object},data:function(){return{loading:!1,nodeLoading:!1,data:[],editTitle:"",selectUsers:[],dataCat:[],catLoading:!1,searchKey:"",basicForm:{routeName:"",businessTable:"",description:""},formValidate:{routeName:[{required:!0,message:"不能为空",trigger:"change"}],businessTable:[{required:!0,message:"不能为空",trigger:"change"}]},categoryTitle:"",dictTable:[],dictForm:[],form:{title:"",content:"",type:null,roles:[],departmentIds:[],chooseDepHeader:!1,customUser:!1},roleList:[],submitLoading:!1,chooseRole:!1,chooseUser:!1,chooseDepartment:!1,allUser:!0,current:0,dictNodeType:[],processName:"",processId:""}},methods:{init:function(){this.getDictDataType(),this.getRoleList(),this.initCategoryTreeData(),this.processId=this.nodeEditData.id,this.processName=this.nodeEditData.name,this.basicForm.id=this.nodeEditData.id,this.basicForm.routeName=this.nodeEditData.routeName,this.basicForm.businessTable=this.nodeEditData.businessTable,this.basicForm.description=this.nodeEditData.description,this.basicForm.categoryId=this.nodeEditData.categoryId,this.categoryTitle=this.nodeEditData.categoryTitle;var e=this.nodeEditData.allUser+"";this.allUser="false"!=e},getDictDataType:function(){var e=this;Object(i["Nb"])("process_node_type").then((function(t){t.success&&(e.dictNodeType=t.result,e.getData())})),Object(i["Nb"])("business_table").then((function(t){t.success&&(e.dictTable=t.result)})),Object(i["Nb"])("business_form").then((function(t){t.success&&(e.dictForm=t.result)}))},renderCatContent:function(e,t){var s=this,n=(t.root,t.node,t.data),r="";return"0"==n.type?r="md-folder-open":"1"==n.type&&(r="ios-bookmark-outline"),e("span",{style:{display:"inline-block",cursor:"pointer"},on:{click:function(){s.selectCatTree(n)}}},[e("span",[e("Icon",{props:{type:r,size:"16"},style:{"margin-right":"8px","margin-bottom":"3px"}}),e("span",n.title)])])},initCategoryTreeData:function(){var e=this;Object(a["N"])().then((function(t){t.success&&(t.result.forEach((function(e){e.isParent&&(e.loading=!1,e.children=[]),-1==e.status&&(e.title="[已禁用] "+e.title,e.disabled=!0)})),e.dataCat=t.result)}))},loadDataTree:function(e,t){Object(a["O"])(e.id).then((function(e){e.success&&(e.result.forEach((function(e){e.isParent&&(e.loading=!1,e.children=[]),-1==e.status&&(e.title="[已禁用] "+e.title,e.disabled=!0)})),t(e.result))}))},searchCat:function(){var e=this;this.searchKey?(this.catLoading=!0,Object(a["R"])({title:this.searchKey}).then((function(t){e.catLoading=!1,t.success&&(t.result.forEach((function(e){-1==e.status&&(e.title="[已禁用] "+e.title,e.disabled=!0)})),e.dataCat=t.result)}))):this.initCategoryTreeData()},selectCatTree:function(e){if(e){for(var t in e)null==e[t]&&(e[t]="");var s=JSON.stringify(e),n=JSON.parse(s);if(0==n.type)return void this.$Message.warning("请选择一个类别");this.basicForm.categoryId=n.id,this.categoryTitle=n.title,this.handelSubmitEdit()}},clearSelectCat:function(){this.basicForm.categoryId="",this.categoryTitle="",this.handelSubmitEdit()},handelSubmitEdit:function(){var e=this;this.$refs.basicForm.validate((function(t){t&&Object(a["U"])(e.basicForm).then((function(t){t.success&&(e.$Message.success("操作成功"),e.$emit("submited",!0))}))}))},getRoleList:function(){var e=this;Object(i["Eb"])().then((function(t){t.success&&(e.roleList=t.result)}))},getData:function(){var e=this;this.loading=!0,Object(a["K"])(this.processId).then((function(t){if(e.loading=!1,t.success){var s=t.result;for(var n in s)null==s[n]&&(s[n]="");var r=JSON.stringify(s),a=JSON.parse(r);a.forEach((function(t){e.dictNodeType.forEach((function(e){e.value=Number(e.value),t.title||t.type!=e.value||(t.title=e.title)}))})),e.data=a}}))},renderContent:function(e,t){t.root,t.node;var s=t.data,n="",r="",a=s.title;return 0==s.type?(n="#47cb89",r="开",a+="【谁可以发起】"):1==s.type?(n="#2db7f5",r="审"):2==s.type?r="结":(n="#f90",r="其他"),e("span",[e("span",[e("Avatar",{props:{size:"small"},style:{background:n,"margin-right":"5px"}},r),e("span",a)])])},selectTree:function(e){if(e.length>0){for(var t in e[0])null==e[0][t]&&(e[0][t]="");var s=JSON.stringify(e[0]),n=JSON.parse(s);if(this.selectUsers=n.users,this.editTitle=n.title,n.users&&n.users.length>0?(this.chooseUser=!0,this.$refs.user.setData(n.users)):(this.chooseUser=!1,this.$refs.user.setData([])),n.roles&&n.roles.length>0){this.chooseRole=!0;var r=[];n.roles.forEach((function(e){r.push(e.id)})),n.roles=r}else this.chooseRole=!1;if(n.departments&&n.departments.length>0){this.chooseDepartment=!0;var a=[],i="";n.departments.forEach((function(e){a.push(e.id),i=""==i?e.title:i+"、"+e.title})),this.$refs.depTree.setData(a,i),n.departmentIds=a}else this.chooseDepartment=!1,this.$refs.depTree.setData([],"");this.form=n}else this.cancelEdit()},cancelEdit:function(){var e=this.$refs.tree.getSelectedNodes()[0];e&&(e.selected=!1),this.$refs.form.resetFields(),this.form.id="",delete this.form.id,this.editTitle=""},handelSubmit:function(){var e=this;this.submitLoading=!0;var t=[];this.selectUsers.forEach((function(e){t+=e.id+","})),t.length>0&&(t=t.substring(0,t.length-1)),this.form.nodeId=this.form.id,this.chooseUser&&t&&t.length>0&&(this.form.userIds=t),this.chooseRole&&this.form.roles&&this.form.roles.length>0&&(this.form.roleIds=this.form.roles),0==this.form.type?(this.form.nodeId=this.processId,this.form.allUser=this.allUser,Object(a["w"])(this.form).then((function(t){e.submitLoading=!1,t.success&&(e.$Message.success("操作成功"),e.getData(),e.$emit("submited",!0))}))):Object(a["v"])(this.form).then((function(t){e.submitLoading=!1,t.success&&(e.$Message.success("操作成功"),e.getData())}))},clickRole:function(e){this.chooseRole=e},clickUser:function(e){this.chooseUser=e},clickDepartment:function(e){this.chooseDepartment=e},handleSelectUser:function(e){this.selectUsers=e},handleSelectDepTree:function(e){this.form.departmentIds=e},close:function(){this.$emit("close",!0)}},mounted:function(){this.init()}},u=l,d=(s("af90"),s("2877")),h=Object(d["a"])(u,n,r,!1,null,null,null);t["default"]=h.exports},"5d34":function(e,t,s){"use strict";s("cc94")},"6c1f":function(e,t,s){"use strict";s("a09c")},"81c1":function(e,t,s){"use strict";s.d(t,"x",(function(){return r})),s.d(t,"r",(function(){return a})),s.d(t,"y",(function(){return i})),s.d(t,"D",(function(){return c})),s.d(t,"F",(function(){return o})),s.d(t,"c",(function(){return l})),s.d(t,"s",(function(){return u})),s.d(t,"o",(function(){return d})),s.d(t,"J",(function(){return h})),s.d(t,"U",(function(){return p})),s.d(t,"X",(function(){return m})),s.d(t,"i",(function(){return f})),s.d(t,"K",(function(){return b})),s.d(t,"v",(function(){return g})),s.d(t,"w",(function(){return y})),s.d(t,"p",(function(){return v})),s.d(t,"L",(function(){return k})),s.d(t,"B",(function(){return U})),s.d(t,"I",(function(){return x})),s.d(t,"C",(function(){return D})),s.d(t,"G",(function(){return S})),s.d(t,"H",(function(){return T})),s.d(t,"V",(function(){return _})),s.d(t,"q",(function(){return O})),s.d(t,"j",(function(){return I})),s.d(t,"T",(function(){return w})),s.d(t,"t",(function(){return C})),s.d(t,"M",(function(){return j})),s.d(t,"k",(function(){return F})),s.d(t,"P",(function(){return N})),s.d(t,"Q",(function(){return $})),s.d(t,"z",(function(){return E})),s.d(t,"e",(function(){return P})),s.d(t,"f",(function(){return L})),s.d(t,"g",(function(){return B})),s.d(t,"n",(function(){return z})),s.d(t,"N",(function(){return R})),s.d(t,"O",(function(){return M})),s.d(t,"a",(function(){return K})),s.d(t,"u",(function(){return J})),s.d(t,"l",(function(){return A})),s.d(t,"R",(function(){return H})),s.d(t,"A",(function(){return V})),s.d(t,"d",(function(){return q})),s.d(t,"S",(function(){return W})),s.d(t,"h",(function(){return G})),s.d(t,"m",(function(){return Q})),s.d(t,"E",(function(){return X})),s.d(t,"b",(function(){return Y})),s.d(t,"W",(function(){return Z}));var n=s("7f80"),r="/snail/actModel/export/",a="/snail/actModel/deployByFile",i="/snail/actProcess/export",c="/snail/actProcess/getHighlightImg/",o=function(e){return Object(n["b"])("/actModel/getByCondition",e)},l=function(e){return Object(n["e"])("/actModel/add",e)},u=function(e,t){return Object(n["b"])("/actModel/deploy/".concat(e),t)},d=function(e){return Object(n["e"])("/actModel/delByIds",e)},h=function(e){return Object(n["b"])("/actProcess/getByCondition",e)},p=function(e){return Object(n["e"])("/actProcess/updateInfo",e)},m=function(e){return Object(n["e"])("/actProcess/updateStatus",e)},f=function(e,t){return Object(n["b"])("/actProcess/convertToModel/".concat(e),t)},b=function(e,t){return Object(n["b"])("/actProcess/getProcessNode/".concat(e),t)},g=function(e){return Object(n["e"])("/actProcess/editNodeUser",e)},y=function(e){return Object(n["e"])("/actProcess/editStartUser",e)},v=function(e){return Object(n["e"])("/actProcess/delByIds",e)},k=function(e){return Object(n["b"])("/actProcess/getRunningProcess",e)},U=function(e){return Object(n["b"])("/actProcess/getFinishedProcess",e)},x=function(e,t){return Object(n["b"])("/actProcess/getByKey/".concat(e),t)},D=function(e,t){return Object(n["b"])("/actProcess/getFirstNode/".concat(e),t)},S=function(e,t,s){return Object(n["b"])("/actProcess/getNextNode/".concat(e,"/").concat(t),s)},T=function(e,t){return Object(n["b"])("/actProcess/getNode/".concat(e),t)},_=function(e){return Object(n["e"])("/actProcess/updateInsStatus",e)},O=function(e){return Object(n["e"])("/actProcess/delInsByIds",e)},I=function(e){return Object(n["e"])("/actProcess/delHistoricInsByIds",e)},w=function(e){return Object(n["b"])("/actTask/todoList",e)},C=function(e){return Object(n["b"])("/actTask/doneList",e)},j=function(e,t){return Object(n["b"])("/actTask/historicFlow/".concat(e),t)},F=function(e){return Object(n["e"])("/actTask/delegate",e)},N=function(e){return Object(n["e"])("/actTask/pass",e)},$=function(e){return Object(n["e"])("/actTask/passAll",e)},E=function(e,t){return Object(n["b"])("/actTask/getBackList/".concat(e),t)},P=function(e){return Object(n["e"])("/actTask/back",e)},L=function(e){return Object(n["e"])("/actTask/backAll",e)},B=function(e){return Object(n["e"])("/actTask/backToTask",e)},z=function(e){return Object(n["e"])("/actTask/deleteHistoric",e)},R=function(e){return Object(n["b"])("/actCategory/getByParentId/0",e)},M=function(e,t){return Object(n["b"])("/actCategory/getByParentId/".concat(e),t)},K=function(e){return Object(n["e"])("/actCategory/add",e)},J=function(e){return Object(n["e"])("/actCategory/edit",e)},A=function(e){return Object(n["e"])("/actCategory/delByIds",e)},H=function(e){return Object(n["b"])("/actCategory/search",e)},V=function(e){return Object(n["b"])("/actBusiness/getByCondition",e)},q=function(e){return Object(n["e"])("/actBusiness/apply",e)},W=function(e){return Object(n["e"])("/actBusiness/start",e)},G=function(e){return Object(n["e"])("/actBusiness/cancel",e)},Q=function(e){return Object(n["e"])("/actBusiness/delByIds",e)},X=function(e,t){return Object(n["b"])("/leave/get/".concat(e),t)},Y=function(e){return Object(n["e"])("/leave/add",e)},Z=function(e){return Object(n["f"])("/leave/update",e)}},"84b5":function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Cascader",{attrs:{data:e.department,"load-data":e.loadData,"change-on-select":"",filterable:"",clearable:"",placeholder:"请选择或输入搜索部门"},on:{"on-change":e.handleChangeDep},model:{value:e.selectDep,callback:function(t){e.selectDep=t},expression:"selectDep"}})],1)},r=[],a=s("365c"),i={name:"departmentChoose",props:{},data:function(){return{selectDep:[],department:[]}},methods:{initDepartmentData:function(){var e=this;Object(a["tc"])().then((function(t){t.success&&(t.result.forEach((function(e){e.isParent?(e.value=e.id,e.label=e.title,e.loading=!1,e.children=[]):(e.value=e.id,e.label=e.title),-1==e.status&&(e.label="[已禁用] "+e.label,e.disabled=!0)})),e.department=t.result)}))},loadData:function(e,t){e.loading=!0,Object(a["vc"])(e.value).then((function(s){e.loading=!1,s.success&&(s.result.forEach((function(e){e.isParent?(e.value=e.id,e.label=e.title,e.loading=!1,e.children=[]):(e.value=e.id,e.label=e.title),-1==e.status&&(e.label="[已禁用] "+e.label,e.disabled=!0)})),e.children=s.result,t())}))},handleChangeDep:function(e,t){var s="";e&&e.length>0&&(s=e[e.length-1]),this.$emit("on-change",s)},clearSelect:function(){this.selectDep=[]}},mounted:function(){this.initDepartmentData()}},c=i,o=s("2877"),l=Object(o["a"])(c,n,r,!1,null,null,null);t["default"]=l.exports},"984d":function(e,t,s){},a09c:function(e,t,s){},af90:function(e,t,s){"use strict";s("984d")},cc94:function(e,t,s){}}]);