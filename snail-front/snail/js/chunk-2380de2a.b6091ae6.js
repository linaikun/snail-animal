(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2380de2a"],{"5ab0":function(t,e,a){"use strict";a("c783")},c783:function(t,e,a){},d613:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search"},[a("Card",[a("Row",{attrs:{type:"flex",justify:"space-between"}},[t.expand?a("Col",{attrs:{span:"5"}},[a("Alert",{attrs:{"show-icon":""}},[t._v(" 当前选择： "),a("span",{staticClass:"select-title"},[t._v(t._s(t.editTitle))]),t.editTitle?a("a",{staticClass:"select-clear",on:{click:t.cancelEdit}},[t._v("取消选择")]):t._e()]),a("Input",{attrs:{suffix:"ios-search",placeholder:"输入节点名搜索",clearable:""},on:{"on-change":t.search},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}}),a("div",{staticClass:"tree-bar",style:{maxHeight:t.maxHeight}},[a("Tree",{ref:"tree",attrs:{data:t.treeData,"load-data":t.loadData},on:{"on-select-change":t.selectTree}}),t.treeLoading?a("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)],1):t._e(),a("div",{staticClass:"expand"},[a("Icon",{staticClass:"icon",attrs:{type:t.expandIcon,size:"16"},on:{click:t.changeExpand}})],1),a("Col",{attrs:{span:t.span}},[a("Row",[a("Form",{ref:"searchForm",attrs:{model:t.searchForm,inline:"","label-width":50}},[a("FormItem",{attrs:{label:"名称",prop:"name"}},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入",clearable:""},model:{value:t.searchForm.name,callback:function(e){t.$set(t.searchForm,"name",e)},expression:"searchForm.name"}})],1),a("FormItem",{attrs:{label:"状态",prop:"status"}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择",clearable:""},model:{value:t.searchForm.status,callback:function(e){t.$set(t.searchForm,"status",e)},expression:"searchForm.status"}},[a("Option",{attrs:{value:"0"}},[t._v("正常")]),a("Option",{attrs:{value:"-1"}},[t._v("禁用")])],1)],1),a("FormItem",{staticClass:"br",staticStyle:{"margin-left":"-35px"}},[a("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:t.handleSearch}},[t._v("搜索")]),a("Button",{on:{click:t.handleReset}},[t._v("重置")])],1)],1)],1),a("Row",{staticClass:"operation"},[a("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:t.add}},[t._v("添加")]),a("Button",{attrs:{icon:"md-trash"},on:{click:t.delAll}},[t._v("批量删除")]),a("Button",{attrs:{icon:"md-refresh"},on:{click:t.getDataList}},[t._v("刷新")])],1),a("Row",[a("Alert",{attrs:{"show-icon":""}},[t._v(" 已选择 "),a("span",{staticClass:"select-count"},[t._v(t._s(t.selectList.length))]),t._v(" 项 "),a("a",{staticClass:"select-clear",on:{click:t.clearSelectAll}},[t._v("清空")])])],1),a("Row",[a("Table",{ref:"table",attrs:{loading:t.loading,border:"",columns:t.columns,data:t.data,sortable:"custom"},on:{"on-sort-change":t.changeSort,"on-selection-change":t.showSelect}})],1),a("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[a("Page",{attrs:{current:t.searchForm.pageNumber,total:t.total,"page-size":t.searchForm.pageSize,"page-size-opts":[10,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}})],1)],1)],1)],1),a("Modal",{attrs:{title:t.modalTitle,"mask-closable":!1,width:500},model:{value:t.modalVisible,callback:function(e){t.modalVisible=e},expression:"modalVisible"}},[a("Form",{ref:"form",attrs:{model:t.form,"label-width":70,rules:t.formValidate}},[a("FormItem",{attrs:{label:"名称",prop:"name"}},[a("Input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text"},on:{click:function(e){t.modalVisible=!1}}},[t._v("取消")]),a("Button",{attrs:{type:"primary",loading:t.submitLoading},on:{click:t.handelSubmit}},[t._v("提交")])],1)],1)],1)},i=[],n={name:"treeAndTable",data:function(){var t=this;return{treeLoading:!1,maxHeight:"500px",loading:!1,editTitle:"",searchKey:"",expand:!0,span:18,expandIcon:"ios-arrow-back",selectNode:{},treeData:[],selectList:[],searchForm:{name:"",status:"",pageNumber:1,pageSize:10,sort:"createTime",order:"desc"},modalType:0,modalVisible:!1,modalTitle:"",form:{name:"",sex:1,type:0},formValidate:{name:[{required:!0,message:"不能为空",trigger:"change"}]},columns:[{type:"selection",width:60,align:"center"},{type:"index",width:60,align:"center"},{title:"名称",key:"name",minWidth:200,sortable:!0},{title:"描述",key:"description",minWidth:200,sortable:!0},{title:"状态",key:"status",align:"center",width:150,render:function(t,e){return 0==e.row.status?t("div",[t("Badge",{props:{status:"success",text:"启用"}})]):-1==e.row.status?t("div",[t("Badge",{props:{status:"error",text:"禁用"}})]):void 0}},{title:"创建时间",key:"createTime",width:200,sortable:!0,sortType:"desc"},{title:"操作",key:"action",width:150,align:"center",fixed:"right",render:function(e,a){return e("div",[e("a",{on:{click:function(){t.edit(a.row)}}},"编辑"),e("Divider",{props:{type:"vertical"}}),e("a",{on:{click:function(){t.remove(a.row)}}},"删除")])}}],submitLoading:!1,data:[],total:0}},methods:{init:function(){this.getParentList(),this.getDataList()},getParentList:function(){this.treeData=[{title:"一级1",id:"1",parentId:"0",parentTitle:"一级节点",status:0,loading:!1,children:[{title:"二级1",id:"2",parentId:"1",status:0,parentTitle:"一级1"}]},{title:"一级2",id:"3",parentId:"0",parentTitle:"一级节点",status:0}]},loadData:function(t,e){},search:function(){this.searchKey?this.treeData=[{title:"这里需要请求后端接口",id:"1",parentId:"0",parentTitle:"一级节点",status:0},{title:"所以这里是假数据",id:"4",parentId:"0",parentTitle:"一级节点",status:0},{title:"我是被禁用的节点",id:"5",parentId:"0",parentTitle:"一级节点",status:-1}]:this.getParentList()},selectTree:function(t){if(t.length>0){for(var e in t[0])null==t[0][e]&&(t[0][e]="");var a=JSON.stringify(t[0]),s=JSON.parse(a);this.selectNode=s,this.editTitle=s.title,this.getDataList()}else this.cancelEdit()},cancelEdit:function(){var t=this.$refs.tree.getSelectedNodes()[0];t&&(t.selected=!1),this.selectNode={},this.editTitle="",this.getDataList()},changeSelect:function(t){this.selectList=t},changeExpand:function(){this.expand=!this.expand,this.expand?(this.expandIcon="ios-arrow-back",this.span=18):(this.expandIcon="ios-arrow-forward",this.span=23)},changePage:function(t){this.searchForm.pageNumber=t,this.getDataList(),this.clearSelectAll()},changePageSize:function(t){this.searchForm.pageSize=t,this.getDataList()},getDataList:function(){this.loading=!0,this.searchForm.selectId=this.selectNode.id,this.selectNode.id?"1"==this.selectNode.id?this.data=[{id:"1",name:"Snail",description:"我是一级1的数据",status:0,createTime:"2018-08-08 00:08:00"}]:"2"==this.selectNode.id?this.data=[{id:"2",name:"snail",description:"我是二级1的数据",status:0,createTime:"2018-08-08 00:08:00"}]:"3"==this.selectNode.id&&(this.data=[{id:"3",name:"Present By snail",description:"我是一级2的数据",status:-1,createTime:"2018-08-08 00:08:00"}]):this.data=[{id:"1",name:"Snail",description:"我是一级1的数据",status:0,createTime:"2018-08-08 00:08:00"},{id:"2",name:"snail",description:"我是二级1的数据",status:0,createTime:"2018-08-08 00:08:00"},{id:"3",name:"Snail",description:"我是一级2的数据",status:-1,createTime:"2018-08-08 00:08:00"}],this.total=this.data.length,this.loading=!1},handleSearch:function(){this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.getDataList()},handleReset:function(){this.$refs.searchForm.resetFields(),this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.getDataList()},changeSort:function(t){this.searchForm.sort=t.key,this.searchForm.order=t.order,"normal"==t.order&&(this.searchForm.order=""),this.getDataList()},showSelect:function(t){this.selectList=t},clearSelectAll:function(){this.$refs.table.selectAll(!1)},add:function(){this.modalType=0,this.modalTitle="添加",this.$refs.form.resetFields(),this.modalVisible=!0},edit:function(t){for(var e in this.modalType=1,this.modalTitle="编辑",this.$refs.form.resetFields(),t)null==t[e]&&(t[e]="");var a=JSON.stringify(t),s=JSON.parse(a);this.form=s,this.modalVisible=!0},handelSubmit:function(){var t=this;this.$refs.form.validate((function(e){e&&(t.submitLoading=!0,0==t.modalType?(delete t.form.id,delete t.form.status,t.submitLoading=!1,t.$Message.success("操作成功"),t.modalVisible=!1):1==t.modalType&&(t.submitLoading=!1,t.$Message.success("操作成功"),t.modalVisible=!1))}))},remove:function(t){var e=this;this.$Modal.confirm({title:"确认删除",content:"您确认要删除 "+t.name+" ?",loading:!0,onOk:function(){e.$Message.success("操作成功"),e.clearSelectAll(),e.$Modal.remove(),e.getDataList()}})},delAll:function(){var t=this;this.selectList.length<=0?this.$Message.warning("您还未选择要删除的数据"):this.$Modal.confirm({title:"确认删除",content:"您确认要删除所选的 "+this.selectList.length+" 条数据?",loading:!0,onOk:function(){var e="";t.selectList.forEach((function(t){e+=t.id+","})),e=e.substring(0,e.length-1),t.$Message.success("操作成功"),t.$Modal.remove(),t.clearSelectAll(),t.getDataList()}})}},mounted:function(){var t=document.documentElement.clientHeight;this.maxHeight=Number(t-287)+"px",this.init()}},r=n,o=(a("5ab0"),a("2877")),l=Object(o["a"])(r,s,i,!1,null,null,null);e["default"]=l.exports}}]);