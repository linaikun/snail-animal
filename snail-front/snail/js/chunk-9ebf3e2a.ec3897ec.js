(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9ebf3e2a"],{"013f":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"search"},[n("Card",[n("Row",{directives:[{name:"show",rawName:"v-show",value:e.openSearch,expression:"openSearch"}],nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch(t)}}},[n("Form",{ref:"searchForm",attrs:{model:e.searchForm,inline:"","label-width":70}},[n("FormItem",{attrs:{label:"模型名称",prop:"name"}},[n("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入名称",clearable:""},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),n("FormItem",{attrs:{label:"标识Key",prop:"modelKey"}},[n("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入标识",clearable:""},model:{value:e.searchForm.modelKey,callback:function(t){e.$set(e.searchForm,"modelKey",t)},expression:"searchForm.modelKey"}})],1),n("FormItem",{staticClass:"br",staticStyle:{"margin-left":"-35px"}},[n("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:e.handleSearch}},[e._v("搜索")]),n("Button",{on:{click:e.handleReset}},[e._v("重置")])],1)],1)],1),n("Row",{staticClass:"operation"},[n("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:e.add}},[e._v("添加空白模型")]),n("Button",{attrs:{icon:"md-trash"},on:{click:e.delAll}},[e._v("批量删除")]),n("Button",{attrs:{icon:"md-refresh"},on:{click:e.getDataList}},[e._v("刷新")]),n("Button",{attrs:{type:"dashed"},on:{click:function(t){e.openSearch=!e.openSearch}}},[e._v(e._s(e.openSearch?"关闭搜索":"开启搜索"))]),n("Button",{attrs:{type:"dashed"},on:{click:function(t){e.openTip=!e.openTip}}},[e._v(e._s(e.openTip?"关闭提示":"开启提示"))])],1),n("Row",{directives:[{name:"show",rawName:"v-show",value:e.openTip,expression:"openTip"}]},[n("Alert",{attrs:{"show-icon":""}},[e._v(" 已选择 "),n("span",{staticClass:"select-count"},[e._v(e._s(e.selectList.length))]),e._v(" 项 "),n("a",{staticClass:"select-clear",on:{click:e.clearSelectAll}},[e._v("清空")])])],1),n("Row",[n("Table",{ref:"table",attrs:{loading:e.loading,border:"",columns:e.columns,data:e.data,sortable:"custom"},on:{"on-sort-change":e.changeSort,"on-selection-change":e.showSelect}})],1),n("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[n("Page",{attrs:{current:e.searchForm.pageNumber,total:e.total,"page-size":e.searchForm.pageSize,"page-size-opts":[10,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}})],1)],1),n("Modal",{attrs:{title:e.modalTitle,"mask-closable":!1,width:500},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[n("Form",{ref:"form",attrs:{model:e.form,"label-width":80,rules:e.formValidate}},[n("FormItem",{attrs:{label:"名称",prop:"name"}},[n("Input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("FormItem",{attrs:{label:"标识Key",prop:"modelKey"}},[n("Input",{model:{value:e.form.modelKey,callback:function(t){e.$set(e.form,"modelKey",t)},expression:"form.modelKey"}})],1),n("FormItem",{attrs:{label:"备注",prop:"description"}},[n("Input",{model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"text"},on:{click:e.handelCancel}},[e._v("取消")]),n("Button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:e.handelSubmit}},[e._v("提交")])],1)],1),n("Modal",{staticClass:"modeler",attrs:{closable:!1,"mask-closable":!1,"footer-hide":"",fullscreen:""},on:{"on-cancel":e.handleClose},model:{value:e.showModeler,callback:function(t){e.showModeler=t},expression:"showModeler"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("div",{staticClass:"ivu-modal-header-inner"},[e._v("Activiti工作流在线流程设计编辑")]),n("a",{staticClass:"ivu-modal-close",on:{click:e.handleClose}},[n("Icon",{staticClass:"ivu-icon-ios-close",attrs:{type:"ios-close",size:"31"}})],1)]),n("div",{staticStyle:{position:"relative",height:"100%"}},[n("iframe",{attrs:{id:"iframe",src:e.modelerUrl,frameborder:"0",width:"100%",height:"100%",scrolling:"auto"}}),e.modelerLoading?n("Spin",{attrs:{fix:"",size:"large"}}):e._e()],1)])],1)},r=[],c=n("81c1"),i=n("365c"),a={name:"model-manage",data:function(){var e=this;return{openSearch:!0,openTip:!0,showModeler:!1,modelerLoading:!1,domain:"",modelerUrl:"",loading:!0,selectList:[],searchForm:{name:"",modelKey:"",pageNumber:1,pageSize:10,sort:"createTime",order:"desc"},modalType:0,modalVisible:!1,modalTitle:"",form:{name:"",modelKey:"",description:""},formValidate:{name:[{required:!0,message:"不能为空",trigger:"change"}],modelKey:[{required:!0,message:"不能为空",trigger:"change"}]},submitLoading:!1,columns:[{type:"selection",width:60,align:"center",fixed:"left"},{type:"index",width:60,align:"center",fixed:"left"},{title:"名称",key:"name",minWidth:180,sortable:!0,fixed:"left"},{title:"标识Key",key:"modelKey",minWidth:150,sortable:!0},{title:"备注描述",key:"description",minWidth:150,sortable:!0},{title:"版本",key:"version",width:130,align:"center",sortable:!0,render:function(e,t){var n="";return t.row.version&&(n="v."+t.row.version),e("div",n)}},{title:"创建时间",key:"createTime",width:180,sortable:!0,sortType:"desc"},{title:"更新时间",key:"updateTime",width:180,sortable:!0},{title:"操作",key:"action",width:300,align:"center",fixed:"right",render:function(t,n){return t("div",[t("a",{on:{click:function(){e.edit(n.row)}}},"在线设计"),t("Divider",{props:{type:"vertical"}}),t("a",{on:{click:function(){e.deploy(n.row)}}},"部署发布"),t("Divider",{props:{type:"vertical"}}),t("a",{on:{click:function(){e.export(n.row)}}},"导出XML"),t("Divider",{props:{type:"vertical"}}),t("a",{on:{click:function(){e.remove(n.row)}}},"删除")])}}],data:[],total:0}},methods:{init:function(){this.getDataList(),this.getDomain()},getDomain:function(){var e=this;Object(i["ac"])().then((function(t){t.result&&(e.domain=t.result.domain)}))},changePage:function(e){this.searchForm.pageNumber=e,this.getDataList(),this.clearSelectAll()},changePageSize:function(e){this.searchForm.pageSize=e,this.getDataList()},getDataList:function(){var e=this;this.loading=!0,Object(c["F"])(this.searchForm).then((function(t){e.loading=!1,t.success&&(e.data=t.result.content,e.total=t.result.totalElements,0==e.data.length&&e.searchForm.pageNumber>1&&(e.searchForm.pageNumber-=1,e.getDataList()))}))},handleSearch:function(){this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.getDataList()},handleReset:function(){this.$refs.searchForm.resetFields(),this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.getDataList()},changeSort:function(e){this.searchForm.sort=e.key,this.searchForm.order=e.order,"normal"==e.order&&(this.searchForm.order=""),this.getDataList()},handelCancel:function(){this.modalVisible=!1},handelSubmit:function(){var e=this;this.$refs.form.validate((function(t){t&&(e.submitLoading=!0,0==e.modalType&&(delete e.form.id,Object(c["c"])(e.form).then((function(t){e.submitLoading=!1,t.success&&(e.$Message.success("操作成功"),e.getDataList(),e.modalVisible=!1)}))))}))},add:function(){this.modalType=0,this.modalTitle="添加空白模型",this.$refs.form.resetFields(),this.modalVisible=!0},edit:function(e){var t=this;if(this.domain){this.modelerUrl="".concat(this.domain,"/modeler.html?modelId=").concat(e.id,"&accessToken=").concat(this.getStore("accessToken"),"&time=").concat(new Date),this.showModeler=!0,this.modelerLoading=!0;var n=this,o=document.getElementById("iframe");o.attachEvent?o.attachEvent("onload",(function(){n.modelerLoading=!1})):o.onload=function(){n.modelerLoading=!1}}else this.$Modal.confirm({title:"您还未配置访问域名",content:"您还未配置应用部署访问域名，是否现在立即去配置?",onOk:function(){t.$router.push({name:"setting",query:{name:"other"}})}})},handleClose:function(){var e=this;this.$Modal.confirm({title:"确认关闭",content:"请记得点击左上角保存按钮，确定关闭编辑器?",onOk:function(){e.getDataList(),e.showModeler=!1}})},deploy:function(e){var t=this,n=this;this.$Modal.confirm({title:"确认部署发布",content:"您确认要部署发布模型 "+e.name+" ?",loading:!0,onOk:function(){Object(c["s"])(e.id).then((function(e){t.$Modal.remove(),e.success&&setTimeout((function(){n.showJump()}),300)}))}})},showJump:function(){var e=this;this.$Modal.confirm({title:"部署发布成功",content:"建议立即去分配审批节点人员并编辑流程信息，是否立即跳转查看该流程?",onOk:function(){e.$router.push({name:"process-manage"})}})},export:function(e){window.open(c["x"]+e.id+"?accessToken="+this.getStore("accessToken"))},remove:function(e){var t=this;this.$Modal.confirm({title:"确认删除",content:"您确认要删除 "+e.name+" ?",loading:!0,onOk:function(){Object(c["o"])({ids:e.id}).then((function(e){t.$Modal.remove(),e.success&&(t.clearSelectAll(),t.$Message.success("操作成功"),t.getDataList())}))}})},showSelect:function(e){this.selectList=e},clearSelectAll:function(){this.$refs.table.selectAll(!1)},delAll:function(){var e=this;this.selectList.length<=0?this.$Message.warning("您还未选择要删除的数据"):this.$Modal.confirm({title:"确认删除",content:"您确认要删除所选的 "+this.selectList.length+" 条数据?",loading:!0,onOk:function(){var t="";e.selectList.forEach((function(e){t+=e.id+","})),t=t.substring(0,t.length-1),Object(c["o"])({ids:t}).then((function(t){e.$Modal.remove(),t.success&&(e.$Message.success("操作成功"),e.clearSelectAll(),e.getDataList())}))}})}},mounted:function(){this.init()},watch:{$route:function(e,t){"model-manage"==e.name&&this.getDataList()}}},s=a,l=(n("b0b7"),n("2877")),u=Object(l["a"])(s,o,r,!1,null,null,null);t["default"]=u.exports},"81c1":function(e,t,n){"use strict";n.d(t,"x",(function(){return r})),n.d(t,"r",(function(){return c})),n.d(t,"y",(function(){return i})),n.d(t,"D",(function(){return a})),n.d(t,"F",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"s",(function(){return u})),n.d(t,"o",(function(){return d})),n.d(t,"J",(function(){return f})),n.d(t,"U",(function(){return m})),n.d(t,"X",(function(){return h})),n.d(t,"i",(function(){return b})),n.d(t,"K",(function(){return p})),n.d(t,"v",(function(){return g})),n.d(t,"w",(function(){return y})),n.d(t,"p",(function(){return v})),n.d(t,"L",(function(){return k})),n.d(t,"B",(function(){return O})),n.d(t,"I",(function(){return w})),n.d(t,"C",(function(){return j})),n.d(t,"G",(function(){return F})),n.d(t,"H",(function(){return S})),n.d(t,"V",(function(){return T})),n.d(t,"q",(function(){return L})),n.d(t,"j",(function(){return x})),n.d(t,"T",(function(){return B})),n.d(t,"t",(function(){return M})),n.d(t,"M",(function(){return P})),n.d(t,"k",(function(){return I})),n.d(t,"P",(function(){return C})),n.d(t,"Q",(function(){return $})),n.d(t,"z",(function(){return D})),n.d(t,"e",(function(){return _})),n.d(t,"f",(function(){return K})),n.d(t,"g",(function(){return N})),n.d(t,"n",(function(){return z})),n.d(t,"N",(function(){return A})),n.d(t,"O",(function(){return V})),n.d(t,"a",(function(){return R})),n.d(t,"u",(function(){return E})),n.d(t,"l",(function(){return U})),n.d(t,"R",(function(){return J})),n.d(t,"A",(function(){return q})),n.d(t,"d",(function(){return H})),n.d(t,"S",(function(){return W})),n.d(t,"h",(function(){return X})),n.d(t,"m",(function(){return G})),n.d(t,"E",(function(){return Q})),n.d(t,"b",(function(){return Y})),n.d(t,"W",(function(){return Z}));var o=n("7f80"),r="/snail/actModel/export/",c="/snail/actModel/deployByFile",i="/snail/actProcess/export",a="/snail/actProcess/getHighlightImg/",s=function(e){return Object(o["b"])("/actModel/getByCondition",e)},l=function(e){return Object(o["e"])("/actModel/add",e)},u=function(e,t){return Object(o["b"])("/actModel/deploy/".concat(e),t)},d=function(e){return Object(o["e"])("/actModel/delByIds",e)},f=function(e){return Object(o["b"])("/actProcess/getByCondition",e)},m=function(e){return Object(o["e"])("/actProcess/updateInfo",e)},h=function(e){return Object(o["e"])("/actProcess/updateStatus",e)},b=function(e,t){return Object(o["b"])("/actProcess/convertToModel/".concat(e),t)},p=function(e,t){return Object(o["b"])("/actProcess/getProcessNode/".concat(e),t)},g=function(e){return Object(o["e"])("/actProcess/editNodeUser",e)},y=function(e){return Object(o["e"])("/actProcess/editStartUser",e)},v=function(e){return Object(o["e"])("/actProcess/delByIds",e)},k=function(e){return Object(o["b"])("/actProcess/getRunningProcess",e)},O=function(e){return Object(o["b"])("/actProcess/getFinishedProcess",e)},w=function(e,t){return Object(o["b"])("/actProcess/getByKey/".concat(e),t)},j=function(e,t){return Object(o["b"])("/actProcess/getFirstNode/".concat(e),t)},F=function(e,t,n){return Object(o["b"])("/actProcess/getNextNode/".concat(e,"/").concat(t),n)},S=function(e,t){return Object(o["b"])("/actProcess/getNode/".concat(e),t)},T=function(e){return Object(o["e"])("/actProcess/updateInsStatus",e)},L=function(e){return Object(o["e"])("/actProcess/delInsByIds",e)},x=function(e){return Object(o["e"])("/actProcess/delHistoricInsByIds",e)},B=function(e){return Object(o["b"])("/actTask/todoList",e)},M=function(e){return Object(o["b"])("/actTask/doneList",e)},P=function(e,t){return Object(o["b"])("/actTask/historicFlow/".concat(e),t)},I=function(e){return Object(o["e"])("/actTask/delegate",e)},C=function(e){return Object(o["e"])("/actTask/pass",e)},$=function(e){return Object(o["e"])("/actTask/passAll",e)},D=function(e,t){return Object(o["b"])("/actTask/getBackList/".concat(e),t)},_=function(e){return Object(o["e"])("/actTask/back",e)},K=function(e){return Object(o["e"])("/actTask/backAll",e)},N=function(e){return Object(o["e"])("/actTask/backToTask",e)},z=function(e){return Object(o["e"])("/actTask/deleteHistoric",e)},A=function(e){return Object(o["b"])("/actCategory/getByParentId/0",e)},V=function(e,t){return Object(o["b"])("/actCategory/getByParentId/".concat(e),t)},R=function(e){return Object(o["e"])("/actCategory/add",e)},E=function(e){return Object(o["e"])("/actCategory/edit",e)},U=function(e){return Object(o["e"])("/actCategory/delByIds",e)},J=function(e){return Object(o["b"])("/actCategory/search",e)},q=function(e){return Object(o["b"])("/actBusiness/getByCondition",e)},H=function(e){return Object(o["e"])("/actBusiness/apply",e)},W=function(e){return Object(o["e"])("/actBusiness/start",e)},X=function(e){return Object(o["e"])("/actBusiness/cancel",e)},G=function(e){return Object(o["e"])("/actBusiness/delByIds",e)},Q=function(e,t){return Object(o["b"])("/leave/get/".concat(e),t)},Y=function(e){return Object(o["e"])("/leave/add",e)},Z=function(e){return Object(o["f"])("/leave/update",e)}},b0b7:function(e,t,n){"use strict";n("f056")},f056:function(e,t,n){}}]);