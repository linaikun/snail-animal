(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d44dda44"],{b46b:function(e,t,s){},d254:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"search"},[s("Card",[s("Row",{staticClass:"operation"},[s("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:e.addRole}},[e._v("添加新任务")]),s("Button",{attrs:{icon:"md-trash"},on:{click:e.delAll}},[e._v("批量删除")]),s("Button",{attrs:{icon:"md-refresh"},on:{click:e.init}},[e._v("刷新")]),s("Button",{attrs:{type:"dashed"},on:{click:function(t){e.openTip=!e.openTip}}},[e._v(e._s(e.openTip?"关闭提示":"开启提示"))]),s("Input",{staticStyle:{width:"250px"},attrs:{suffix:"ios-search",placeholder:"输入关键词搜索",clearable:""},on:{"on-change":e.getDataList},model:{value:e.searchForm.key,callback:function(t){e.$set(e.searchForm,"key",t)},expression:"searchForm.key"}})],1),s("Row",{directives:[{name:"show",rawName:"v-show",value:e.openTip,expression:"openTip"}]},[s("Alert",{attrs:{"show-icon":""}},[e._v(" 已选择 "),s("span",{staticClass:"select-count"},[e._v(e._s(e.selectList.length))]),e._v(" 项 "),s("a",{staticClass:"select-clear",on:{click:e.clearSelectAll}},[e._v("清空")])])],1),s("Row",[s("Table",{ref:"table",attrs:{loading:e.loading,border:"",columns:e.columns,data:e.data,sortable:"custom"},on:{"on-sort-change":e.changeSort,"on-selection-change":e.changeSelect}})],1),s("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[s("Page",{attrs:{current:e.searchForm.pageNumber,total:e.total,"page-size":e.searchForm.pageSize,"page-size-opts":[10,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}})],1)],1),s("Modal",{attrs:{draggable:"",title:e.modalTitle,"mask-closable":!1,width:500},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[s("Form",{ref:"form",attrs:{model:e.form,"label-width":100,rules:e.formValidate}},[s("FormItem",{attrs:{label:"任务类引用路径",prop:"jobClassName"}},[s("Input",{attrs:{placeholder:"例如 cn.snail.snail.quartz.jobs.Job",clearable:""},model:{value:e.form.jobClassName,callback:function(t){e.$set(e.form,"jobClassName",t)},expression:"form.jobClassName"}})],1),s("FormItem",{staticStyle:{"margin-bottom":"5px"},attrs:{label:"cron表达式",prop:"cronExpression"}},[s("Input",{attrs:{clearable:""},model:{value:e.form.cronExpression,callback:function(t){e.$set(e.form,"cronExpression",t)},expression:"form.cronExpression"}}),s("a",{attrs:{target:"_blank",href:"https://www.pppet.net/"}},[s("Icon",{staticStyle:{margin:"0 3px 3px 0"},attrs:{type:"md-arrow-dropright-circle",size:"16"}}),e._v("在线cron表达式生成 ")],1)],1),s("FormItem",{attrs:{label:"参数",prop:"parameter"}},[s("Input",{model:{value:e.form.parameter,callback:function(t){e.$set(e.form,"parameter",t)},expression:"form.parameter"}})],1),s("FormItem",{attrs:{label:"备注",prop:"description"}},[s("Input",{model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{type:"text"},on:{click:e.cancelSubmit}},[e._v("取消")]),s("Button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:e.handleSubmit}},[e._v("保存并执行")])],1)],1)],1)},o=[],i=s("365c"),r={name:"quartz-manage",data:function(){var e=this;return{openTip:!0,loading:!0,sortColumn:"createTime",sortType:"desc",modalType:0,modalVisible:!1,modalTitle:"",searchForm:{pageNumber:1,pageSize:10,sort:"createTime",order:"desc",key:""},form:{id:"",jobClassName:"",cronExpression:"",paramter:"",description:""},formValidate:{jobClassName:[{required:!0,message:"任务类名不能为空",trigger:"change"}],cronExpression:[{required:!0,message:"cron表达式不能为空",trigger:"change"}]},submitLoading:!1,selectList:[],columns:[{type:"selection",width:60,align:"center"},{type:"index",width:60,align:"center"},{title:"任务类",key:"jobClassName",sortable:!0,minWidth:300},{title:"cron表达式",key:"cronExpression",sortable:!0,width:150},{title:"参数",key:"parameter",sortable:!0,minWidth:180},{title:"备注",key:"description",sortable:!0,minWidth:180},{title:"状态",key:"status",align:"center",width:130,render:function(e,t){return 0==t.row.status?e("div",[e("Badge",{props:{status:"success",text:"执行中"}})]):-1==t.row.status?e("div",[e("Badge",{props:{status:"error",text:"已停止"}})]):void 0},filters:[{label:"执行中",value:0},{label:"已停止",value:-1}],filterMultiple:!1,filterMethod:function(e,t){return 0==e?0==t.status:-1==e?-1==t.status:void 0}},{title:"创建时间",key:"createTime",width:170,sortable:!0,sortType:"desc"},{title:"操作",key:"action",align:"center",fixed:"right",width:220,render:function(t,s){var a="";return a=0==s.row.status?t("a",{on:{click:function(){e.pause(s.row)}}},"暂停"):t("a",{on:{click:function(){e.resume(s.row)}}},"恢复执行"),t("div",[a,t("Divider",{props:{type:"vertical"}}),t("a",{on:{click:function(){e.edit(s.row)}}},"编辑"),t("Divider",{props:{type:"vertical"}}),t("a",{on:{click:function(){e.remove(s.row)}}},"删除")])}}],data:[],total:0}},methods:{init:function(){this.getDataList()},changePage:function(e){this.searchForm.pageNumber=e,this.getDataList(),this.clearSelectAll()},changePageSize:function(e){this.searchForm.pageSize=e,this.getDataList()},changeSort:function(e){this.searchForm.sort=e.key,this.searchForm.order=e.order,"normal"==e.order&&(this.searchForm.order=""),this.getDataList()},getDataList:function(){var e=this;this.loading=!0,Object(i["bc"])(this.searchForm).then((function(t){e.loading=!1,t.success&&(e.data=t.result.content,e.total=t.result.totalElements,0==e.data.length&&e.searchForm.pageNumber>1&&(e.searchForm.pageNumber-=1,e.getDataList()))}))},cancelSubmit:function(){this.modalVisible=!1},handleSubmit:function(){var e=this;this.$refs.form.validate((function(t){t&&(0==e.modalType?(e.submitLoading=!0,Object(i["l"])(e.form).then((function(t){e.submitLoading=!1,t.success&&(e.$Message.success("操作成功"),e.getDataList(),e.modalVisible=!1)}))):(e.submitLoading=!0,Object(i["mb"])(e.form).then((function(t){e.submitLoading=!1,t.success&&(e.$Message.success("操作成功"),e.getDataList(),e.modalVisible=!1)}))))}))},addRole:function(){this.modalType=0,this.modalTitle="添加任务",this.$refs.form.resetFields(),this.form={paramter:"",description:""},this.modalVisible=!0},edit:function(e){for(var t in this.modalType=1,this.modalTitle="编辑任务",this.$refs.form.resetFields(),e)null==e[t]&&(e[t]="");var s=JSON.stringify(e),a=JSON.parse(s);this.form=a,this.modalVisible=!0},pause:function(e){var t=this;this.$Modal.confirm({title:"确认停止",content:"您确认要停止任务 "+e.jobClassName+" ?",loading:!0,onOk:function(){Object(i["xc"])(e).then((function(e){t.$Modal.remove(),e.success&&(t.$Message.success("操作成功"),t.getDataList())}))}})},resume:function(e){var t=this;this.$Modal.confirm({title:"确认恢复",content:"您确认要恢复任务 "+e.jobClassName+" ?",loading:!0,onOk:function(){Object(i["Gc"])(e).then((function(e){t.$Modal.remove(),e.success&&(t.$Message.success("操作成功"),t.getDataList())}))}})},remove:function(e){var t=this;this.$Modal.confirm({title:"确认删除",content:"您确认要删除任务 "+e.jobClassName+" ?",loading:!0,onOk:function(){Object(i["M"])({ids:e.id}).then((function(e){t.$Modal.remove(),e.success&&(t.$Message.success("操作成功"),t.clearSelectAll(),t.getDataList())}))}})},clearSelectAll:function(){this.$refs.table.selectAll(!1)},changeSelect:function(e){this.selectList=e},delAll:function(){var e=this;this.selectList.length<=0?this.$Message.warning("您还未选择要删除的数据"):this.$Modal.confirm({title:"确认删除",content:"您确认要删除所选的 "+this.selectList.length+" 条数据?",loading:!0,onOk:function(){var t="";e.selectList.forEach((function(e){t+=e.id+","})),t=t.substring(0,t.length-1),Object(i["M"])({ids:t}).then((function(t){e.$Modal.remove(),t.success&&(e.$Message.success("删除成功"),e.clearSelectAll(),e.getDataList())}))}})}},mounted:function(){this.init()}},n=r,l=(s("edda"),s("2877")),c=Object(l["a"])(n,a,o,!1,null,null,null);t["default"]=c.exports},edda:function(e,t,s){"use strict";s("b46b")}}]);