(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dc5ba010"],{"1e12":function(e,t,a){"use strict";a("9144")},"55a5":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"file-upload-wrap"},[a("Upload",{directives:[{name:"show",rawName:"v-show",value:e.showUpload,expression:"showUpload"}],staticClass:"file-upload",attrs:{action:e.uploadFileUrl,headers:e.accessToken,"on-success":e.handleSuccess,"on-error":e.handleError,format:e.format,accept:e.accept,"max-size":1024*e.maxSize,"on-format-error":e.handleFormatError,"on-exceeded-size":e.handleMaxSize,"before-upload":e.beforeUpload,"show-upload-list":!1}},[a("Button",{attrs:{loading:e.loading,type:e.type,ghost:e.ghost,shape:e.shape,size:e.size,disabled:e.disabled,icon:e.icon}},[e._v(e._s(e.text))])],1),a("Tooltip",{attrs:{transfer:"",content:e.title,placement:"top"}},[a("a",{on:{click:e.download}},[e._v(e._s(e.currentValue.name))])])],1)])},i=[],s=a("365c"),o={name:"fileUpload",props:{value:Object,size:String,type:String,ghost:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},shape:String,icon:{type:String,default:"ios-cloud-upload-outline"},text:{type:String,default:"上传文件"},maxSize:{type:Number,default:5},accept:String,showUpload:{type:Boolean,default:!0}},computed:{format:function(){if(this.accept){var e=[];return this.accept.split(",").forEach((function(t){e.push(t.replace(".","").replace(" ",""))})),e}return[]}},data:function(){return{accessToken:{},title:"点击下载",currentValue:this.value,loading:!1,uploadFileUrl:s["Xc"]}},methods:{init:function(){this.accessToken={accessToken:this.getStore("accessToken")}},download:function(){this.currentValue.url?window.open(this.currentValue.url+"?attname=&response-content-type=application/octet-stream&filename="+this.currentValue.name):this.$Message.error("无效的链接")},handleFormatError:function(e){this.loading=!1,this.$Notice.warning({title:"不支持的文件格式",desc:"所选文件‘ "+e.name+" ’格式不正确, 请选择 "+this.accept+" 格式文件"})},handleMaxSize:function(e){this.loading=!1,this.$Notice.warning({title:"文件大小过大",desc:"所选文件‘ "+e.name+" ’大小过大, 不得超过 "+this.maxSize+"M."})},beforeUpload:function(){return this.loading=!0,!0},handleSuccess:function(e,t){this.loading=!1,e.success?(this.currentValue={url:e.result,name:t.name,size:t.size},this.title="点击下载("+(1*t.size/1048576).toFixed(2)+" MB)",this.$emit("input",this.currentValue),this.$emit("on-change",this.currentValue)):this.$Message.error(e.message)},handleError:function(e,t,a){this.loading=!1,this.$Message.error(e.toString())},handleChange:function(e){this.$emit("input",this.currentValue),this.$emit("on-change",this.currentValue)},setCurrentValue:function(e){e!==this.currentValue&&(this.currentValue=e,this.currentValue.size?this.title="点击下载("+(1*this.currentValue.size/1048576).toFixed(2)+" MB)":this.title="点击下载",this.$emit("on-change",this.currentValue))}},watch:{value:function(e){this.setCurrentValue(e)}},mounted:function(){this.init()}},r=o,c=(a("1e12"),a("2877")),l=Object(c["a"])(r,n,i,!1,null,"6a2cb9fc",null);t["default"]=l.exports},9144:function(e,t,a){}}]);