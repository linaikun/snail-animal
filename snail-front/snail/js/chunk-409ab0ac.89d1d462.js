(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-409ab0ac"],{"0808":function(t,e,i){},"358a":function(t,e,i){},"5ea1":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload-thumb"},[i("vuedraggable",{staticClass:"list-group",attrs:{list:t.uploadList,disabled:!t.draggable||!t.multiple,animation:200,"ghost-class":"thumb-ghost"},on:{end:t.onEnd}},t._l(t.uploadList,(function(e,s){return i("div",{key:s,staticClass:"upload-list",style:{width:"calc("+t.width+" + 2px)",height:"calc("+t.height+" + 2px)",lineHeight:t.height}},["finished"==e.status?i("div",[i("img",{style:{height:t.height},attrs:{src:e.url}}),i("div",{staticClass:"upload-list-cover"},[i("Icon",{attrs:{type:"ios-eye-outline"},on:{click:function(i){return t.handleView(e.url,s)}}}),i("Icon",{directives:[{name:"show",rawName:"v-show",value:!t.preview,expression:"!preview"}],attrs:{type:"ios-trash-outline"},on:{click:function(i){return t.handleRemove(e)}}})],1)]):i("div",[e.showProgress?i("Progress",{attrs:{percent:e.percentage,"hide-info":""}}):t._e()],1)])})),0),i("Upload",{directives:[{name:"show",rawName:"v-show",value:!t.preview,expression:"!preview"}],ref:"upload",staticClass:"upload-btn",style:{width:t.width},attrs:{multiple:t.multiple,"show-upload-list":!1,"on-success":t.handleSuccess,"on-error":t.handleError,format:t.format,accept:t.accept,"max-size":1024*t.maxSize,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,"before-upload":t.handleBeforeUpload,type:"drag",action:t.uploadFileUrl,headers:t.accessToken}},[i("div",{staticClass:"upload-camera",style:{width:t.width,height:t.height,lineHeight:t.height}},[i("Icon",{attrs:{type:"md-camera",size:"20"}})],1)])],1)},a=[],n=(i("0808"),i("6a37")),o=i.n(n),l=i("365c"),r=i("289a"),u=i.n(r);function h(t){return h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}var c={name:"uploadPicThumb",components:{vuedraggable:u.a},props:{value:{type:null},preview:{type:Boolean,default:!1},draggable:{type:Boolean,default:!0},multiple:{type:Boolean,default:!0},maxSize:{type:Number,default:5},limit:{type:Number,default:10},width:{type:String,default:"60px"},height:{type:String,default:"60px"},accept:{type:String,default:".jpg, .jpeg, .png, .gif"}},computed:{format:function(){if(this.accept){var t=[];return this.accept.split(",").forEach((function(e){t.push(e.replace(".","").replace(" ",""))})),t}return[]}},data:function(){return{accessToken:{},uploadFileUrl:l["Xc"],uploadList:[]}},methods:{onEnd:function(){this.returnValue()},init:function(){this.setData(this.value,!0),this.accessToken={accessToken:this.getStore("accessToken")}},handleView:function(t,e){var i=new Image;i.src=t;var s=new o.a(i,{hidden:function(){s.destroy()}});s.show()},handleRemove:function(t){var e=this.uploadList;this.uploadList.splice(e.indexOf(t),1),this.returnValue()},handleSuccess:function(t,e){t.success?(e.url=t.result,!this.multiple&&this.uploadList.length>0&&this.uploadList.splice(0,1),this.uploadList.push(e),this.returnValue()):this.$Message.error(t.message)},handleError:function(t,e,i){this.$Message.error(t.toString())},handleFormatError:function(t){this.$Notice.warning({title:"不支持的文件格式",desc:"所选文件‘ "+t.name+" ’格式不正确, 请选择 "+this.accept+" 图片格式文件"})},handleMaxSize:function(t){this.$Notice.warning({title:"文件大小过大",desc:"所选文件‘ "+t.name+" ’大小过大, 不得超过 "+this.maxSize+"M."})},handleBeforeUpload:function(){return!(this.multiple&&this.uploadList.length>=this.limit)||(this.$Message.warning("最多只能上传"+this.limit+"张图片"),!1)},returnValue:function(){if(!this.uploadList||this.uploadList.length<1)this.multiple?(this.$emit("input",[]),this.$emit("on-change",[])):(this.$emit("input",""),this.$emit("on-change",""));else if(this.multiple){var t=[];this.uploadList.forEach((function(e){t.push(e.url)})),this.$emit("input",t),this.$emit("on-change",t)}else{var e=this.uploadList[0].url;this.$emit("input",e),this.$emit("on-change",e)}},setData:function(t,e){var i=this;if("string"==typeof t){if(this.multiple)return void this.$Message.warning("多张上传仅支持数组数据类型");if(!t)return;this.uploadList=[];var s={url:t,status:"finished"};this.uploadList.push(s),this.$emit("on-change",t)}else if("object"==h(t)){if(!this.multiple)return void this.$Message.warning("单张上传仅支持字符串数据类型");if(this.uploadList=[],t.length>this.limit){for(var a=0;a<this.limit;a++){var n={url:t[a],status:"finished"};this.uploadList.push(n)}this.$emit("on-change",t.slice(0,this.limit)),e&&this.$emit("input",t.slice(0,this.limit)),this.$Message.warning("最多只能上传"+this.limit+"张图片")}else t.forEach((function(t){var e={url:t,status:"finished"};i.uploadList.push(e)})),this.$emit("on-change",t)}}},watch:{value:function(t){this.setData(t)}},mounted:function(){this.init()}},p=c,d=(i("c092"),i("2877")),f=Object(d["a"])(p,s,a,!1,null,null,null);e["default"]=f.exports},c092:function(t,e,i){"use strict";i("358a")}}]);