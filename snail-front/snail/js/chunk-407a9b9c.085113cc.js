(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-407a9b9c"],{"81c1":function(t,e,n){"use strict";n.d(e,"x",(function(){return s})),n.d(e,"r",(function(){return i})),n.d(e,"y",(function(){return o})),n.d(e,"D",(function(){return c})),n.d(e,"F",(function(){return u})),n.d(e,"c",(function(){return a})),n.d(e,"s",(function(){return l})),n.d(e,"o",(function(){return d})),n.d(e,"J",(function(){return f})),n.d(e,"U",(function(){return m})),n.d(e,"X",(function(){return b})),n.d(e,"i",(function(){return p})),n.d(e,"K",(function(){return g})),n.d(e,"v",(function(){return h})),n.d(e,"w",(function(){return y})),n.d(e,"p",(function(){return v})),n.d(e,"L",(function(){return O})),n.d(e,"B",(function(){return j})),n.d(e,"I",(function(){return w})),n.d(e,"C",(function(){return k})),n.d(e,"G",(function(){return I})),n.d(e,"H",(function(){return B})),n.d(e,"V",(function(){return M})),n.d(e,"q",(function(){return P})),n.d(e,"j",(function(){return $})),n.d(e,"T",(function(){return x})),n.d(e,"t",(function(){return L})),n.d(e,"M",(function(){return C})),n.d(e,"k",(function(){return S})),n.d(e,"P",(function(){return _})),n.d(e,"Q",(function(){return A})),n.d(e,"z",(function(){return N})),n.d(e,"e",(function(){return T})),n.d(e,"f",(function(){return F})),n.d(e,"g",(function(){return V})),n.d(e,"n",(function(){return G})),n.d(e,"N",(function(){return E})),n.d(e,"O",(function(){return K})),n.d(e,"a",(function(){return D})),n.d(e,"u",(function(){return U})),n.d(e,"l",(function(){return H})),n.d(e,"R",(function(){return q})),n.d(e,"A",(function(){return J})),n.d(e,"d",(function(){return R})),n.d(e,"S",(function(){return z})),n.d(e,"h",(function(){return Q})),n.d(e,"m",(function(){return W})),n.d(e,"E",(function(){return X})),n.d(e,"b",(function(){return Y})),n.d(e,"W",(function(){return Z}));var r=n("7f80"),s="/snail/actModel/export/",i="/snail/actModel/deployByFile",o="/snail/actProcess/export",c="/snail/actProcess/getHighlightImg/",u=function(t){return Object(r["b"])("/actModel/getByCondition",t)},a=function(t){return Object(r["e"])("/actModel/add",t)},l=function(t,e){return Object(r["b"])("/actModel/deploy/".concat(t),e)},d=function(t){return Object(r["e"])("/actModel/delByIds",t)},f=function(t){return Object(r["b"])("/actProcess/getByCondition",t)},m=function(t){return Object(r["e"])("/actProcess/updateInfo",t)},b=function(t){return Object(r["e"])("/actProcess/updateStatus",t)},p=function(t,e){return Object(r["b"])("/actProcess/convertToModel/".concat(t),e)},g=function(t,e){return Object(r["b"])("/actProcess/getProcessNode/".concat(t),e)},h=function(t){return Object(r["e"])("/actProcess/editNodeUser",t)},y=function(t){return Object(r["e"])("/actProcess/editStartUser",t)},v=function(t){return Object(r["e"])("/actProcess/delByIds",t)},O=function(t){return Object(r["b"])("/actProcess/getRunningProcess",t)},j=function(t){return Object(r["b"])("/actProcess/getFinishedProcess",t)},w=function(t,e){return Object(r["b"])("/actProcess/getByKey/".concat(t),e)},k=function(t,e){return Object(r["b"])("/actProcess/getFirstNode/".concat(t),e)},I=function(t,e,n){return Object(r["b"])("/actProcess/getNextNode/".concat(t,"/").concat(e),n)},B=function(t,e){return Object(r["b"])("/actProcess/getNode/".concat(t),e)},M=function(t){return Object(r["e"])("/actProcess/updateInsStatus",t)},P=function(t){return Object(r["e"])("/actProcess/delInsByIds",t)},$=function(t){return Object(r["e"])("/actProcess/delHistoricInsByIds",t)},x=function(t){return Object(r["b"])("/actTask/todoList",t)},L=function(t){return Object(r["b"])("/actTask/doneList",t)},C=function(t,e){return Object(r["b"])("/actTask/historicFlow/".concat(t),e)},S=function(t){return Object(r["e"])("/actTask/delegate",t)},_=function(t){return Object(r["e"])("/actTask/pass",t)},A=function(t){return Object(r["e"])("/actTask/passAll",t)},N=function(t,e){return Object(r["b"])("/actTask/getBackList/".concat(t),e)},T=function(t){return Object(r["e"])("/actTask/back",t)},F=function(t){return Object(r["e"])("/actTask/backAll",t)},V=function(t){return Object(r["e"])("/actTask/backToTask",t)},G=function(t){return Object(r["e"])("/actTask/deleteHistoric",t)},E=function(t){return Object(r["b"])("/actCategory/getByParentId/0",t)},K=function(t,e){return Object(r["b"])("/actCategory/getByParentId/".concat(t),e)},D=function(t){return Object(r["e"])("/actCategory/add",t)},U=function(t){return Object(r["e"])("/actCategory/edit",t)},H=function(t){return Object(r["e"])("/actCategory/delByIds",t)},q=function(t){return Object(r["b"])("/actCategory/search",t)},J=function(t){return Object(r["b"])("/actBusiness/getByCondition",t)},R=function(t){return Object(r["e"])("/actBusiness/apply",t)},z=function(t){return Object(r["e"])("/actBusiness/start",t)},Q=function(t){return Object(r["e"])("/actBusiness/cancel",t)},W=function(t){return Object(r["e"])("/actBusiness/delByIds",t)},X=function(t,e){return Object(r["b"])("/leave/get/".concat(t),e)},Y=function(t){return Object(r["e"])("/leave/add",t)},Z=function(t){return Object(r["f"])("/leave/update",t)}},b7ed:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Modal",{attrs:{title:"提交申请","mask-closable":!1,width:500},model:{value:t.applyModalVisible,callback:function(e){t.applyModalVisible=e},expression:"applyModalVisible"}},[n("Form",{ref:"form",attrs:{model:t.form,"label-width":85,rules:t.formValidate}},[n("FormItem",{attrs:{label:"标题",prop:"title"}},[n("Input",{attrs:{placeholder:"请输入标题",clearable:""},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),n("FormItem",{directives:[{name:"show",rawName:"v-show",value:t.showAssign,expression:"showAssign"}],attrs:{label:"选择审批人",prop:"assignees",error:t.error}},[n("Select",{attrs:{placeholder:"请选择或输入搜索",filterable:"",clearable:"",multiple:"",loading:t.userLoading},model:{value:t.form.assignees,callback:function(e){t.$set(t.form,"assignees",e)},expression:"form.assignees"}},t._l(t.assigneeList,(function(e,r){return n("Option",{key:r,attrs:{value:e.id,label:e.nickname}},[n("span",{staticStyle:{"margin-right":"10px"}},[t._v(t._s(e.nickname))]),n("span",{staticStyle:{color:"#ccc"}},[t._v(t._s(e.username))])])})),1)],1),n("FormItem",{directives:[{name:"show",rawName:"v-show",value:t.isCustom,expression:"isCustom"}],attrs:{label:"自定义搜索选择审批人",prop:"assignees",error:t.error}},[n("Select",{attrs:{placeholder:"请输入用户名搜索选择用户",filterable:"",remote:"",multiple:"","remote-method":t.searchUser,loading:t.userLoading},model:{value:t.form.assignees,callback:function(e){t.$set(t.form,"assignees",e)},expression:"form.assignees"}},t._l(t.userList,(function(e,r){return n("Option",{key:r,attrs:{value:e.id,label:e.nickname}},[n("span",{staticStyle:{"margin-right":"10px"}},[t._v(t._s(e.nickname))]),n("span",{staticStyle:{color:"#ccc"}},[t._v(t._s(e.username))])])})),1)],1),n("FormItem",{directives:[{name:"show",rawName:"v-show",value:t.isGateway,expression:"isGateway"}],attrs:{label:"下一审批人"}},[n("span",[t._v("分支网关处暂不支持自定义选择下一审批人，将发送给下一节点所有人")])]),n("FormItem",{attrs:{label:"优先级",prop:"priority"}},[n("Select",{attrs:{placeholder:"请选择",clearable:""},model:{value:t.form.priority,callback:function(e){t.$set(t.form,"priority",e)},expression:"form.priority"}},t._l(t.dictPriority,(function(e,r){return n("Option",{key:r,attrs:{value:e.value}},[t._v(t._s(e.title))])})),1)],1),n("FormItem",{attrs:{label:"消息通知"}},[n("Checkbox",{model:{value:t.form.sendMessage,callback:function(e){t.$set(t.form,"sendMessage",e)},expression:"form.sendMessage"}},[t._v("站内消息通知")]),n("Checkbox",{model:{value:t.form.sendSms,callback:function(e){t.$set(t.form,"sendSms",e)},expression:"form.sendSms"}},[t._v("短信通知")]),n("Checkbox",{model:{value:t.form.sendEmail,callback:function(e){t.$set(t.form,"sendEmail",e)},expression:"form.sendEmail"}},[t._v("邮件通知")])],1)],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"text"},on:{click:function(e){t.applyModalVisible=!1}}},[t._v("取消")]),n("Button",{attrs:{type:"primary",loading:t.submitLoading},on:{click:t.handelSubmit}},[t._v("提交")])],1)],1)],1)},s=[],i=n("81c1"),o=n("365c"),c={name:"processStart",props:{value:{type:Boolean,default:!1},processKey:String,actBusinessId:String},data:function(){return{userLoading:!1,showAssign:!1,isGateway:!1,isCustom:!1,error:"",submitLoading:!1,applyModalVisible:this.value,form:{title:"",procDefId:"",assignees:[],priority:"0",sendMessage:!0,sendSms:!0,sendEmail:!0},formValidate:{title:[{required:!0,message:"不能为空",trigger:"change"}],priority:[{required:!0,message:"不能为空",trigger:"change"}]},assigneeList:[],dictPriority:this.$store.state.dict.priority,routeName:"",userList:[]}},methods:{init:function(){},searchUser:function(t){var e=this;t&&(this.userLoading=!0,Object(o["Lc"])(t).then((function(t){e.userLoading=!1,t.success&&(e.userList=t.result)})))},showApply:function(){var t=this;this.userLoading=!0,Object(i["C"])(this.form.procDefId).then((function(e){if(t.userLoading=!1,e.success){if(t.error="",3==e.result.type||4==e.result.type)return t.isGateway=!0,t.form.firstGateway=!0,t.showAssign=!1,void(t.isCustom=!1);if(5==e.result.type)return t.isCustom=!0,t.isGateway=!1,t.form.firstGateway=!1,void(t.showAssign=!1);if(1==e.result.type)if(t.showAssign=!0,t.isGateway=!1,t.form.firstGateway=!1,t.isCustom=!1,e.result.users&&e.result.users.length>0){t.assigneeList=e.result.users;var n=[];e.result.users.forEach((function(t){n.push(t.id)})),t.form.assignees=n,t.showAssign=!0}else t.form.assignees=[],t.showAssign=!0,t.error='请进入"流程管理"为审批节点分配候选审批人员'}})),this.applyModalVisible=!0},handelSubmit:function(){var t=this;this.$refs.form.validate((function(e){if(e){if((t.showAssign||t.isCustom)&&t.form.assignees.length<1)return void(t.error="请至少选择一个审批人");t.error="",t.submitLoading=!0,Object(i["S"])(t.form).then((function(e){t.submitLoading=!1,e.success&&(t.$Message.success("操作成功"),t.applyModalVisible=!1,t.$emit("on-submit",!0),t.routeName="")}))}}))},show:function(){var t=this;return this.processKey?this.actBusinessId?(this.form.id=this.actBusinessId,this.$emit("on-loading",!0),void Object(i["I"])(this.processKey).then((function(e){if(t.$emit("on-loaded",!1),e.success){if(!e.result)return t.$Message.error("未找到标识为 "+t.processKey+" 的流程"),void t.$emit("input",!1);if(!e.result.routeName)return t.$Message.warning("该流程信息未完善，请于流程管理中编辑流程完善信息"),void t.$emit("input",!1);t.routeName=e.result.routeName,t.form.procDefId=e.result.id,t.form.title=e.result.name,t.showApply()}}))):(this.$Message.error("请传入业务表ActBusiness的ID"),void this.$emit("input",!1)):(this.$Message.error("请先传入要申请的流程key"),void this.$emit("input",!1))},close:function(){this.applyModalVisible=!1}},watch:{value:function(t){1==t&&this.show()},applyModalVisible:function(t){this.$emit("input",t)}},mounted:function(){this.init()}},u=c,a=n("2877"),l=Object(a["a"])(u,r,s,!1,null,null,null);e["default"]=l.exports}}]);