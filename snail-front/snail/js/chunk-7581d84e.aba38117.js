(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7581d84e","chunk-144fef9a","chunk-409ab0ac","chunk-0f1c42f4","chunk-2d0cf2c8"],{"0808":function(e,t,s){},"10fd":function(e,t,s){"use strict";s.d(t,"c",(function(){return i})),s.d(t,"b",(function(){return a})),s.d(t,"a",(function(){return n}));var i=function(e,t,s){var i=/^[a-zA-Z0-9_\u4e00-\u9fa5]{1,16}$/;t.length>16?s(new Error("长度不能超过16个字符")):i.test(t)?s():s(new Error("仅支持大小写英文、中文和下划线_"))},a=function(e,t,s){t.length<6?s(new Error("密码长度不得小于6位")):s()},n=function(e,t,s){var i=/^[1][3,4,5,6,7,8,9][0-9]{9}$/;i.test(t)?s():s(new Error("手机号格式错误"))}},"2c39":function(e,t,s){},"358a":function(e,t,s){},"36e4":function(e,t,s){"use strict";s("7bf5")},4265:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"own-space"},[i("Card",{staticClass:"own-space-new"},[i("div",{staticClass:"own-wrap"},[i("div",{staticStyle:{width:"240px"}},[i("Menu",{attrs:{"active-name":e.activeName,theme:"light"},on:{"on-select":e.changeMenu}},[i("MenuItem",{attrs:{name:"基本信息"}},[e._v("基本信息")]),i("MenuItem",{attrs:{name:"安全设置"}},[e._v("安全设置")]),i("MenuItem",{attrs:{name:"第三方账号绑定"}},[e._v("第三方账号绑定")]),i("MenuItem",{attrs:{name:"消息通知"}},[e._v("消息通知")])],1)],1),i("div",{staticStyle:{padding:"8px 40px",width:"100%"}},[i("div",{staticClass:"title"},[e._v(e._s(e.currMenu))]),i("div",[i("div",{directives:[{name:"show",rawName:"v-show",value:"基本信息"==e.currMenu,expression:"currMenu == '基本信息'"}]},[i("Form",{ref:"userForm",attrs:{model:e.userForm,"label-width":90,"label-position":"left"}},[i("FormItem",{attrs:{label:"登录账号：",prop:"username"}},[e._v(e._s(e.userForm.username))]),i("FormItem",{attrs:{label:"用户头像："}},[i("upload-pic-thumb",{attrs:{multiple:!1},model:{value:e.userForm.avatar,callback:function(t){e.$set(e.userForm,"avatar",t)},expression:"userForm.avatar"}})],1),i("FormItem",{attrs:{label:"用户名：",prop:"nickname"}},[i("Input",{staticStyle:{width:"300px"},model:{value:e.userForm.nickname,callback:function(t){e.$set(e.userForm,"nickname",t)},expression:"userForm.nickname"}})],1),i("FormItem",{attrs:{label:"性别："}},[i("RadioGroup",{model:{value:e.userForm.sex,callback:function(t){e.$set(e.userForm,"sex",t)},expression:"userForm.sex"}},e._l(e.dictSex,(function(t,s){return i("Radio",{key:s,attrs:{label:t.value}},[e._v(e._s(t.title))])})),1)],1),i("FormItem",{attrs:{label:"生日："}},[i("DatePicker",{staticStyle:{width:"300px"},attrs:{type:"date"},on:{"on-change":e.changeBirth},model:{value:e.userForm.birth,callback:function(t){e.$set(e.userForm,"birth",t)},expression:"userForm.birth"}})],1),i("FormItem",{attrs:{label:"所在省市："}},[i("al-cascader",{staticStyle:{width:"300px"},attrs:{"data-type":"name",level:"2"},model:{value:e.userForm.address,callback:function(t){e.$set(e.userForm,"address",t)},expression:"userForm.address"}})],1),i("FormItem",{attrs:{label:"街道地址：",prop:"street"}},[i("Input",{staticStyle:{width:"300px"},model:{value:e.userForm.street,callback:function(t){e.$set(e.userForm,"street",t)},expression:"userForm.street"}})],1),i("FormItem",{attrs:{label:"个人简介：",prop:"description"}},[i("Input",{staticStyle:{width:"300px"},attrs:{type:"textarea",autosize:{minRows:3,maxRows:5},placeholder:"个人简介"},model:{value:e.userForm.description,callback:function(t){e.$set(e.userForm,"description",t)},expression:"userForm.description"}})],1),i("FormItem",{attrs:{label:"所属部门："}},[i("span",[e._v(e._s(e.userForm.departmentTitle))])]),i("FormItem",{attrs:{label:"用户类型："}},[i("span",[e._v(e._s(e.userForm.typeTxt))])]),i("FormItem",[i("Button",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{type:"primary",loading:e.saveLoading},on:{click:e.saveEdit}},[e._v("保存")])],1)],1)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:"安全设置"==e.currMenu,expression:"currMenu == '安全设置'"}],staticClass:"safe"},[i("div",{staticClass:"item"},[i("div",[i("div",{staticClass:"title"},[e._v("账户密码")]),e.userForm.passStrength?i("div",{staticClass:"desc"},[e._v(" 当前密码强度： "),"弱"==e.userForm.passStrength?i("span",{staticClass:"red"},[e._v(e._s(e.userForm.passStrength))]):e._e(),"中"==e.userForm.passStrength?i("span",{staticClass:"middle"},[e._v(e._s(e.userForm.passStrength))]):e._e(),"强"==e.userForm.passStrength?i("span",{staticClass:"green"},[e._v(e._s(e.userForm.passStrength))]):e._e()]):e._e()]),i("div",[i("a",{on:{click:e.changePass}},[e._v("修改")])])]),i("div",{staticClass:"item"},[i("div",[i("div",{staticClass:"title"},[e._v("绑定手机")]),i("div",{staticClass:"desc"},[e.userForm.mobile?i("span",[e._v("已绑定手机："+e._s(e.userForm.mobile))]):i("span",[e._v("未绑定手机号")])])]),i("div",[i("a",{on:{click:e.showChangeMobile}},[e._v("修改")])])]),i("div",{staticClass:"item"},[i("div",[i("div",{staticClass:"title"},[e._v("绑定邮箱")]),i("div",{staticClass:"desc"},[e.userForm.email?i("span",[e._v("已绑定邮箱："+e._s(e.userForm.email))]):i("span",[e._v("未绑定邮箱")])])]),i("div",[i("a",{on:{click:e.showChangeEmail}},[e._v("修改")])])]),i("div",{staticClass:"item"},[i("div",[i("div",{staticClass:"title"},[e._v("密保问题")]),i("div",{staticClass:"desc"},[e._v(" 未设置密保问题，密保问题可有效保护账户安全 ")])]),i("div",[i("a",[e._v("暂不支持设置")])])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:"第三方账号绑定"==e.currMenu,expression:"currMenu == '第三方账号绑定'"}],staticClass:"safe"},[i("div",{staticClass:"item"},[i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("Icon",{staticStyle:{"margin-right":"16px"},attrs:{type:"logo-github",size:"42",color:"#181617"}}),i("div",[i("div",{staticClass:"title"},[e._v("Github")]),i("div",{staticClass:"desc"},[e.relate.github?i("span",[e._v("已绑定Github账号："+e._s(e.relate.githubUsername))]):i("span",[e._v("当前未绑定Github账号")])])])],1),i("div",[e.relate.github?i("a",{on:{click:function(t){return e.unRelateGithub()}}},[e._v("解除绑定")]):i("a",{on:{click:function(t){return e.toRelateGithub()}}},[e._v("立即绑定")])])]),i("div",{staticClass:"item"},[i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("img",{staticStyle:{"margin-right":"16px"},attrs:{src:s("b821"),width:"42px"}}),i("div",[i("div",{staticClass:"title"},[e._v("QQ")]),i("div",{staticClass:"desc"},[e.relate.qq?i("span",[e._v("已绑定QQ账号："+e._s(e.relate.qqUsername))]):i("span",[e._v("当前未绑定QQ账号")])])])]),i("div",[e.relate.qq?i("a",{on:{click:function(t){return e.unRelateQQ()}}},[e._v("解除绑定")]):i("a",{on:{click:function(t){return e.toRelateQQ()}}},[e._v("立即绑定")])])]),i("div",{staticClass:"item"},[i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("Icon",{staticStyle:{"margin-right":"16px",color:"#60c126"},attrs:{custom:"iconfont icon-weixin",size:"40"}}),i("div",[i("div",{staticClass:"title"},[e._v("微信")]),i("div",{staticClass:"desc"},[e.relate.wechat?i("span",[e._v("已绑定微信账号："+e._s(e.relate.wechatUsername))]):i("span",[e._v("当前未绑定微信账号")])])])],1),i("div",[e.relate.wechat?i("a",{on:{click:function(t){return e.unRelateWechat()}}},[e._v("解除绑定")]):i("a",{on:{click:function(t){return e.toRelateWechat()}}},[e._v("立即绑定")])])]),i("div",{staticClass:"item"},[i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("img",{staticStyle:{"margin-right":"16px"},attrs:{src:s("794d"),width:"41px"}}),i("div",[i("div",{staticClass:"title"},[e._v("微博")]),i("div",{staticClass:"desc"},[e.relate.weibo?i("span",[e._v("已绑定微博账号："+e._s(e.relate.weiboUsername))]):i("span",[e._v("当前未绑定微博账号")])])])]),i("div",[e.relate.weibo?i("a",{on:{click:function(t){return e.unRelateWeibo()}}},[e._v("解除绑定")]):i("a",{on:{click:function(t){return e.toRelateWeibo()}}},[e._v("立即绑定")])])]),i("div",{staticClass:"item"},[i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("img",{staticStyle:{"margin-right":"16px"},attrs:{src:s("4be3"),width:"41px"}}),i("div",[i("div",{staticClass:"title"},[e._v("钉钉")]),i("div",{staticClass:"desc"},[e.relate.dingding?i("span",[e._v("已绑定钉钉账号："+e._s(e.relate.dingdingUsername))]):i("span",[e._v("当前未绑定钉钉账号")])])])]),i("div",[e.relate.dingding?i("a",{on:{click:function(t){return e.unRelateDingding()}}},[e._v("解除绑定")]):i("a",{on:{click:function(t){return e.toRelateDingding()}}},[e._v("立即绑定")])])]),i("div",{staticClass:"item"},[i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("img",{staticStyle:{"margin-right":"16px"},attrs:{src:s("ed7e"),width:"41px"}}),i("div",[i("div",{staticClass:"title"},[e._v("企业微信")]),i("div",{staticClass:"desc"},[e.relate.workwechat?i("span",[e._v("已绑定企业微信账号："+e._s(e.relate.workwechatUsername))]):i("span",[e._v("当前未绑定企业微信")])])])]),i("div",[e.relate.workwechat?i("a",{on:{click:function(t){return e.unRelateWorkwechat()}}},[e._v("解除绑定")]):i("a",{on:{click:function(t){return e.toRelateWorkwechat()}}},[e._v("立即绑定")])])]),e.jumping?i("Spin",{attrs:{fix:""}},[e._v("跳转中...")]):e._e()],1),i("div",{directives:[{name:"show",rawName:"v-show",value:"消息通知"==e.currMenu,expression:"currMenu == '消息通知'"}],staticClass:"safe"},[i("div",{staticClass:"item"},[i("div",[i("div",{staticClass:"title"},[e._v("系统消息")]),i("div",{staticClass:"desc"},[e._v("系统消息将以站内信的形式通知")])]),i("div",[i("i-switch",{attrs:{"true-value":1,"false-value":0},on:{"on-change":e.changeMessage},model:{value:e.messageOpen,callback:function(t){e.messageOpen=t},expression:"messageOpen"}},[i("span",{attrs:{slot:"open"},slot:"open"},[e._v("开")]),i("span",{attrs:{slot:"close"},slot:"close"},[e._v("关")])])],1)])])])])])]),i("Modal",{attrs:{title:"修改手机号",closable:!1,"mask-closable":!1,width:500},model:{value:e.editMobileVisible,callback:function(t){e.editMobileVisible=t},expression:"editMobileVisible"}},[i("Form",{ref:"mobileEditForm",attrs:{model:e.mobileEditForm,"label-width":70,rules:e.mobileEditValidate}},[i("FormItem",{attrs:{label:"手机号",prop:"mobile"}},[i("Input",{attrs:{placeholder:"请输入新手机号"},on:{"on-change":e.hasChangePhone},model:{value:e.mobileEditForm.mobile,callback:function(t){e.$set(e.mobileEditForm,"mobile",t)},expression:"mobileEditForm.mobile"}})],1),i("FormItem",{attrs:{label:"验证码",prop:"code",error:e.codeError}},[i("Row",{attrs:{type:"flex",justify:"space-between"}},[i("Input",{staticStyle:{width:"280px"},attrs:{placeholder:"请输入您收到的短信验证码"},model:{value:e.mobileEditForm.code,callback:function(t){e.$set(e.mobileEditForm,"code",t)},expression:"mobileEditForm.code"}}),i("CountDownButton",{ref:"countDownMobile",attrs:{disabled:e.canSendMobileCode,autoCountDown:!1,loading:e.sending,text:e.getSms},on:{"on-click":e.sendEditMobileCode}})],1)],1)],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"text"},on:{click:e.cancelInputCodeBox}},[e._v("取消")]),i("Button",{attrs:{type:"primary",loading:e.checkCodeLoading},on:{click:e.submitEditMobile}},[e._v("提交")])],1)],1),i("Modal",{attrs:{title:"修改邮箱",closable:!1,"mask-closable":!1,width:500},model:{value:e.editEmailVisible,callback:function(t){e.editEmailVisible=t},expression:"editEmailVisible"}},[i("Form",{ref:"emailEditForm",attrs:{model:e.emailEditForm,"label-width":100,rules:e.emailEditValidate}},[i("FormItem",{attrs:{label:"新邮箱地址",prop:"email"}},[i("Input",{attrs:{placeholder:"请输入新邮箱地址"},on:{"on-change":e.hasChangeEmail},model:{value:e.emailEditForm.email,callback:function(t){e.$set(e.emailEditForm,"email",t)},expression:"emailEditForm.email"}})],1),i("FormItem",{attrs:{label:"验证码",prop:"code",error:e.codeError}},[i("Row",{attrs:{type:"flex",justify:"space-between"}},[i("Input",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入您收到的邮件中的验证码"},model:{value:e.emailEditForm.code,callback:function(t){e.$set(e.emailEditForm,"code",t)},expression:"emailEditForm.code"}}),i("CountDownButton",{ref:"countDownEmail",attrs:{disabled:e.canSendEditEmail,autoCountDown:!1,loading:e.sending,text:e.getSms},on:{"on-click":e.sendVerifyEmail}})],1)],1)],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"text"},on:{click:e.cancelEditEmail}},[e._v("取消")]),i("Button",{attrs:{type:"primary",loading:e.editEmailLoading},on:{click:e.submitEditEmail}},[e._v("提交")])],1)],1),i("check-password",{ref:"checkPassMobile",on:{"on-success":e.checkSuccessMobile}}),i("check-password",{ref:"checkPassEmail",on:{"on-success":e.checkSuccessEmail}})],1)},a=[],n=s("365c"),o=s("10fd"),r=s("631f"),c=s("5ea1"),l=s("d59b"),u=s("be65"),d=s.n(u);s("f0c3");function m(e){return m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}var h={components:{uploadPicThumb:c["default"],checkPassword:l["default"],CountDownButton:r["default"]},name:"ownspace_index",data:function(){return{activeName:"基本信息",area:86,messageOpen:1,userForm:{id:"",avatar:"",username:"",sex:"",mobile:"",email:"",status:"",type:"",typeTxt:"",address:[]},mobileEditForm:{mobile:"",code:""},emailEditForm:{email:"",code:""},codeError:"",initPhone:"",initEmail:"",saveLoading:!1,sending:!1,getSms:"获取验证码",canSendMobileCode:!0,checkCodeLoading:!1,checkPassLoading:!1,editEmailLoading:!1,mobileEditValidate:{mobile:[{required:!0,message:"请输入手机号码"},{validator:o["a"]}]},emailEditValidate:{email:[{required:!0,message:"请输入邮箱地址"},{type:"email",message:"邮箱格式不正确"}]},editMobileVisible:!1,editEmailVisible:!1,canSendEditEmail:!0,relate:{},jumping:!1,currMenu:"基本信息",dictSex:this.$store.state.dict.sex}},methods:{init:function(){var e=this,t=JSON.parse(d.a.get("userInfo"));for(var s in t)null==t[s]&&(t[s]="");var i=JSON.stringify(t),a=JSON.parse(i);this.userForm=a,this.initPhone=a.mobile,this.mobileEditForm.mobile=a.mobile,this.initEmail=a.email,this.emailEditForm.email=a.email,a.address?this.userForm.address=a.address.split(","):this.userForm.address=[],0==this.userForm.type?this.userForm.typeTxt="普通用户":1==this.userForm.type&&(this.userForm.typeTxt="管理员"),Object(n["Bc"])(a.username).then((function(t){t.success?e.relate=t.result:e.$Message.error("加载绑定第三方账号信息失败")}));var o=this.getStore("messageOpen");""!=o&&void 0!=o&&null!=o?this.messageOpen=Number(o):this.setStore("messageOpen",1)},changePass:function(){this.$router.push({name:"change_pass"})},changeMenu:function(e){this.currMenu=e},toRelateGithub:function(){var e=this;this.jumping=!0,Object(n["qc"])().then((function(t){t.success?window.location.href=t.result:e.jumping=!1}))},toRelateQQ:function(){var e=this;this.jumping=!0,Object(n["yc"])().then((function(t){t.success?window.location.href=t.result:e.jumping=!1}))},toRelateWeibo:function(){var e=this;this.jumping=!0,Object(n["dd"])().then((function(t){t.success?window.location.href=t.result:e.jumping=!1}))},toRelateWechat:function(){var e=this;this.jumping=!0,Object(n["cd"])().then((function(t){t.success?window.location.href=t.result:e.jumping=!1}))},toRelateDingding:function(){var e=this;this.jumping=!0,Object(n["S"])().then((function(t){t.success?window.location.href=t.result:e.jumping=!1}))},toRelateWorkwechat:function(){var e=this;this.jumping=!0,Object(n["ed"])().then((function(t){t.success?window.location.href=t.result:e.jumping=!1}))},unRelateGithub:function(){var e=this;this.$Modal.confirm({title:"确认解绑Github账号",content:"您确认要解除绑定 "+this.relate.githubUsername+" ?",loading:!0,onOk:function(){var t={ids:[e.relate.githubId]};Object(n["Vc"])(t).then((function(t){e.$Modal.remove(),t.success&&(e.$Message.success("操作成功"),e.relate.github=!1)}))}})},unRelateQQ:function(){var e=this;this.$Modal.confirm({title:"确认解绑QQ账号",content:"您确认要解除绑定 "+this.relate.qqUsername+" ?",loading:!0,onOk:function(){var t={ids:[e.relate.qqId]};Object(n["Vc"])(t).then((function(t){e.$Modal.remove(),t.success&&(e.$Message.success("操作成功"),e.relate.qq=!1)}))}})},unRelateWeibo:function(){var e=this;this.$Modal.confirm({title:"确认解绑微博账号",content:"您确认要解除绑定 "+this.relate.weiboUsername+" ?",loading:!0,onOk:function(){var t={ids:[e.relate.weiboId]};Object(n["Vc"])(t).then((function(t){e.$Modal.remove(),t.success&&(e.$Message.success("操作成功"),e.relate.weibo=!1)}))}})},unRelateWechat:function(){var e=this;this.$Modal.confirm({title:"确认解绑微信账号",content:"您确认要解除绑定 "+this.relate.wechatUsername+" ?",loading:!0,onOk:function(){var t={ids:[e.relate.wechatId]};Object(n["Vc"])(t).then((function(t){e.$Modal.remove(),t.success&&(e.$Message.success("操作成功"),e.relate.wechat=!1)}))}})},unRelateDingding:function(){var e=this;this.$Modal.confirm({title:"确认解绑钉钉账号",content:"您确认要解除绑定 "+this.relate.dingdingUsername+" ?",loading:!0,onOk:function(){var t={ids:[e.relate.dingdingId]};Object(n["Vc"])(t).then((function(t){e.$Modal.remove(),t.success&&(e.$Message.success("操作成功"),e.relate.dingding=!1)}))}})},unRelateWorkwechat:function(){var e=this;this.$Modal.confirm({title:"确认解绑企业微信账号",content:"您确认要解除绑定 "+this.relate.workwechatUsername+" ?",loading:!0,onOk:function(){var t={ids:[e.relate.workwechatId]};Object(n["Vc"])(t).then((function(t){e.$Modal.remove(),t.success&&(e.$Message.success("操作成功"),e.relate.workwechat=!1)}))}})},showChangeMobile:function(){this.$refs.checkPassMobile.show()},checkSuccessMobile:function(){this.editMobileVisible=!0},showChangeEmail:function(){this.$refs.checkPassEmail.show()},checkSuccessEmail:function(){this.editEmailVisible=!0},saveEdit:function(){var e=this;this.saveLoading=!0,"object"==m(this.userForm.birth)&&(this.userForm.birth=this.format(this.userForm.birth,"yyyy-MM-dd")),delete this.userForm.roles,Object(n["Zc"])(this.userForm).then((function(t){e.saveLoading=!1,t.success&&(e.$Message.success("保存成功"),d.a.set("userInfo",e.userForm),e.$store.commit("setAvatarPath",e.userForm.avatar))}))},changeBirth:function(e){this.userForm.birth=e},cancelInputCodeBox:function(){this.editMobileVisible=!1,this.userForm.mobile=this.initPhone},cancelEditEmail:function(){this.editEmailVisible=!1,this.emailEditForm.email=this.initEmail},sendEditMobileCode:function(){var e=this;this.$refs["mobileEditForm"].validate((function(t){t&&(e.getSms="发送中",e.sending=!0,Object(n["Oc"])(e.mobileEditForm.mobile).then((function(t){e.getSms="获取验证码",e.sending=!1,t.success&&(e.$Message.success("发送短信验证码成功"),e.$refs.countDownMobile.startCountDown())})))}))},submitEditMobile:function(){var e=this;this.$refs["mobileEditForm"].validate((function(t){if(t){if(!e.mobileEditForm.code)return void(e.codeError="请填写短信验证码");e.codeError="",e.checkCodeLoading=!0,Object(n["s"])(e.mobileEditForm).then((function(t){e.checkCodeLoading=!1,t.success&&(e.$Message.success("修改成功"),e.userForm.mobile=e.mobileEditForm.mobile,e.initPhone=e.mobileEditForm.mobile,e.updateUserInfo(),e.editMobileVisible=!1)}))}}))},hasChangePhone:function(){var e=this;this.mobileEditForm.mobile==this.initPhone?this.canSendMobileCode=!0:this.$refs["mobileEditForm"].validate((function(t){e.canSendMobileCode=!t}))},hasChangeEmail:function(){this.emailEditForm.email==this.initEmail?this.canSendEditEmail=!0:this.canSendEditEmail=!1},sendVerifyEmail:function(){var e=this;this.$refs["emailEditForm"].validate((function(t){t&&(e.getSms="发送中",e.sending=!0,Object(n["Nc"])(e.emailEditForm.email).then((function(t){e.getSms="获取验证码",e.sending=!1,t.success&&(e.$Message.success("发送邮件验证码成功，请注意查收"),e.$refs.countDownEmail.startCountDown())})))}))},submitEditEmail:function(){var e=this;this.$refs["emailEditForm"].validate((function(t){if(t){if(!e.emailEditForm.code)return void(e.codeError="验证码不能为空");e.codeError="",e.editEmailLoading=!0,Object(n["eb"])(e.emailEditForm).then((function(t){e.editEmailLoading=!1,t.success&&(e.initEmail=e.emailEditForm.email,e.userForm.email=e.emailEditForm.email,e.updateUserInfo(),e.$Message.success("修改邮件成功"),e.editEmailVisible=!1)}))}}))},updateUserInfo:function(){var e=this;Object(n["Yc"])().then((function(t){t.success&&(delete t.result.permissions,delete t.result.roles,e.getStore("saveLogin")?d.a.set("userInfo",JSON.stringify(t.result),{expires:7}):d.a.set("userInfo",JSON.stringify(t.result)),e.setStore("userInfo",t.result))}))},changeMessage:function(e){this.setStore("messageOpen",e)}},mounted:function(){var e=this.$route.query.type;"social"==e&&(this.activeName="第三方账号绑定",this.currMenu="第三方账号绑定"),this.init()}},p=h,f=(s("36e4"),s("2877")),g=Object(f["a"])(p,i,a,!1,null,"1e084dcd",null);t["default"]=g.exports},"4be3":function(e,t,s){e.exports=s.p+"img/dingding.21a7a85c.png"},"5ea1":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"upload-thumb"},[s("vuedraggable",{staticClass:"list-group",attrs:{list:e.uploadList,disabled:!e.draggable||!e.multiple,animation:200,"ghost-class":"thumb-ghost"},on:{end:e.onEnd}},e._l(e.uploadList,(function(t,i){return s("div",{key:i,staticClass:"upload-list",style:{width:"calc("+e.width+" + 2px)",height:"calc("+e.height+" + 2px)",lineHeight:e.height}},["finished"==t.status?s("div",[s("img",{style:{height:e.height},attrs:{src:t.url}}),s("div",{staticClass:"upload-list-cover"},[s("Icon",{attrs:{type:"ios-eye-outline"},on:{click:function(s){return e.handleView(t.url,i)}}}),s("Icon",{directives:[{name:"show",rawName:"v-show",value:!e.preview,expression:"!preview"}],attrs:{type:"ios-trash-outline"},on:{click:function(s){return e.handleRemove(t)}}})],1)]):s("div",[t.showProgress?s("Progress",{attrs:{percent:t.percentage,"hide-info":""}}):e._e()],1)])})),0),s("Upload",{directives:[{name:"show",rawName:"v-show",value:!e.preview,expression:"!preview"}],ref:"upload",staticClass:"upload-btn",style:{width:e.width},attrs:{multiple:e.multiple,"show-upload-list":!1,"on-success":e.handleSuccess,"on-error":e.handleError,format:e.format,accept:e.accept,"max-size":1024*e.maxSize,"on-format-error":e.handleFormatError,"on-exceeded-size":e.handleMaxSize,"before-upload":e.handleBeforeUpload,type:"drag",action:e.uploadFileUrl,headers:e.accessToken}},[s("div",{staticClass:"upload-camera",style:{width:e.width,height:e.height,lineHeight:e.height}},[s("Icon",{attrs:{type:"md-camera",size:"20"}})],1)])],1)},a=[],n=(s("0808"),s("6a37")),o=s.n(n),r=s("365c"),c=s("289a"),l=s.n(c);function u(e){return u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}var d={name:"uploadPicThumb",components:{vuedraggable:l.a},props:{value:{type:null},preview:{type:Boolean,default:!1},draggable:{type:Boolean,default:!0},multiple:{type:Boolean,default:!0},maxSize:{type:Number,default:5},limit:{type:Number,default:10},width:{type:String,default:"60px"},height:{type:String,default:"60px"},accept:{type:String,default:".jpg, .jpeg, .png, .gif"}},computed:{format:function(){if(this.accept){var e=[];return this.accept.split(",").forEach((function(t){e.push(t.replace(".","").replace(" ",""))})),e}return[]}},data:function(){return{accessToken:{},uploadFileUrl:r["Xc"],uploadList:[]}},methods:{onEnd:function(){this.returnValue()},init:function(){this.setData(this.value,!0),this.accessToken={accessToken:this.getStore("accessToken")}},handleView:function(e,t){var s=new Image;s.src=e;var i=new o.a(s,{hidden:function(){i.destroy()}});i.show()},handleRemove:function(e){var t=this.uploadList;this.uploadList.splice(t.indexOf(e),1),this.returnValue()},handleSuccess:function(e,t){e.success?(t.url=e.result,!this.multiple&&this.uploadList.length>0&&this.uploadList.splice(0,1),this.uploadList.push(t),this.returnValue()):this.$Message.error(e.message)},handleError:function(e,t,s){this.$Message.error(e.toString())},handleFormatError:function(e){this.$Notice.warning({title:"不支持的文件格式",desc:"所选文件‘ "+e.name+" ’格式不正确, 请选择 "+this.accept+" 图片格式文件"})},handleMaxSize:function(e){this.$Notice.warning({title:"文件大小过大",desc:"所选文件‘ "+e.name+" ’大小过大, 不得超过 "+this.maxSize+"M."})},handleBeforeUpload:function(){return!(this.multiple&&this.uploadList.length>=this.limit)||(this.$Message.warning("最多只能上传"+this.limit+"张图片"),!1)},returnValue:function(){if(!this.uploadList||this.uploadList.length<1)this.multiple?(this.$emit("input",[]),this.$emit("on-change",[])):(this.$emit("input",""),this.$emit("on-change",""));else if(this.multiple){var e=[];this.uploadList.forEach((function(t){e.push(t.url)})),this.$emit("input",e),this.$emit("on-change",e)}else{var t=this.uploadList[0].url;this.$emit("input",t),this.$emit("on-change",t)}},setData:function(e,t){var s=this;if("string"==typeof e){if(this.multiple)return void this.$Message.warning("多张上传仅支持数组数据类型");if(!e)return;this.uploadList=[];var i={url:e,status:"finished"};this.uploadList.push(i),this.$emit("on-change",e)}else if("object"==u(e)){if(!this.multiple)return void this.$Message.warning("单张上传仅支持字符串数据类型");if(this.uploadList=[],e.length>this.limit){for(var a=0;a<this.limit;a++){var n={url:e[a],status:"finished"};this.uploadList.push(n)}this.$emit("on-change",e.slice(0,this.limit)),t&&this.$emit("input",e.slice(0,this.limit)),this.$Message.warning("最多只能上传"+this.limit+"张图片")}else e.forEach((function(e){var t={url:e,status:"finished"};s.uploadList.push(t)})),this.$emit("on-change",e)}}},watch:{value:function(e){this.setData(e)}},mounted:function(){this.init()}},m=d,h=(s("c092"),s("2877")),p=Object(h["a"])(m,i,a,!1,null,null,null);t["default"]=p.exports},"631f":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Button",{attrs:{countTime:e.countTime,loading:e.loading,type:e.type,size:e.size,ghost:e.ghost,disabled:e.disabled||e.clicked,icon:e.icon,shape:e.shape,long:e.long},on:{click:e.handleClick}},[e._v(e._s(e.buttonText))])],1)},a=[],n={name:"iconChoose",props:{text:{type:String,default:"提交"},autoCountDown:{type:Boolean,default:!0},countTime:{type:[Number,String],default:60},suffixText:{type:String,default:"后重试"},type:String,size:String,loading:{type:Boolean,default:!1},ghost:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},icon:String,shape:String,long:{type:Boolean,default:!1}},data:function(){return{buttonText:this.text,count:Number(this.countTime),clicked:!1}},methods:{init:function(){},handleClick:function(){this.autoCountDown&&(this.clicked=!0,this.countDown()),this.$emit("on-click",!0)},startCountDown:function(){this.clicked=!0,this.countDown()},countDown:function(){var e=this;if(0==this.count)return this.clicked=!1,this.count=this.countTime,void(this.buttonText=this.text);this.buttonText=this.count+" 秒"+this.suffixText,this.count--,setTimeout((function(){e.countDown()}),1e3)},setText:function(e){e!==this.buttonText&&(this.buttonText=e)}},watch:{text:function(e){this.setText(e)}},mounted:function(){this.init()}},o=n,r=s("2877"),c=Object(r["a"])(o,i,a,!1,null,null,null);t["default"]=c.exports},"6f35":function(e,t,s){"use strict";s("2c39")},"794d":function(e,t,s){e.exports=s.p+"img/weibo.57188625.png"},"7bf5":function(e,t,s){},a4b3:function(e,t,s){"use strict";s("f3df")},b821:function(e,t,s){e.exports=s.p+"img/QQ.b6432515.png"},c092:function(e,t,s){"use strict";s("358a")},d59b:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Modal",{attrs:{title:"身份验证",fullscreen:"","footer-hide":""},model:{value:e.passCheckVisible,callback:function(t){e.passCheckVisible=t},expression:"passCheckVisible"}},[s("div",{staticClass:"pass-check",on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.checkPass(t)}}},[s("Icon",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"md-lock",size:"30"}}),s("div",{staticClass:"title",staticStyle:{"margin-bottom":"40px"}},[e._v("密码认证")]),s("div",{staticClass:"desc"},[e._v("请输入您的密码")]),s("Input",{staticStyle:{width:"300px","margin-bottom":"40px"},attrs:{autofocus:"",password:"",size:"large",placeholder:"请输入您的密码",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),s("div",{staticStyle:{"margin-bottom":"60px"}},[s("Button",{staticStyle:{"margin-right":"20px"},attrs:{size:"large"},on:{click:function(t){e.passCheckVisible=!1}}},[e._v("取消")]),s("Button",{attrs:{loading:e.loading,disabled:!e.password,type:"primary",size:"large"},on:{click:e.checkPass}},[e._v("提交")])],1)],1)])],1)},a=[],n=s("365c"),o={name:"circleLoading",data:function(){return{loading:!1,passCheckVisible:!1,password:""}},methods:{checkPass:function(){var e=this;this.loading=!0,Object(n["Wc"])({password:this.password}).then((function(t){e.loading=!1,t.success&&(e.passCheckVisible=!1,e.$emit("on-success",!0))}))},show:function(){this.password="",this.passCheckVisible=!0}}},r=o,c=(s("6f35"),s("2877")),l=Object(c["a"])(r,i,a,!1,null,null,null);t["default"]=l.exports},ed7e:function(e,t,s){e.exports=s.p+"img/qiyeweixin.7010268f.png"},f0c3:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"message-main-con"},[s("div",{staticClass:"message-mainlist-con"},[s("div",[s("Button",{attrs:{size:"large",long:"",type:"text"},on:{click:function(t){return e.setCurrentMesType("unread")}}},[s("div",{staticClass:"mes-wrap"},[s("transition",{attrs:{name:"mes-current-type-btn"}},[s("Icon",{directives:[{name:"show",rawName:"v-show",value:"unread"==e.currentMessageType,expression:"currentMessageType == 'unread'"}],attrs:{type:"md-checkmark"}})],1),s("span",{staticClass:"mes-type-btn-text"},[e._v("未读消息")]),s("Badge",{staticClass:"message-count-badge-outer",attrs:{"class-name":"message-count-badge-red",count:e.unreadCount}})],1)])],1),s("div",[s("Button",{attrs:{size:"large",long:"",type:"text"},on:{click:function(t){return e.setCurrentMesType("hasread")}}},[s("div",{staticClass:"mes-wrap"},[s("transition",{attrs:{name:"mes-current-type-btn"}},[s("Icon",{directives:[{name:"show",rawName:"v-show",value:"hasread"==e.currentMessageType,expression:"currentMessageType == 'hasread'"}],attrs:{type:"md-checkmark"}})],1),s("span",{staticClass:"mes-type-btn-text"},[e._v("已读消息")]),s("Badge",{staticClass:"message-count-badge-outer",attrs:{"class-name":"message-count-badge",count:e.hasreadCount}})],1)])],1)]),s("div",{staticClass:"message-content-con"},[s("transition",{attrs:{name:"view-message"}},[e.showMesTitleList?s("div",{staticClass:"message-title-list-con"},[s("Table",{ref:"messageList",attrs:{loading:e.loading,columns:e.mesTitleColumns,data:e.currentMesList,"no-data-text":e.noDataText}}),s("div",{staticClass:"message-page"},["unread"==e.currentMessageType?s("Poptip",{attrs:{confirm:"",transfer:"",title:"确定标记所有消息为已读？"},on:{"on-ok":e.readAll}},[s("Button",{attrs:{icon:"md-notifications-off",disabled:e.unreadCount<=0}},[e._v("全部标记为已读")])],1):e._e(),"hasread"==e.currentMessageType?s("Poptip",{attrs:{confirm:"",transfer:"",title:"确定彻底删除所有已读消息？"},on:{"on-ok":e.deleteAll}},[s("Button",{attrs:{icon:"md-trash",disabled:e.hasreadCount<=0}},[e._v("全部彻底删除")])],1):e._e(),s("Page",{staticClass:"page-fix",attrs:{current:e.params.pageNumber,total:e.total,"page-size":e.params.pageSize,"page-size-opts":[5,10],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}})],1)],1):e._e()]),s("transition",{attrs:{name:"back-message-list"}},[e.showMesTitleList?e._e():s("div",{staticClass:"message-view-content-con"},[s("div",{staticClass:"message-content-top-bar"},[s("span",{staticClass:"mes-back-btn-con"},[s("Button",{attrs:{type:"text"},on:{click:e.backMesTitleList}},[s("Icon",{attrs:{type:"ios-arrow-back"}}),e._v(" 返回 ")],1)],1),s("h3",{staticClass:"mes-title"},[e._v(e._s(e.mes.title))])]),s("p",{staticClass:"mes-time-con"},[s("Icon",{attrs:{type:"android-time"}}),e._v(" "+e._s(e.mes.time)+" ")],1),s("div",{staticClass:"message-content-body"},[s("p",{staticClass:"message-content",domProps:{innerHTML:e._s(e.mes.content)}},[e._v(" "+e._s(e.mes.content)+" ")])])])])],1)])},a=[],n=s("be65"),o=s.n(n),r=s("365c"),c={name:"message_index",data:function(){var e=this,t=function(t,s){return t("Button",{props:{icon:"md-eye-off",size:"small"},on:{click:function(){var t=s.row;for(var i in t)null==t[i]&&(t[i]="");var a=JSON.stringify(t),n=JSON.parse(a);n.status=1,e.loading=!0,Object(r["hb"])(n).then((function(t){e.loading=!1,t.success&&(e.$Message.success("操作成功"),e.unreadCount-=1,e.hasreadCount+=1,e.$store.commit("setMessageCount",e.unreadCount),e.refreshMessage())}))}}},"标为已读")},s=function(t,s){return t("Button",{props:{icon:"md-trash",size:"small"},on:{click:function(){var t=s.row;e.loading=!0,Object(r["K"])({ids:t.id}).then((function(t){e.loading=!1,t.success&&(e.$Message.success("操作成功"),e.recyclebinCount-=1,e.refreshMessage())}))}}},"删除")};return{loading:!0,params:{userId:JSON.parse(o.a.get("userInfo")).id,status:0,pageNumber:1,pageSize:10,sort:"createTime",order:"desc"},total:0,totalUnread:0,totalRead:0,totalRemove:0,currentMesList:[],currentMessageType:"unread",showMesTitleList:!0,unreadCount:0,hasreadCount:0,recyclebinCount:0,noDataText:"暂无未读消息",mes:{title:"",time:"",content:""},dictMessageType:this.$store.state.dict.messageType,mesTitleColumns:[{type:"index",width:60,align:"center"},{title:" ",key:"title",align:"left",ellipsis:!0,render:function(t,s){return t("span",[t("a",{style:{margin:"0 30px 0 0"},on:{click:function(){e.getContent(s.row)}}},"【"+s.row.type+"】 "+s.row.title)])}},{title:" ",key:"time",align:"center",width:190,render:function(e,t){return e("span",[e("Icon",{props:{type:"md-time",size:16},style:{margin:"0 5px 3px 0"}}),e("span",t.row.createTime)])}},{title:" ",key:"asread",align:"center",width:210,render:function(i,a){return"unread"==e.currentMessageType?i("div",[t(i,a)]):"hasread"==e.currentMessageType?i("div",[s(i,a)]):void 0}}]}},methods:{changePage:function(e){this.params.pageNumber=e,this.refreshMessage()},changePageSize:function(e){this.params.pageSize=e,this.refreshMessage()},refreshMessage:function(){var e=this,t=0,s=this.currentMessageType;t="unread"==s?0:"hasread"==s?1:2,this.params.status=t,this.loading=!0,Object(r["Wb"])(this.params).then((function(t){e.loading=!1,t.success&&(e.currentMesList=t.result.content,e.total=t.result.totalElements)}))},initMessage:function(){var e=this;this.params.status=0,Object(r["Wb"])(this.params).then((function(t){t.success&&(e.unreadCount=t.result.totalElements,e.initReadMessage())}))},initReadMessage:function(){var e=this;this.params.status=1,Object(r["Wb"])(this.params).then((function(t){t.success&&(e.hasreadCount=t.result.totalElements,e.initRemoveMessage())}))},initRemoveMessage:function(){var e=this;this.params.status=2,Object(r["Wb"])(this.params).then((function(t){t.success&&(e.recyclebinCount=t.result.totalElements,e.setCurrentMesType("unread"))}))},deleteMessage:function(e){var t=this;Object(r["K"])({ids:e}).then((function(e){e.success&&t.$Message.success("删除成功")}))},backMesTitleList:function(){this.showMesTitleList=!0},setCurrentMesType:function(e){this.currentMessageType!==e&&(this.showMesTitleList=!0),this.currentMessageType=e,"unread"==e?this.noDataText="暂无未读消息":"hasread"==e&&(this.noDataText="暂无已读消息"),this.params.pageNumber=1,this.refreshMessage()},getContent:function(e){var t=this;if(this.showMesTitleList=!1,this.mes.title=e.title,this.mes.time=e.createTime,this.mes.content=e.content,0==e.status){for(var s in e)null==e[s]&&(e[s]="");var i=JSON.stringify(e),a=JSON.parse(i);a.status=1,Object(r["hb"])(a).then((function(e){e.success&&(t.unreadCount-=1,t.hasreadCount+=1,t.$store.commit("setMessageCount",t.unreadCount),t.refreshMessage())}))}},readAll:function(){var e=this;Object(r["q"])(0).then((function(t){t.success&&(e.hasreadCount+=e.unreadCount,e.unreadCount=0,e.$store.commit("setMessageCount",e.unreadCount),e.refreshMessage())}))},deleteAll:function(){var e=this;Object(r["q"])(1).then((function(t){t.success&&(e.hasreadCount=0,e.refreshMessage())}))}},mounted:function(){this.initMessage()},watch:{$route:function(e,t){"message_index"==e.name&&this.initMessage()}}},l=c,u=(s("a4b3"),s("2877")),d=Object(u["a"])(l,i,a,!1,null,null,null);t["default"]=d.exports},f3df:function(e,t,s){}}]);