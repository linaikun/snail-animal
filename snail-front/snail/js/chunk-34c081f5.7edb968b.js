(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34c081f5","chunk-409ab0ac"],{"0808":function(t,e,i){},"24e2":function(t,e,i){},"358a":function(t,e,i){},"5ea1":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload-thumb"},[i("vuedraggable",{staticClass:"list-group",attrs:{list:t.uploadList,disabled:!t.draggable||!t.multiple,animation:200,"ghost-class":"thumb-ghost"},on:{end:t.onEnd}},t._l(t.uploadList,(function(e,a){return i("div",{key:a,staticClass:"upload-list",style:{width:"calc("+t.width+" + 2px)",height:"calc("+t.height+" + 2px)",lineHeight:t.height}},["finished"==e.status?i("div",[i("img",{style:{height:t.height},attrs:{src:e.url}}),i("div",{staticClass:"upload-list-cover"},[i("Icon",{attrs:{type:"ios-eye-outline"},on:{click:function(i){return t.handleView(e.url,a)}}}),i("Icon",{directives:[{name:"show",rawName:"v-show",value:!t.preview,expression:"!preview"}],attrs:{type:"ios-trash-outline"},on:{click:function(i){return t.handleRemove(e)}}})],1)]):i("div",[e.showProgress?i("Progress",{attrs:{percent:e.percentage,"hide-info":""}}):t._e()],1)])})),0),i("Upload",{directives:[{name:"show",rawName:"v-show",value:!t.preview,expression:"!preview"}],ref:"upload",staticClass:"upload-btn",style:{width:t.width},attrs:{multiple:t.multiple,"show-upload-list":!1,"on-success":t.handleSuccess,"on-error":t.handleError,format:t.format,accept:t.accept,"max-size":1024*t.maxSize,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,"before-upload":t.handleBeforeUpload,type:"drag",action:t.uploadFileUrl,headers:t.accessToken}},[i("div",{staticClass:"upload-camera",style:{width:t.width,height:t.height,lineHeight:t.height}},[i("Icon",{attrs:{type:"md-camera",size:"20"}})],1)])],1)},s=[],o=(i("0808"),i("6a37")),n=i.n(o),l=i("365c"),r=i("289a"),u=i.n(r);function c(t){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}var m={name:"uploadPicThumb",components:{vuedraggable:u.a},props:{value:{type:null},preview:{type:Boolean,default:!1},draggable:{type:Boolean,default:!0},multiple:{type:Boolean,default:!0},maxSize:{type:Number,default:5},limit:{type:Number,default:10},width:{type:String,default:"60px"},height:{type:String,default:"60px"},accept:{type:String,default:".jpg, .jpeg, .png, .gif"}},computed:{format:function(){if(this.accept){var t=[];return this.accept.split(",").forEach((function(e){t.push(e.replace(".","").replace(" ",""))})),t}return[]}},data:function(){return{accessToken:{},uploadFileUrl:l["Xc"],uploadList:[]}},methods:{onEnd:function(){this.returnValue()},init:function(){this.setData(this.value,!0),this.accessToken={accessToken:this.getStore("accessToken")}},handleView:function(t,e){var i=new Image;i.src=t;var a=new n.a(i,{hidden:function(){a.destroy()}});a.show()},handleRemove:function(t){var e=this.uploadList;this.uploadList.splice(e.indexOf(t),1),this.returnValue()},handleSuccess:function(t,e){t.success?(e.url=t.result,!this.multiple&&this.uploadList.length>0&&this.uploadList.splice(0,1),this.uploadList.push(e),this.returnValue()):this.$Message.error(t.message)},handleError:function(t,e,i){this.$Message.error(t.toString())},handleFormatError:function(t){this.$Notice.warning({title:"不支持的文件格式",desc:"所选文件‘ "+t.name+" ’格式不正确, 请选择 "+this.accept+" 图片格式文件"})},handleMaxSize:function(t){this.$Notice.warning({title:"文件大小过大",desc:"所选文件‘ "+t.name+" ’大小过大, 不得超过 "+this.maxSize+"M."})},handleBeforeUpload:function(){return!(this.multiple&&this.uploadList.length>=this.limit)||(this.$Message.warning("最多只能上传"+this.limit+"张图片"),!1)},returnValue:function(){if(!this.uploadList||this.uploadList.length<1)this.multiple?(this.$emit("input",[]),this.$emit("on-change",[])):(this.$emit("input",""),this.$emit("on-change",""));else if(this.multiple){var t=[];this.uploadList.forEach((function(e){t.push(e.url)})),this.$emit("input",t),this.$emit("on-change",t)}else{var e=this.uploadList[0].url;this.$emit("input",e),this.$emit("on-change",e)}},setData:function(t,e){var i=this;if("string"==typeof t){if(this.multiple)return void this.$Message.warning("多张上传仅支持数组数据类型");if(!t)return;this.uploadList=[];var a={url:t,status:"finished"};this.uploadList.push(a),this.$emit("on-change",t)}else if("object"==c(t)){if(!this.multiple)return void this.$Message.warning("单张上传仅支持字符串数据类型");if(this.uploadList=[],t.length>this.limit){for(var s=0;s<this.limit;s++){var o={url:t[s],status:"finished"};this.uploadList.push(o)}this.$emit("on-change",t.slice(0,this.limit)),e&&this.$emit("input",t.slice(0,this.limit)),this.$Message.warning("最多只能上传"+this.limit+"张图片")}else t.forEach((function(t){var e={url:t,status:"finished"};i.uploadList.push(e)})),this.$emit("on-change",t)}}},watch:{value:function(t){this.setData(t)}},mounted:function(){this.init()}},p=m,h=(i("c092"),i("2877")),d=Object(h["a"])(p,a,s,!1,null,null,null);e["default"]=d.exports},"6ac6":function(t,e,i){"use strict";i("24e2")},b1cd:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Drawer",{attrs:{title:t.title,width:"500",draggable:"","mask-closable":"0"==t.type},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[i("div",{staticClass:"drawer-content",style:{maxHeight:t.maxHeight}},[i("Form",{ref:"form",attrs:{model:t.form,rules:t.formValidate,"label-position":"top"}},[i("Row",{attrs:{gutter:32}},[i("Col",{attrs:{span:"24"}},[i("FormItem",{attrs:{label:"公司地址",prop:"company_adress"}},[i("Input",{attrs:{clearable:""},model:{value:t.form.company_adress,callback:function(e){t.$set(t.form,"company_adress",e)},expression:"form.company_adress"}})],1)],1)],1),i("Row",{attrs:{gutter:32}},[i("Col",{attrs:{span:"24"}},[i("FormItem",{attrs:{label:"公司logo",prop:"company_logo"}},[i("uploadThumb",{attrs:{multiple:""},model:{value:t.form.company_logo,callback:function(e){t.$set(t.form,"company_logo",e)},expression:"form.company_logo"}})],1)],1)],1),i("Row",{attrs:{gutter:32}},[i("Col",{attrs:{span:"24"}},[i("FormItem",{attrs:{label:"公司名称",prop:"company_name"}},[i("Input",{attrs:{clearable:""},model:{value:t.form.company_name,callback:function(e){t.$set(t.form,"company_name",e)},expression:"form.company_name"}})],1)],1)],1),i("Row",{attrs:{gutter:32}},[i("Col",{attrs:{span:"24"}},[i("FormItem",{attrs:{label:"公司电话",prop:"company_tel"}},[i("Input",{attrs:{clearable:""},model:{value:t.form.company_tel,callback:function(e){t.$set(t.form,"company_tel",e)},expression:"form.company_tel"}})],1)],1)],1),i("Row",{attrs:{gutter:32}},[i("Col",{attrs:{span:"24"}},[i("FormItem",{attrs:{label:"公司地址坐标X",prop:"location_x"}},[i("Input",{attrs:{clearable:""},model:{value:t.form.location_x,callback:function(e){t.$set(t.form,"location_x",e)},expression:"form.location_x"}})],1)],1)],1),i("Row",{attrs:{gutter:32}},[i("Col",{attrs:{span:"24"}},[i("FormItem",{attrs:{label:"公司地址坐标Y",prop:"location_y"}},[i("Input",{attrs:{clearable:""},model:{value:t.form.location_y,callback:function(e){t.$set(t.form,"location_y",e)},expression:"form.location_y"}})],1)],1)],1),i("Row",{attrs:{gutter:32}},[i("Col",{attrs:{span:"24"}},[i("FormItem",{attrs:{label:"微信名称",prop:"wx_name"}},[i("Input",{attrs:{clearable:""},model:{value:t.form.wx_name,callback:function(e){t.$set(t.form,"wx_name",e)},expression:"form.wx_name"}})],1)],1)],1),i("Row",{attrs:{gutter:32}},[i("Col",{attrs:{span:"24"}},[i("FormItem",{attrs:{label:"微信ID",prop:"wxunid"}},[i("InputNumber",{staticStyle:{width:"100%"},model:{value:t.form.wxunid,callback:function(e){t.$set(t.form,"wxunid",e)},expression:"form.wxunid"}})],1)],1)],1)],1)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:"0"!=t.type,expression:"type!='0'"}],staticClass:"drawer-footer br"},[i("Button",{attrs:{type:"primary",loading:t.submitLoading},on:{click:t.submit}},[t._v("提交")]),i("Button",{on:{click:function(e){t.visible=!1}}},[t._v("取消")])],1)])],1)},s=[],o=i("365c"),n=i("5ea1"),l={name:"addEdit",components:{uploadThumb:n["default"]},props:{value:{type:Boolean,default:!1},data:{type:Object},type:{type:String,default:"0"}},data:function(){return{visible:this.value,title:"",submitLoading:!1,maxHeight:510,form:{company_adress:"",company_logo:[],company_name:"",company_tel:"",location_x:"",location_y:"",wx_name:"",wxunid:0},formValidate:{}}},methods:{init:function(){},submit:function(){var t=this;this.$refs.form.validate((function(e){e&&("1"==t.type?(t.submitLoading=!0,Object(o["V"])(t.form).then((function(e){t.submitLoading=!1,e.success&&(t.$Message.success("操作成功"),t.$emit("on-submit",!0),t.visible=!1)}))):(t.submitLoading=!0,Object(o["a"])(t.form).then((function(e){t.submitLoading=!1,e.success&&(t.$Message.success("操作成功"),t.$emit("on-submit",!0),t.visible=!1)}))))}))},setCurrentValue:function(t){t!==this.visible&&("1"==this.type?(this.title="编辑",this.maxHeight=Number(document.documentElement.clientHeight-121)+"px"):"2"==this.type?(this.title="添加",this.maxHeight=Number(document.documentElement.clientHeight-121)+"px"):(this.title="详细信息",this.maxHeight="100%"),this.$refs.form.resetFields(),"0"==this.type||"1"==this.type?this.form=this.data:delete this.form.id,this.visible=t)}},watch:{value:function(t){this.setCurrentValue(t)},visible:function(t){this.$emit("input",t)}},mounted:function(){this.init()}},r=l,u=(i("6ac6"),i("2877")),c=Object(u["a"])(r,a,s,!1,null,null,null);e["default"]=c.exports},c092:function(t,e,i){"use strict";i("358a")}}]);