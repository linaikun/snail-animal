(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-aa23f304"],{"3a08":function(t,e,o){"use strict";o.r(e);var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"search"},[o("Card",[o("Row",{staticClass:"operation"},[o("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:t.addMenu}},[t._v("添加子节点")]),o("Button",{attrs:{icon:"md-add"},on:{click:t.addRootMenu}},[t._v("添加顶部菜单")]),o("Button",{attrs:{icon:"md-trash"},on:{click:t.delAll}},[t._v("批量删除")]),o("Dropdown",{on:{"on-click":t.handleDropdown}},[o("Button",[t._v(" 更多操作 "),o("Icon",{attrs:{type:"md-arrow-dropdown"}})],1),o("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[o("DropdownItem",{attrs:{name:"refresh"}},[t._v("刷新")]),o("DropdownItem",{attrs:{name:"expandOne"}},[t._v("收合所有")]),o("DropdownItem",{attrs:{name:"expandTwo"}},[t._v("仅展开一级")]),o("DropdownItem",{attrs:{name:"expandThree"}},[t._v("仅展开两级")]),o("DropdownItem",{attrs:{name:"expandAll"}},[t._v("展开所有")])],1)],1),o("i-switch",{staticStyle:{"margin-left":"5px"},attrs:{size:"large"},model:{value:t.strict,callback:function(e){t.strict=e},expression:"strict"}},[o("span",{attrs:{slot:"open"},slot:"open"},[t._v("级联")]),o("span",{attrs:{slot:"close"},slot:"close"},[t._v("单选")])])],1),o("Row",{attrs:{type:"flex",justify:"start",gutter:16}},[o("Col",{attrs:{sm:8,md:8,lg:8,xl:6}},[o("Alert",{attrs:{"show-icon":""}},[t._v(" 当前选择编辑： "),o("span",{staticClass:"select-title"},[t._v(t._s(t.editTitle))]),t.form.id?o("a",{staticClass:"select-clear",on:{click:t.cancelEdit}},[t._v("取消选择")]):t._e()]),o("Input",{attrs:{suffix:"ios-search",placeholder:"输入菜单名搜索",clearable:""},on:{"on-change":t.search},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}}),o("div",{staticClass:"tree-bar",style:{maxHeight:t.maxHeight}},[o("Tree",{ref:"tree",attrs:{data:t.data,"show-checkbox":"",render:t.renderContent,"check-strictly":!t.strict},on:{"on-select-change":t.selectTree,"on-check-change":t.changeSelect}}),t.loading?o("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)],1),o("Col",{attrs:{sm:16,md:16,lg:16,xl:9}},[o("Form",{ref:"form",attrs:{model:t.form,"label-width":110,rules:t.formValidate}},[o("FormItem",{attrs:{label:"类型",prop:"type"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:-1==t.form.type,expression:"form.type == -1"}]},[o("Icon",{staticStyle:{"margin-right":"5px"},attrs:{type:"ios-navigate-outline",size:"16"}}),o("span",[t._v("顶部菜单")])],1),o("div",{directives:[{name:"show",rawName:"v-show",value:0==t.form.type,expression:"form.type == 0"}]},[o("Icon",{staticStyle:{"margin-right":"5px"},attrs:{type:"ios-list-box-outline",size:"16"}}),o("span",[t._v("页面菜单")])],1),o("div",{directives:[{name:"show",rawName:"v-show",value:1==t.form.type,expression:"form.type == 1"}]},[o("Icon",{staticStyle:{"margin-right":"5px"},attrs:{type:"md-radio-button-on",size:"16"}}),o("span",[t._v("操作按钮")])],1)]),-1==t.form.type||0==t.form.type?o("FormItem",{attrs:{label:"名称",prop:"title"}},[o("Input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1):t._e(),1==t.form.type?o("FormItem",{staticClass:"block-tool",attrs:{label:"名称",prop:"title"}},[o("Tooltip",{attrs:{placement:"right",content:"操作按钮名称不得重复"}},[o("Input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1):t._e(),0==t.form.type?o("FormItem",{attrs:{label:"路径",prop:"path"}},[o("Input",{model:{value:t.form.path,callback:function(e){t.$set(t.form,"path",e)},expression:"form.path"}})],1):t._e(),1==t.form.type?o("FormItem",{staticClass:"block-tool",attrs:{label:"请求路径",prop:"path"}},[o("Tooltip",{attrs:{placement:"right","max-width":230,transfer:"",content:"填写后端请求URL，后端将作权限拦截，若无可填写'无'或其他"}},[o("Input",{model:{value:t.form.path,callback:function(e){t.$set(t.form,"path",e)},expression:"form.path"}})],1)],1):t._e(),1==t.form.type?o("FormItem",{attrs:{label:"按钮权限类型",prop:"buttonType"}},[o("Select",{attrs:{placeholder:"请选择或输入搜索",filterable:"",clearable:""},model:{value:t.form.buttonType,callback:function(e){t.$set(t.form,"buttonType",e)},expression:"form.buttonType"}},t._l(t.dictPermissions,(function(e,r){return o("Option",{key:r,attrs:{value:e.value}},[t._v(t._s(e.title))])})),1)],1):t._e(),-1==t.form.type?o("FormItem",{staticClass:"block-tool",attrs:{label:"英文名",prop:"name"}},[o("Tooltip",{attrs:{placement:"right",content:"需唯一"}},[o("Input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1):t._e(),0==t.form.type?o("FormItem",{staticClass:"block-tool",attrs:{label:"路由英文名",prop:"name"}},[o("Tooltip",{attrs:{placement:"right",content:"需唯一",transfer:""}},[o("Input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1):t._e(),-1==t.form.type||0==t.form.type?o("FormItem",{attrs:{label:"图标",prop:"icon"}},[o("icon-choose",{model:{value:t.form.icon,callback:function(e){t.$set(t.form,"icon",e)},expression:"form.icon"}})],1):t._e(),-1==t.form.type?o("FormItem",{attrs:{label:"系统站内菜单",prop:"isMenu"}},[o("i-switch",{attrs:{size:"large"},model:{value:t.form.isMenu,callback:function(e){t.$set(t.form,"isMenu",e)},expression:"form.isMenu"}},[o("span",{attrs:{slot:"open"},slot:"open"},[t._v("是")]),o("span",{attrs:{slot:"close"},slot:"close"},[t._v("否")])])],1):t._e(),-1!=t.form.type||t.form.isMenu?t._e():o("FormItem",{attrs:{label:"其他链接",prop:"url"}},[o("Input",{attrs:{placeholder:"Http链接或路由名"},model:{value:t.form.url,callback:function(e){t.$set(t.form,"url",e)},expression:"form.url"}})],1),-1!=t.form.type||t.form.isMenu?t._e():o("FormItem",{attrs:{label:"打开方式",prop:"description"}},[o("Select",{attrs:{placeholder:"请选择"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}},[o("Option",{attrs:{value:"direct",label:"直接跳转"}},[o("span",{staticStyle:{"margin-right":"10px"}},[t._v("直接跳转")]),o("span",{staticStyle:{color:"#ccc"}},[t._v("其他链接填写完整链接")])]),o("Option",{attrs:{value:"window",label:"新窗口打开"}},[o("span",{staticStyle:{"margin-right":"10px"}},[t._v("新窗口打开")]),o("span",{staticStyle:{color:"#ccc"}},[t._v("其他链接填写完整链接")])]),o("Option",{attrs:{value:"route",label:"站内路由"}},[o("span",{staticStyle:{"margin-right":"10px"}},[t._v("站内路由")]),o("span",{staticStyle:{color:"#ccc"}},[t._v("其他链接填写Vue路由名")])])],1)],1),0==t.form.type?o("FormItem",{attrs:{label:"前端组件",prop:"component"}},[o("Input",{model:{value:t.form.component,callback:function(e){t.$set(t.form,"component",e)},expression:"form.component"}})],1):t._e(),0==t.form.type&&2==t.form.level?o("FormItem",{attrs:{label:"第三方链接",prop:"url"}},[o("Input",{attrs:{placeholder:"http://"},on:{"on-change":t.changeEditUrl},model:{value:t.form.url,callback:function(e){t.$set(t.form,"url",e)},expression:"form.url"}}),o("span",{staticClass:"url-remark"},[t._v("前端组件需为 sys/monitor/monitor 时生效")])],1):t._e(),o("FormItem",{attrs:{label:"排序值",prop:"sortOrder"}},[o("Tooltip",{attrs:{trigger:"hover",placement:"right",content:"值越小越靠前，支持小数"}},[o("InputNumber",{attrs:{max:1e3,min:0},model:{value:t.form.sortOrder,callback:function(e){t.$set(t.form,"sortOrder",e)},expression:"form.sortOrder"}})],1)],1),1==t.form.level?o("FormItem",{staticClass:"block-tool",attrs:{label:"始终显示",prop:"showAlways"}},[o("i-switch",{attrs:{size:"large"},model:{value:t.form.showAlways,callback:function(e){t.$set(t.form,"showAlways",e)},expression:"form.showAlways"}},[o("span",{attrs:{slot:"open"},slot:"open"},[t._v("是")]),o("span",{attrs:{slot:"close"},slot:"close"},[t._v("否")])]),o("Tooltip",{staticStyle:{display:"inline-block !important"},attrs:{content:"当设为不始终显示时，一级菜单下仅有一个子级菜单只会显示该子级菜单，避免用户多次点击",placement:"right",transfer:"","max-width":"280"}},[o("Icon",{staticStyle:{"margin-left":"10px",cursor:"pointer"},attrs:{type:"md-help-circle",size:"20",color:"#c5c5c5"}})],1)],1):t._e(),o("FormItem",{attrs:{label:"是否启用",prop:"status"}},[o("i-switch",{attrs:{size:"large","true-value":0,"false-value":-1},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[o("span",{attrs:{slot:"open"},slot:"open"},[t._v("启用")]),o("span",{attrs:{slot:"close"},slot:"close"},[t._v("禁用")])])],1),o("FormItem",[o("Button",{staticStyle:{"margin-right":"5px"},attrs:{loading:t.submitLoading,type:"primary",icon:"ios-create-outline"},on:{click:t.submitEdit}},[t._v("修改并保存")]),o("Button",{on:{click:t.handleReset}},[t._v("重置")])],1)],1)],1)],1)],1),o("Modal",{attrs:{draggable:"",title:t.modalTitle,"mask-closable":!1,width:500,styles:{top:"30px"}},model:{value:t.menuModalVisible,callback:function(e){t.menuModalVisible=e},expression:"menuModalVisible"}},[o("Form",{ref:"formAdd",attrs:{model:t.formAdd,"label-width":110,rules:t.formValidate}},[t.showParent?o("div",[o("FormItem",{attrs:{label:"上级节点："}},[t._v(t._s(t.parentTitle))])],1):t._e(),o("FormItem",{attrs:{label:"类型",prop:"type"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:-1==t.formAdd.type,expression:"formAdd.type == -1"}]},[o("Icon",{staticStyle:{"margin-right":"5px"},attrs:{type:"ios-navigate-outline",size:"16"}}),o("span",[t._v("顶部菜单")])],1),o("div",{directives:[{name:"show",rawName:"v-show",value:0==t.formAdd.type,expression:"formAdd.type == 0"}]},[o("Icon",{staticStyle:{"margin-right":"5px"},attrs:{type:"ios-list-box-outline",size:"16"}}),o("span",[t._v("页面菜单")])],1),o("div",{directives:[{name:"show",rawName:"v-show",value:1==t.formAdd.type,expression:"formAdd.type == 1"}]},[o("Icon",{staticStyle:{"margin-right":"5px"},attrs:{type:"md-radio-button-on",size:"16"}}),o("span",[t._v("操作按钮")])],1)]),-1==t.formAdd.type||0==t.formAdd.type?o("FormItem",{attrs:{label:"名称",prop:"title"}},[o("Input",{model:{value:t.formAdd.title,callback:function(e){t.$set(t.formAdd,"title",e)},expression:"formAdd.title"}})],1):t._e(),1==t.formAdd.type?o("FormItem",{staticClass:"block-tool",attrs:{label:"名称",prop:"title"}},[o("Tooltip",{attrs:{placement:"right",content:"操作按钮名称不得重复"}},[o("Input",{model:{value:t.formAdd.title,callback:function(e){t.$set(t.formAdd,"title",e)},expression:"formAdd.title"}})],1)],1):t._e(),0==t.formAdd.type?o("FormItem",{attrs:{label:"路径",prop:"path"}},[o("Input",{model:{value:t.formAdd.path,callback:function(e){t.$set(t.formAdd,"path",e)},expression:"formAdd.path"}})],1):t._e(),1==t.formAdd.type?o("FormItem",{staticClass:"block-tool",attrs:{label:"请求路径",prop:"path"}},[o("Tooltip",{attrs:{placement:"right","max-width":230,transfer:"",content:"填写后端请求URL，后端将作权限拦截，若无可填写'无'或其他"}},[o("Input",{model:{value:t.formAdd.path,callback:function(e){t.$set(t.formAdd,"path",e)},expression:"formAdd.path"}})],1)],1):t._e(),1==t.formAdd.type?o("FormItem",{attrs:{label:"按钮权限类型",prop:"buttonType"}},[o("Select",{attrs:{placeholder:"请选择或输入搜索",filterable:"",clearable:""},model:{value:t.formAdd.buttonType,callback:function(e){t.$set(t.formAdd,"buttonType",e)},expression:"formAdd.buttonType"}},t._l(t.dictPermissions,(function(e,r){return o("Option",{key:r,attrs:{value:e.value}},[t._v(t._s(e.title))])})),1)],1):t._e(),-1==t.formAdd.type?o("FormItem",{staticClass:"block-tool",attrs:{label:"英文名",prop:"name"}},[o("Tooltip",{attrs:{placement:"right",content:"需唯一"}},[o("Input",{model:{value:t.formAdd.name,callback:function(e){t.$set(t.formAdd,"name",e)},expression:"formAdd.name"}})],1)],1):t._e(),0==t.formAdd.type?o("FormItem",{staticClass:"block-tool",attrs:{label:"路由英文名",prop:"name"}},[o("Tooltip",{attrs:{placement:"right",content:"需唯一"}},[o("Input",{model:{value:t.formAdd.name,callback:function(e){t.$set(t.formAdd,"name",e)},expression:"formAdd.name"}})],1)],1):t._e(),-1==t.formAdd.type||0==t.formAdd.type?o("FormItem",{attrs:{label:"图标",prop:"icon"}},[o("icon-choose",{model:{value:t.formAdd.icon,callback:function(e){t.$set(t.formAdd,"icon",e)},expression:"formAdd.icon"}})],1):t._e(),-1==t.formAdd.type?o("FormItem",{attrs:{label:"系统站内菜单",prop:"isMenu"}},[o("i-switch",{attrs:{size:"large"},model:{value:t.formAdd.isMenu,callback:function(e){t.$set(t.formAdd,"isMenu",e)},expression:"formAdd.isMenu"}},[o("span",{attrs:{slot:"open"},slot:"open"},[t._v("是")]),o("span",{attrs:{slot:"close"},slot:"close"},[t._v("否")])])],1):t._e(),-1!=t.formAdd.type||t.formAdd.isMenu?t._e():o("FormItem",{attrs:{label:"其他链接",prop:"url"}},[o("Input",{attrs:{placeholder:"Http链接或路由名"},model:{value:t.formAdd.url,callback:function(e){t.$set(t.formAdd,"url",e)},expression:"formAdd.url"}})],1),-1!=t.formAdd.type||t.formAdd.isMenu?t._e():o("FormItem",{attrs:{label:"打开方式",prop:"description"}},[o("Select",{attrs:{placeholder:"请选择"},model:{value:t.formAdd.description,callback:function(e){t.$set(t.formAdd,"description",e)},expression:"formAdd.description"}},[o("Option",{attrs:{value:"direct",label:"直接跳转"}},[o("span",{staticStyle:{"margin-right":"10px"}},[t._v("直接跳转")]),o("span",{staticStyle:{color:"#ccc"}},[t._v("其他链接填写完整链接")])]),o("Option",{attrs:{value:"window",label:"新窗口打开"}},[o("span",{staticStyle:{"margin-right":"10px"}},[t._v("新窗口打开")]),o("span",{staticStyle:{color:"#ccc"}},[t._v("其他链接填写完整链接")])]),o("Option",{attrs:{value:"route",label:"站内路由"}},[o("span",{staticStyle:{"margin-right":"10px"}},[t._v("站内路由")]),o("span",{staticStyle:{color:"#ccc"}},[t._v("其他链接填写Vue路由名")])])],1)],1),0==t.formAdd.type?o("FormItem",{attrs:{label:"前端组件",prop:"component"}},[o("Input",{model:{value:t.formAdd.component,callback:function(e){t.$set(t.formAdd,"component",e)},expression:"formAdd.component"}})],1):t._e(),0==t.formAdd.type&&2==t.formAdd.level?o("FormItem",{attrs:{label:"第三方链接",prop:"url"}},[o("Input",{attrs:{placeholder:"http://"},on:{"on-change":t.changeAddUrl},model:{value:t.formAdd.url,callback:function(e){t.$set(t.formAdd,"url",e)},expression:"formAdd.url"}}),o("span",{staticClass:"url-remark"},[t._v("前端组件需为 sys/monitor/monitor 时生效")])],1):t._e(),o("FormItem",{attrs:{label:"排序值",prop:"sortOrder"}},[o("Tooltip",{attrs:{trigger:"hover",placement:"right",content:"值越小越靠前，支持小数"}},[o("InputNumber",{attrs:{max:1e3,min:0},model:{value:t.formAdd.sortOrder,callback:function(e){t.$set(t.formAdd,"sortOrder",e)},expression:"formAdd.sortOrder"}})],1)],1),1==t.formAdd.level?o("FormItem",{staticClass:"block-tool",attrs:{label:"始终显示",prop:"showAlways"}},[o("i-switch",{attrs:{size:"large"},model:{value:t.formAdd.showAlways,callback:function(e){t.$set(t.formAdd,"showAlways",e)},expression:"formAdd.showAlways"}},[o("span",{attrs:{slot:"open"},slot:"open"},[t._v("是")]),o("span",{attrs:{slot:"close"},slot:"close"},[t._v("否")])]),o("Tooltip",{staticStyle:{display:"inline-block !important"},attrs:{content:"当设为不始终显示时，一级菜单下仅有一个子级菜单只会显示该子级菜单，避免用户多次点击",placement:"right",transfer:"","max-width":"280"}},[o("Icon",{staticStyle:{"margin-left":"10px",cursor:"pointer"},attrs:{type:"md-help-circle",size:"20",color:"#c5c5c5"}})],1)],1):t._e(),o("FormItem",{attrs:{label:"是否启用",prop:"status"}},[o("i-switch",{attrs:{size:"large","true-value":0,"false-value":-1},model:{value:t.formAdd.status,callback:function(e){t.$set(t.formAdd,"status",e)},expression:"formAdd.status"}},[o("span",{attrs:{slot:"open"},slot:"open"},[t._v("启用")]),o("span",{attrs:{slot:"close"},slot:"close"},[t._v("禁用")])])],1)],1),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"text"},on:{click:function(e){t.menuModalVisible=!1}}},[t._v("取消")]),o("Button",{attrs:{type:"primary",loading:t.submitLoading},on:{click:t.submitAdd}},[t._v("提交")])],1)],1)],1)},s=[],a=o("365c"),l=o("6fb8"),n=o("c276"),i={name:"menu-manage",components:{IconChoose:l["default"]},data:function(){return{loading:!0,strict:!0,maxHeight:"500px",expandLevel:1,menuModalVisible:!1,iconModalVisible:!1,selectList:[],showParent:!1,searchKey:"",parentTitle:"",editTitle:"",modalTitle:"",form:{id:"",title:"",name:"",icon:"",path:"",component:"",parentId:"",buttonType:"",type:0,sortOrder:0,level:0,status:0,url:"",showAlways:!0},formAdd:{buttonType:""},formValidate:{title:[{required:!0,message:"名称不能为空",trigger:"change"}],name:[{required:!0,message:"路由英文名不能为空",trigger:"change"}],icon:[{required:!0,message:"图标不能为空",trigger:"click"}],path:[{required:!0,message:"路径不能为空",trigger:"change"}],component:[{required:!0,message:"前端组件不能为空",trigger:"change"}],sortOrder:[{required:!0,type:"number",message:"排序值不能为空",trigger:"change"}]},submitLoading:!1,data:[],dictPermissions:[]}},methods:{init:function(){this.getAllList(),this.getDictPermissions()},getDictPermissions:function(){var t=this;Object(a["Nb"])("permission_type").then((function(e){e.success&&(t.dictPermissions=e.result)}))},renderContent:function(t,e){e.root,e.node;var o=e.data,r="";return r=0==o.level?"ios-navigate":1==o.level?"md-list-box":2==o.level?"md-list":3==o.level?"md-radio-button-on":"md-radio-button-off",t("span",[t("span",[t("Icon",{props:{type:r,size:"16"},style:{"margin-right":"8px","margin-bottom":"3px"}}),t("span",o.title)])])},handleDropdown:function(t){"expandOne"==t?this.expandLevel=1:"expandTwo"==t?this.expandLevel=2:"expandThree"==t?this.expandLevel=3:"expandAll"==t&&(this.expandLevel=4),this.getAllList()},getAllList:function(){var t=this;this.loading=!0,this.getRequest("/permission/getAllList").then((function(e){if(t.loading=!1,e.success){var o=t.expandLevel;e.result.forEach((function(t){1==o?(0==t.level&&(t.expand=!1),t.children&&t.children.length>0&&t.children.forEach((function(t){1==t.level&&(t.expand=!1),t.children&&t.children.length>0&&t.children.forEach((function(t){2==t.level&&(t.expand=!1)}))}))):2==o?(0==t.level&&(t.expand=!0),t.children&&t.children.length>0&&t.children.forEach((function(t){1==t.level&&(t.expand=!1),t.children&&t.children.length>0&&t.children.forEach((function(t){2==t.level&&(t.expand=!1)}))}))):3==o&&(0==t.level&&(t.expand=!0),t.children&&t.children.length>0&&t.children.forEach((function(t){1==t.level&&(t.expand=!0),t.children&&t.children.length>0&&t.children.forEach((function(t){2==t.level&&(t.expand=!1)}))})))})),t.data=e.result}}))},search:function(){var t=this;this.searchKey?(this.loading=!0,Object(a["Kc"])({title:this.searchKey}).then((function(e){t.loading=!1,e.success&&(t.data=e.result)}))):this.getAllList()},selectTree:function(t){if(t.length>0){for(var e in t[0])null==t[0][e]&&(t[0][e]="");var o=JSON.stringify(t[0]),r=JSON.parse(o);this.form=r,this.editTitle=r.title}else this.cancelEdit()},cancelEdit:function(){var t=this.$refs.tree.getSelectedNodes()[0];t&&(t.selected=!1),this.$refs.form.resetFields(),this.form.id="",this.editTitle=""},handleReset:function(){var t=this.form.type;this.$refs.form.resetFields(),this.form.icon="",this.form.component="",this.form.type=t},submitEdit:function(){var t=this;this.$refs.form.validate((function(e){if(e){if(!t.form.id)return void t.$Message.warning("请先点击选择要修改的菜单节点");t.submitLoading=!0,null==t.form.sortOrder&&(t.form.sortOrder=""),null==t.form.buttonType&&(t.form.buttonType=""),1==t.form.type&&(t.form.name="",t.form.icon="",t.form.component=""),Object(a["lb"])(t.form).then((function(e){t.submitLoading=!1,e.success&&(t.$Message.success("编辑成功"),t.$store.commit("setAdded",!1),n["a"].initRouter(t),t.init(),t.menuModalVisible=!1)}))}}))},submitAdd:function(){var t=this;this.$refs.formAdd.validate((function(e){e&&(t.submitLoading=!0,1==t.formAdd.type&&(t.formAdd.name="",t.formAdd.icon="",t.formAdd.component=""),Object(a["k"])(t.formAdd).then((function(e){t.submitLoading=!1,e.success&&(t.$Message.success("添加成功"),t.$store.commit("setAdded",!1),n["a"].initRouter(t),t.init(),t.menuModalVisible=!1)})))}))},changeEditUrl:function(t){var e=t.target.value;e.indexOf("http")>-1&&(this.form.component="sys/monitor/monitor")},changeAddUrl:function(t){var e=t.target.value;e.indexOf("http")>-1&&(this.formAdd.component="sys/monitor/monitor")},addMenu:function(){if(this.form.id){this.parentTitle=this.form.title,this.modalTitle="添加子节点(可拖动)",this.showParent=!0;var t=0;if(1==this.form.level)t=0;else if(2==this.form.level)t=1;else{if(3==this.form.level)return void this.$Modal.warning({title:"抱歉，不能添加啦",content:"左侧仅支持2级菜单目录"});t=0}this.formAdd={icon:"",type:t,parentId:this.form.id,level:Number(this.form.level)+1,sortOrder:this.form.children.length+1,buttonType:"",status:0,showAlways:!0},0==this.form.level&&(this.formAdd.path="/",this.formAdd.component="Main"),this.menuModalVisible=!0}else this.$Message.warning("请先点击选择一个菜单权限节点")},addRootMenu:function(){this.modalTitle="添加顶部菜单(可拖动)",this.showParent=!1,this.formAdd={type:-1,level:0,parentId:0,isMenu:!0,sortOrder:this.data.length+1,status:0},this.menuModalVisible=!0},changeSelect:function(t){this.selectList=t},delAll:function(){var t=this;this.selectList.length<=0?this.$Message.warning("您还未勾选要删除的数据"):this.$Modal.confirm({title:"确认删除",content:"您确认要删除所选的 "+this.selectList.length+" 条数据?",loading:!0,onOk:function(){var e="";t.selectList.forEach((function(t){e+=t.id+","})),e=e.substring(0,e.length-1),Object(a["L"])({ids:e}).then((function(e){t.$Modal.remove(),e.success&&(t.$Message.success("删除成功"),t.$store.commit("setAdded",!1),n["a"].initRouter(t),t.selectList=[],t.cancelEdit(),t.init())}))}})}},mounted:function(){var t=document.documentElement.clientHeight;this.maxHeight=Number(t-287)+"px",this.init()}},c=i,m=(o("d5b3"),o("2877")),d=Object(m["a"])(c,r,s,!1,null,null,null);e["default"]=d.exports},d5b3:function(t,e,o){"use strict";o("d5ea")},d5ea:function(t,e,o){}}]);