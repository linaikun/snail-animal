(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d994436"],{"81c1":function(t,e,n){"use strict";n.d(e,"x",(function(){return c})),n.d(e,"r",(function(){return i})),n.d(e,"y",(function(){return o})),n.d(e,"D",(function(){return a})),n.d(e,"F",(function(){return s})),n.d(e,"c",(function(){return u})),n.d(e,"s",(function(){return d})),n.d(e,"o",(function(){return f})),n.d(e,"J",(function(){return l})),n.d(e,"U",(function(){return p})),n.d(e,"X",(function(){return b})),n.d(e,"i",(function(){return m})),n.d(e,"K",(function(){return g})),n.d(e,"v",(function(){return h})),n.d(e,"w",(function(){return y})),n.d(e,"p",(function(){return O})),n.d(e,"L",(function(){return j})),n.d(e,"B",(function(){return D})),n.d(e,"I",(function(){return v})),n.d(e,"C",(function(){return k})),n.d(e,"G",(function(){return I})),n.d(e,"H",(function(){return T})),n.d(e,"V",(function(){return P})),n.d(e,"q",(function(){return w})),n.d(e,"j",(function(){return B})),n.d(e,"T",(function(){return x})),n.d(e,"t",(function(){return $})),n.d(e,"M",(function(){return C})),n.d(e,"k",(function(){return _})),n.d(e,"P",(function(){return S})),n.d(e,"Q",(function(){return M})),n.d(e,"z",(function(){return N})),n.d(e,"e",(function(){return F})),n.d(e,"f",(function(){return q})),n.d(e,"g",(function(){return L})),n.d(e,"n",(function(){return R})),n.d(e,"N",(function(){return H})),n.d(e,"O",(function(){return J})),n.d(e,"a",(function(){return V})),n.d(e,"u",(function(){return A})),n.d(e,"l",(function(){return E})),n.d(e,"R",(function(){return U})),n.d(e,"A",(function(){return z})),n.d(e,"d",(function(){return K})),n.d(e,"S",(function(){return W})),n.d(e,"h",(function(){return G})),n.d(e,"m",(function(){return Q})),n.d(e,"E",(function(){return X})),n.d(e,"b",(function(){return Y})),n.d(e,"W",(function(){return Z}));var r=n("7f80"),c="/snail/actModel/export/",i="/snail/actModel/deployByFile",o="/snail/actProcess/export",a="/snail/actProcess/getHighlightImg/",s=function(t){return Object(r["b"])("/actModel/getByCondition",t)},u=function(t){return Object(r["e"])("/actModel/add",t)},d=function(t,e){return Object(r["b"])("/actModel/deploy/".concat(t),e)},f=function(t){return Object(r["e"])("/actModel/delByIds",t)},l=function(t){return Object(r["b"])("/actProcess/getByCondition",t)},p=function(t){return Object(r["e"])("/actProcess/updateInfo",t)},b=function(t){return Object(r["e"])("/actProcess/updateStatus",t)},m=function(t,e){return Object(r["b"])("/actProcess/convertToModel/".concat(t),e)},g=function(t,e){return Object(r["b"])("/actProcess/getProcessNode/".concat(t),e)},h=function(t){return Object(r["e"])("/actProcess/editNodeUser",t)},y=function(t){return Object(r["e"])("/actProcess/editStartUser",t)},O=function(t){return Object(r["e"])("/actProcess/delByIds",t)},j=function(t){return Object(r["b"])("/actProcess/getRunningProcess",t)},D=function(t){return Object(r["b"])("/actProcess/getFinishedProcess",t)},v=function(t,e){return Object(r["b"])("/actProcess/getByKey/".concat(t),e)},k=function(t,e){return Object(r["b"])("/actProcess/getFirstNode/".concat(t),e)},I=function(t,e,n){return Object(r["b"])("/actProcess/getNextNode/".concat(t,"/").concat(e),n)},T=function(t,e){return Object(r["b"])("/actProcess/getNode/".concat(t),e)},P=function(t){return Object(r["e"])("/actProcess/updateInsStatus",t)},w=function(t){return Object(r["e"])("/actProcess/delInsByIds",t)},B=function(t){return Object(r["e"])("/actProcess/delHistoricInsByIds",t)},x=function(t){return Object(r["b"])("/actTask/todoList",t)},$=function(t){return Object(r["b"])("/actTask/doneList",t)},C=function(t,e){return Object(r["b"])("/actTask/historicFlow/".concat(t),e)},_=function(t){return Object(r["e"])("/actTask/delegate",t)},S=function(t){return Object(r["e"])("/actTask/pass",t)},M=function(t){return Object(r["e"])("/actTask/passAll",t)},N=function(t,e){return Object(r["b"])("/actTask/getBackList/".concat(t),e)},F=function(t){return Object(r["e"])("/actTask/back",t)},q=function(t){return Object(r["e"])("/actTask/backAll",t)},L=function(t){return Object(r["e"])("/actTask/backToTask",t)},R=function(t){return Object(r["e"])("/actTask/deleteHistoric",t)},H=function(t){return Object(r["b"])("/actCategory/getByParentId/0",t)},J=function(t,e){return Object(r["b"])("/actCategory/getByParentId/".concat(t),e)},V=function(t){return Object(r["e"])("/actCategory/add",t)},A=function(t){return Object(r["e"])("/actCategory/edit",t)},E=function(t){return Object(r["e"])("/actCategory/delByIds",t)},U=function(t){return Object(r["b"])("/actCategory/search",t)},z=function(t){return Object(r["b"])("/actBusiness/getByCondition",t)},K=function(t){return Object(r["e"])("/actBusiness/apply",t)},W=function(t){return Object(r["e"])("/actBusiness/start",t)},G=function(t){return Object(r["e"])("/actBusiness/cancel",t)},Q=function(t){return Object(r["e"])("/actBusiness/delByIds",t)},X=function(t,e){return Object(r["b"])("/leave/get/".concat(t),e)},Y=function(t){return Object(r["e"])("/leave/add",t)},Z=function(t){return Object(r["f"])("/leave/update",t)}},8695:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search"},[n("Card",[n("p",{attrs:{slot:"title"},slot:"title"},[0==t.type?n("span",[t._v("新增请假申请")]):1==t.type?n("span",[t._v("编辑请假申请")]):n("span",[t._v("查看请假申请详情")])]),n("Row",[n("Form",{ref:"form",staticStyle:{position:"relative"},attrs:{model:t.form,"label-width":100,rules:t.formValidate}},[0!=t.type&&1!=t.type?n("FormItem",{attrs:{label:"请假申请人",prop:"title"}},[t._v(t._s(t.form.createBy))]):t._e(),n("FormItem",{attrs:{label:"请假类型",prop:"type"}},[n("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},t._l(t.dictType,(function(e,r){return n("Option",{key:r,attrs:{value:e.value}},[t._v(t._s(e.title))])})),1)],1),n("FormItem",{attrs:{label:"标题",prop:"title"}},[n("Input",{staticStyle:{width:"550px"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),n("FormItem",{attrs:{label:"原因",prop:"description"}},[n("Input",{staticStyle:{width:"550px"},attrs:{type:"textarea",rows:5,placeholder:"请输入详细情况"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),n("FormItem",{attrs:{label:"请假时间范围",error:t.errorMsg}},[n("DatePicker",{staticStyle:{width:"550px"},attrs:{options:t.options,type:"datetimerange",format:"yyyy-MM-dd HH:mm",clearable:"",placeholder:"选择起始时间"},on:{"on-change":t.selectDateRange},model:{value:t.selectDate,callback:function(e){t.selectDate=e},expression:"selectDate"}})],1),n("FormItem",{attrs:{label:"请假时长"}},[t._v(t._s(t.form.duration)+" 小时")]),n("FormItem",{staticClass:"br"},[0==t.type||1==t.type?n("Button",{attrs:{type:"primary",loading:t.submitLoading},on:{click:t.handelSubmit}},[t._v("保存并关闭")]):t._e(),0!=t.type?n("Button",{attrs:{type:"info"},on:{click:t.handelPrint}},[t._v("打印")]):t._e(),n("Button",{on:{click:t.handelCancel}},[t._v("关闭")])],1),t.loading?n("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)],1)],1)],1)},c=[],i=n("81c1"),o=n("e351"),a=n.n(o),s={name:"leave-notcache",data:function(){return{type:0,loading:!1,modalVisible:!1,selectDate:null,dictType:this.$store.state.dict.leaveType,form:{type:"",title:"",description:"",startDate:"",endDate:"",duration:0},formValidate:{type:[{required:!0,message:"类型不能为空",trigger:"change"}],title:[{required:!0,message:"标题不能为空",trigger:"change"}],description:[{required:!0,message:"原因不能为空",trigger:"change"}]},errorMsg:"",submitLoading:!1,processList:[],backRoute:"",procDefId:"",options:{shortcuts:[{text:"1 天",value:function(){var t=new Date,e=new Date;return t.setTime(e.getTime()),[e,t]}},{text:"2 天",value:function(){var t=new Date,e=new Date;return t.setTime(e.getTime()+864e5),[e,t]}},{text:"3 天",value:function(){var t=new Date,e=new Date;return t.setTime(e.getTime()+1728e5),[e,t]}},{text:"1 周",value:function(){var t=new Date,e=new Date;return t.setTime(e.getTime()+5184e5),[e,t]}},{text:"1 个月",value:function(){var t=new Date,e=new Date;return t.setTime(e.getTime()+25056e5),[e,t]}}]}}},methods:{init:function(){this.type=this.$route.query.type,this.backRoute=this.$route.query.backRoute,this.procDefId=this.$route.query.procDefId,0!=this.type?(this.form.id=this.$route.query.id,this.getData()):(this.$refs.form.resetFields(),this.selectDate=[])},selectDateRange:function(t){if(t[0]){this.form.startDate=t[0],this.form.endDate=t[1];var e=this.stringToDate(this.form.startDate),n=this.stringToDate(this.form.endDate),r=n.getTime()-e.getTime(),c=Math.round(r/36e5);this.form.duration=c}else this.form.startDate="",this.form.endDate="",this.form.duration=0},stringToDate:function(t){var e=t.split(" "),n=e[0].split("-"),r=parseInt(n[0],10),c=parseInt(n[1],10)-1,i=parseInt(n[2],10),o=e[1].split(":"),a=parseInt(o[0],10),s=parseInt(o[1],10),u=new Date(r,c,i,a,s,0);return u},getData:function(){var t=this;this.loading=!0,Object(i["E"])(this.form.id).then((function(e){if(t.loading=!1,e.success){var n=e.result;for(var r in n)null==n[r]&&(n[r]="");var c=JSON.stringify(n),i=JSON.parse(c);t.form=i,t.selectDate=[],t.selectDate[0]=i.startDate,t.selectDate[1]=i.endDate}}))},handelSubmit:function(){var t=this;this.$refs.form.validate((function(e){if(e){if(!t.form.startDate)return void(t.errorMsg="请选择时间范围");t.errorMsg="",t.submitLoading=!0,0==t.type?(delete t.form.id,t.form.procDefId=t.procDefId,Object(i["b"])(t.form).then((function(e){t.submitLoading=!1,e.success&&(t.$Message.success("操作成功"),t.closeCurrentPage())}))):1==t.type&&Object(i["W"])(t.form).then((function(e){t.submitLoading=!1,e.success&&(t.$Message.success("操作成功"),t.closeCurrentPage())}))}}))},handelPrint:function(){var t=[],e=this.form;t.push(e),a()({printable:t,type:"json",header:"请假申请表",gridStyle:"border: 1px solid lightgray; text-align:center",properties:[{field:"createBy",displayName:"申请人"},{field:"type",displayName:"请假类型"},{field:"title",displayName:"标题"},{field:"description",displayName:"原因"},{field:"startDate",displayName:"请假开始时间"},{field:"endDate",displayName:"请假结束时间"},{field:"duration",displayName:"持续时长（小时）"}]})},handelCancel:function(){this.closeCurrentPage()},closeCurrentPage:function(){this.$store.commit("removeTag","leave"),localStorage.pageOpenedList=JSON.stringify(this.$store.state.app.pageOpenedList),this.$router.push({name:this.backRoute})}},mounted:function(){this.init()},watch:{$route:function(t,e){"leave"==t.name&&(this.getDictData(),this.type=this.$route.query.type,this.backRoute=this.$route.query.backRoute,this.procDefId=this.$route.query.procDefId,0!=this.type?(this.form.id=this.$route.query.id,this.getData()):(this.$refs.form.resetFields(),this.selectDate=[]))}}},u=s,d=n("2877"),f=Object(d["a"])(u,r,c,!1,null,null,null);e["default"]=f.exports}}]);