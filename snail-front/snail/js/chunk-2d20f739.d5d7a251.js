(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20f739"],{b44e:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Row",[a("Col",{attrs:{span:"12"}},[a("apexchart",{ref:"memoryInfo",attrs:{type:"area",height:"350",options:e.memory.chartOptions,series:e.memory.series}})],1),a("Col",{attrs:{span:"12"}},[a("apexchart",{ref:"keySize",attrs:{type:"area",height:"350",options:e.key.chartOptions,series:e.key.series}})],1)],1),a("Row",[a("Divider",{attrs:{orientation:"left"}},[e._v("Redis详细信息")]),a("Table",{attrs:{columns:e.columns,data:e.redisInfo,"show-header":!1,size:"small"}})],1)],1)},s=[],n=a("365c"),r={name:"redisMonitor",data:function(){return{memory:{series:[],chartOptions:{chart:{animations:{enabled:!0,easing:"linear",dynamicAnimation:{speed:5e3}},toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{curve:"smooth"},title:{text:"Redis内存实时占用情况（KB）",align:"left"},markers:{size:0},xaxis:{},yaxis:{},legend:{show:!1}},data:[],xdata:[]},key:{series:[],chartOptions:{chart:{animations:{enabled:!0,easing:"linear",dynamicAnimation:{speed:5e3}},toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},colors:["#f5564e"],stroke:{curve:"smooth"},title:{text:"Redis key实时数量（个）",align:"left"},markers:{size:0},xaxis:{},yaxis:{},legend:{show:!1}},data:[],xdata:[]},columns:[{key:"key",minWidth:200},{key:"description",minWidth:500},{key:"value",width:400}],redisInfo:[],timer:null}},methods:{init:function(){this.getData(),this.getInfo()},getData:function(){var e=this,t=1e10,a=1e10,i=-1e10,s=-1e10;this.timer=setInterval((function(){Object(n["gc"])().then((function(a){var s=Number(a.result.memory)/1024;s<t&&(t=s),s>i&&(i=s),e.memory.data.push(Number(s.toFixed(2))),e.memory.xdata.push(a.result.time),e.memory.data.length>=6&&(e.memory.data.shift(),e.memory.xdata.shift()),e.$refs.memoryInfo.updateSeries([{name:"内存(KB)",data:e.memory.data}]),e.$refs.memoryInfo.updateOptions({xaxis:{categories:e.memory.xdata},yaxis:{min:t-2,max:i+2}},!0,!0)})),Object(n["fc"])().then((function(t){var i=t.result.keySize;i<a&&(a=i),i>s&&(s=i),e.key.data.push(i),e.key.xdata.push(t.result.time),e.key.data.length>=6&&(e.key.data.shift(),e.key.xdata.shift()),e.$refs.keySize.updateSeries([{name:"key数量",data:e.key.data}]),e.$refs.keySize.updateOptions({xaxis:{categories:e.key.xdata},yaxis:{min:a-2,max:s+2}},!0,!0)}))}),5e3)},getInfo:function(){var e=this;Object(n["ec"])().then((function(t){var a=[];t.result.forEach((function(e){e.description&&a.push(e)})),e.redisInfo=a}))}},beforeDestroy:function(){this.timer&&clearInterval(this.timer)},mounted:function(){this.init()}},o=r,m=a("2877"),d=Object(m["a"])(o,i,s,!1,null,null,null);t["default"]=d.exports}}]);